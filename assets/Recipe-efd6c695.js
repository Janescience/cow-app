import{y as l,z as p,F as i,o as h,J as m,d as s,w as f,h as y}from"./index-a2033551.js";async function _(t={}){let e="?";return t.type&&(e=e+`type=${t.type}&`),t.recipe&&(e=e+`recipe=${t.recipe}&`),t?e.replace(/&*$/,""):""}class b{async all(e){const a=await _(e);return l.get("/recipe"+a).then(d=>d)}get(e){return l.get(`/recipe/${e}`)}create(e){return l.post("/recipe",e)}delete(e){return l.delete(`/recipe/${e}`)}update(e,a){return l.put(`/recipe/${e}`,a)}}const v=new b,V={data(){return{datas:[]}},created(){this.initialData()},computed:{value:{get(){var t;return this.valueType==="object"&&Object.keys(this.modelValue).length>0&&(this.modelValue.recipe_data=(t=this.modelValue)==null?void 0:t.name),this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},methods:{async initialData(){const t={farm:this.user.farm._id};try{const e=await v.all(t);if(this.datas=[],e&&(this.datas=e.data.recipes,this.datas.map(a=>a.recipe_data=a.name)),this.defaultValue){const a=this.datas.filter(d=>d[this.defaultType]==this.defaultValue);a&&this.handleInput(this.reduceAction(a[0]))}}catch(e){this.datas=[],console.error("Error: "+e.message)}},reduceAction(t){return this.valueType==="object"?t:t[this.valueType]},handleInput(t){this.$emit("update:value",t),this.dataSelected=this.datas.find(e=>e.name===t),this.$emit("update:dataSelected",this.dataSelected)}},props:{clear:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},dataSelected:{default:null,type:Object},defaultType:{default:null,type:Object},valueType:{default:"_id",type:Object},defaultValue:{default:null,type:Object},modelValue:{type:[String,Number,Boolean,Array,Object],default:{}},multiple:{default:!1,type:Boolean}}},S={class:"relative"};function g(t,e,a,d,c,r){const u=i("mdicon"),n=i("v-select");return h(),m("div",S,[s(n,{class:"ddl-dark ddl-white",clearable:a.clear,disabled:a.disabled,options:c.datas,reduce:r.reduceAction,label:"recipe_data",placeholder:"เลือกสูตรอาหาร",onInput:r.handleInput,modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),dataSelected:a.dataSelected,multiple:a.multiple},{"no-options":f(()=>[s(u,{name:"alertCircleOutline",width:"16",height:"16",class:"inline-block"}),y(" ไม่พบข้อมูล ")]),_:1},8,["clearable","disabled","options","reduce","onInput","modelValue","dataSelected","multiple"])])}const w=p(V,[["render",g]]);export{w as D,v as R};
