import{N as F,a1 as M,l as U,_ as q,k as O,R,g as E,h as I,e as W,U as H,Q as n,H as V,T as k,o as g,c as p,w as o,b as l,p as P,i as b,t as f,j as Y,d as z,a0 as D,Z as u,O as Q,S as j,P as Z,V as G}from"./index.39688e85.js";import{D as J,T as K,a as X}from"./Criteria.b5c9b383.js";import{_ as $}from"./BaseButtons.d5e44716.js";import{_ as ee,a as te}from"./FormField.1b598398.js";import{g as N}from"./age-calculate.613305e3.js";import{a as _}from"./auth-header.fcf18d24.js";import"./CardBoxModal.5bc7aaa5.js";const ae={data(){return{create:{sex:"F",overgrown:"N",date:new Date,placentaDrugDate:new Date,uterusWashDate:M(new Date,14)},show:{cow:null,seq:""},loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{data(t){t&&(this.show=t)},"create.date"(t){this.create.placentaDrugDate=t},"create.placentaDrugDate"(t){this.create.uterusWashDate=M(t,14)}},methods:{clear(){this.create.sex="",this.create.overgrown="",this.create.date=new Date,this.create.placentaDrugDate=new Date,this.create.uterusWashDate=M(new Date,14)},confirmCancel(t){this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert=""},calAge(t){return N(t)}},components:{BaseButton:U,BaseButtons:$,CardBox:q,BaseDivider:O,OverlayLayer:R,FormField:ee,FormControl:E,NotificationBar:I,BaseLevel:W,DDLCow:J,FormCheckRadioPicker:te,BaseIcon:H},props:{modelValue:{type:[String,Number,Boolean],default:null},data:{type:Object,default:null}}},le={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"};function re(t,e,c,v,a,s){const B=n("BaseIcon"),d=n("BaseLevel"),m=n("FormControl"),i=n("FormField"),w=n("FormCheckRadioPicker"),y=n("NotificationBar"),x=n("BaseDivider"),C=n("BaseButton"),L=n("BaseButtons"),T=n("CardBox"),A=n("OverlayLayer");return V((g(),p(A,null,{default:o(()=>[V(l(T,{title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",class:"shadow-lg w-full overflow-y-auto lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:z(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:o(()=>[P("div",le,[l(d,{type:"justify-start"},{default:o(()=>{var r,h;return[l(B,{path:"cow",size:"24",class:"mr-3"}),b(f((r=a.show.cow)==null?void 0:r.code)+" : "+f((h=a.show.cow)==null?void 0:h.name),1)]}),_:1}),l(d,{type:"justify-start"},{default:o(()=>{var r,h;return[b(" \u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48 : "+f((h=(r=a.show)==null?void 0:r.reproduction)==null?void 0:h.seq),1)]}),_:1}),l(d,{type:"justify-start"},{default:o(()=>{var r;return[b(" \u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C : "+f(s.calAge((r=a.show)==null?void 0:r.pregnantDate)),1)]}),_:1}),l(i,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(m,{modelValue:a.create.date,"onUpdate:modelValue":e[0]||(e[0]=r=>a.create.date=r),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u0E40\u0E1E\u0E28",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(w,{modelValue:a.create.sex,"onUpdate:modelValue":e[1]||(e[1]=r=>a.create.sex=r),type:"radio",options:{M:"\u0E40\u0E1E\u0E28\u0E1C\u0E39\u0E49",F:"\u0E40\u0E1E\u0E28\u0E40\u0E21\u0E35\u0E22"}},null,8,["modelValue"])]),_:1}),l(i,{label:"\u0E23\u0E01",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(w,{modelValue:a.create.overgrown,"onUpdate:modelValue":e[2]||(e[2]=r=>a.create.overgrown=r),type:"radio",options:{Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}},null,8,["modelValue"])]),_:1}),a.create.overgrown==="Y"?(g(),p(i,{key:0,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A"},{default:o(()=>[l(m,{modelValue:a.create.placentaDrugDate,"onUpdate:modelValue":e[3]||(e[3]=r=>a.create.placentaDrugDate=r),icon:"calendar",type:"date","lower-limit":a.create.date},null,8,["modelValue","lower-limit"])]),_:1})):Y("",!0),a.create.overgrown==="Y"?(g(),p(i,{key:1,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01"},{default:o(()=>[l(m,{modelValue:a.create.uterusWashDate,"onUpdate:modelValue":e[4]||(e[4]=r=>a.create.uterusWashDate=r),icon:"calendar",type:"date","lower-limit":a.create.placentaDrugDate},null,8,["modelValue","lower-limit"])]),_:1})):Y("",!0)]),a.alert?(g(),p(y,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:o(()=>[b(f(a.alert),1)]),_:1})):Y("",!0),l(x),l(L,{type:"justify-center"},{default:o(()=>[l(C,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:a.loading},null,8,["loading"]),l(C,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit","onHeaderIconClick"]),[[k,s.value]])]),_:1},512)),[[k,s.value]])}var ne=F(ae,[["render",re]]);async function oe(t={}){let e="?";if(t.farm&&(e=e+`farm=${t.farm}&`),t.cow&&(e=e+`cow=${t.cow}&`),t.date){const c=u(new Date(t.date)).format("YYYY-MM-DD");e=e+`date=${c}&`}return t.sex&&(e=e+`sex=${t.sex}&`),t?e.replace(/&*$/,""):""}class se{async all(e){const c=await oe(e);return D.get("/birth"+c,{headers:_()}).then(v=>v)}get(e){return D.get(`/birth/${e}`,{headers:_()})}create(e){return e.birthDate&&(e.birthDate=u(new Date(e.birthDate)).format("YYYY-MM-DD")),e.loginDate&&(e.loginDate=u(new Date(e.loginDate)).format("YYYY-MM-DD")),e.estrusDate&&(e.estrusDate=u(new Date(e.estrusDate)).format("YYYY-MM-DD")),e.matingDate&&(e.matingDate=u(new Date(e.matingDate)).format("YYYY-MM-DD")),e.checkDate&&(e.checkDate=u(new Date(e.checkDate)).format("YYYY-MM-DD")),D.post("/birth",e,{headers:_()})}delete(e){return D.delete(`/birth/${e}`,{headers:_()})}update(e,c){return D.put(`/birth/${e}`,c,{headers:_()})}}var S=new se;const ce=()=>({M:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49",F:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}),ie=()=>({Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}),ue={data(){return{openModal:!1,birthData:null,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E40\u0E1E\u0E28",value:"sex",options:[{id:"",label:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{id:"M",label:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49"},{id:"F",label:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}]},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",value:"date",icon:"calendar",type:"date"}],search:{cow:null,date:null,sex:"",farm:Q().farm._id},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48",value:"seq",class:"text-center"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07\u0E04\u0E23\u0E23\u0E20\u0E4C",class:"text-center",value:"pregnantDate",type:"date"},{label:"\u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C",func:t=>this.calAge(t==null?void 0:t.pregnantDate)},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",class:"text-center",value:"date",type:"date"},{label:"\u0E40\u0E1E\u0E28",class:"text-center",func:t=>ce()[t.sex]},{label:"\u0E23\u0E01\u0E04\u0E49\u0E32\u0E07",class:"text-center",func:t=>ie()[t.overgrown]},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A",class:"text-center",value:"drugDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01",class:"text-center",value:"washDate",type:"date"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger",condition:t=>!t.date},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning",condition:t=>t.date},{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",color:"info",type:"oth",func:t=>{this.openModal=!0,this.birthData=t}}]}},components:{SectionMain:j,LayoutAuthenticated:Z,SectionTitleBarSub:G,Table:K,Modal:ne,Criteria:X},created(){this.getDatas()},methods:{async getDatas(t){this.loading=!0;const e=await S.all(t);this.items=[],e.data&&(this.items=e.data.births),this.loading=!1},async remove(t){this.loading=!0,(await S.delete(t)).data&&this.getDatas(),this.loading=!1},edit(t){this.dataEdit=t,this.dataEdit.cow=t.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null,this.search.sex=null},calAge(t){return N(t)}}};function de(t,e,c,v,a,s){const B=n("SectionTitleBarSub"),d=n("Modal"),m=n("Criteria"),i=n("Table"),w=n("SectionMain"),y=n("LayoutAuthenticated");return g(),p(y,null,{default:o(()=>[l(w,null,{default:o(()=>[l(B,{icon:"babyFaceOutline",title:"\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01"}),l(d,{modelValue:a.openModal,"onUpdate:modelValue":e[0]||(e[0]=x=>a.openModal=x),data:a.birthData,onConfirm:s.getDatas},null,8,["modelValue","data","onConfirm"]),l(m,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getDatas,onReset:s.reset,forms:a.forms,search:a.search},null,8,["onSearch","onReset","forms","search"]),l(i,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01","has-checkbox":"","checked-data":a.checked,items:a.items,datas:a.datas,buttons:a.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:t.removeSelected,loading:a.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var we=F(ue,[["render",de]]);export{we as default};
