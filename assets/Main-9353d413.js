import{_ as z}from"./LayoutAuthenticated-15c7bb15.js";import{c as I,b as H,d as R,_ as Y,a as J}from"./BaseDivider-500208c2.js";import{v as K,h as Q,_ as W,c as g,w as m,z as o,o as n,d as i,g as _,s as f,F as L,D as T,j as l,t as u,f as X,n as y}from"./index-abef8c91.js";import{_ as Z}from"./UserAvatar-4d67cc80.js";import{_ as $}from"./FormField-dfd43755.js";import{_ as ee}from"./FormControl-ae72a55d.js";import{T as te}from"./Table-e063dcfd.js";import{C as ae}from"./Criteria-c1d895dc.js";import{_ as se}from"./SectionTitleBarSub-faca8a12.js";import{C as re}from"./Modal-d027c3d3.js";import{C as x}from"./cow-ee74544f.js";import{g as le}from"./age-calculate-3b5fe841.js";import{s as V,a as oe}from"./cow-cc6a596f.js";import"./CardBoxModal-186172ae.js";import"./CardBoxCollapse-1082e5a6.js";import"./FormCheckRadioPicker-046beaeb.js";import"./Cow-ee2e51c6.js";import"./Recipe-4a89d3dd.js";import"./Vaccine-a24c14c6.js";import"./Corral-822c0e1e.js";import"./NotificationBar-69141dfc.js";import"./ImageUpload-e2fd9899.js";import"./alert-3221d42e.js";const ne={data(){return{perPage:18,currentPage:0,modalCow:!1,cowStatus:V("search","F"),items:[],forms:[{label:"โค",value:"code",type:"ddl",module:"cow",valueType:"code",filter:{sex:"F"}},{label:"เพศ",value:"sex",options:oe()},{label:"สถานะ",value:"status",options:V("search","F")},{label:"คอก",value:"corral",type:"ddl",module:"corral",valueType:"id"}],search:{code:null,status:"",quality:"",corral:null,sex:"",flag:"Y"},mode:"create",loading:!1}},computed:{itemsPaginated(){return this.items?this.items.slice(this.perPage*this.currentPage,this.perPage*(this.currentPage+1)):[]},numPages(){return Math.ceil((this.items?this.items.length:0)/this.perPage)},currentPageHuman(){return this.currentPage+1},pagesList(){const e=[];for(let a=0;a<this.numPages;a++)e.push(a);return e},user(){return this.$store.state.auth.user}},components:{SectionMain:I,LayoutAuthenticated:z,BaseButton:H,BaseIcon:R,BaseButtons:Q,CardBox:Y,FormControl:ee,FormField:$,BaseDivider:J,CreateCowModal:re,Table:te,SectionTitleBarSub:se,Criteria:ae,UserAvatar:Z,BaseLevel:W},created(){this.getCows()},methods:{async updateGrade(){await x.calGrade()},async getCows(){this.loading=!0;const e=await x.all(this.search);this.items=[],e.data&&(this.items=e.data.cows,this.loading=!1)},async removeCow(e){this.loading=!0,(await x.update(e,{flag:"N"})).data&&this.getCows(),this.loading=!1},detail(e){this.$router.push({name:"cowDetail",params:{id:e._id}})},reset(){this.search.code=null,this.search.status="",this.search.quality="",this.search.sex="",this.search.corral=""},filter(e){const a={},d={},c={},s={};return e.sex=="F"?(s.icon="genderFemale",s.style="text-rose-500 bg-red-300 rounded-full  p-1 mr-1"):e.sex=="M"&&(s.icon="genderMale",s.style="text-blue-500 bg-indigo-300 rounded-full p-1 mr-1"),e.status==1?(a.icon="humanPregnant",a.style="text-blue-500 bg-indigo-900 rounded-full  p-1 mr-1"):e.status==2?(a.icon="waterOff",a.style="text-rose-500 bg-red-900 rounded-full p-1 mr-1"):e.status==3?(a.icon="water",a.style="text-white bg-teal-700 rounded-full p-1 mr-1"):e.status==4&&(a.icon="babyFaceOutline",a.style="text-yellow-400 bg-amber-900 rounded-full mr-1"),a.desc=this.cowStatus[e.status].label,e.grade==="A+"?d.style="text-lime-500":e.grade==="A"?d.style="text-green-500":e.grade==="B"?d.style="text-white":e.grade==="C"?d.style="text-orange-500":e.grade==="D"&&(d.style="text-red-500"),e.quality==1?(c.icon="medalOutline",c.style="text-green-600  bg-gray-800 rounded-full"):e.quality==3?(c.icon="medalOutline",c.style="text-red-600 bg-gray-800 rounded-full"):e.quality==2&&(c.icon="medalOutline",c.style="text-gray-400 bg-gray-800 rounded-full"),{status:a,grade:d,quality:c,sex:s}},calAge(e){return le(e).ageString}}},ie={key:1,class:"grid lg:gap-3 md:gap-2 gap-1 grid-cols-3 lg:grid-cols-6 md:grid-cols-4"},ce={class:"flex justify-between md:text-sm text-xs p-2"},de={class:""},ue=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),ge={class:"text-center mt-2"},me=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),fe={class:"lg:text-lg text-xs flex justify-center"},he={class:"dark:text-gray-400 text-gray-500 mr-1"},_e=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),pe={class:"justify-center flex lg:p-2 p-1"},ye={key:2,class:"text-center py-10 text-gray-500 dark:text-gray-400"},xe=l("p",null," กำลังโหลดข้อมูล...",-1),be={class:"p-3 mt-2 border-t border-gray-100 dark:border-gray-800 dark:bg-gray-900 lg:rounded-lg shadow-lg"};function we(e,a,d,c,s,r){const j=o("SectionTitleBarSub"),b=o("BaseButton"),q=o("CreateCowModal"),D=o("Criteria"),O=o("UserAvatar"),w=o("BaseLevel"),p=o("BaseIcon"),N=o("CardBox"),U=o("BaseButtons"),E=o("SectionMain"),G=o("LayoutAuthenticated");return n(),g(G,null,{default:m(()=>[i(E,null,{default:m(()=>[i(j,{icon:"cow",title:"โค",btnText:"เพิ่มโค","has-btn-add":"",onOpenModal:a[0]||(a[0]=t=>{s.mode="create",s.modalCow=!0})}),r.user.username==="devTeam"?(n(),g(b,{key:0,icon:"calculator",onClick:r.updateGrade,label:"Update Grade"},null,8,["onClick"])):_("",!0),i(q,{modelValue:s.modalCow,"onUpdate:modelValue":a[1]||(a[1]=t=>s.modalCow=t),onConfirm:r.getCows,mode:s.mode,dataEdit:e.dataEdit},null,8,["modelValue","onConfirm","mode","dataEdit"]),i(D,{grid:"grid-cols-2 md:grid-cols-3 lg:grid-cols-5",onSearch:r.getCows,onReset:r.reset,forms:s.forms,search:s.search},null,8,["onSearch","onReset","forms","search"]),s.loading?(n(),f("div",ye,[i(p,{path:"dotsCircle",size:"22",class:"animate-spin"}),xe])):(n(),f("div",ie,[(n(!0),f(L,null,T(r.itemsPaginated,t=>(n(),g(N,{key:t.name,onClick:h=>r.detail(t),class:"bg-gray-100","has-table":"",hoverable:""},{default:m(()=>{var h,C,v,B,k,P,S,A,F,M;return[l("div",ce,[l("div",null,"คอก "+u(t.corral||"-"),1),l("p",de,u(r.calAge(t.birthDate)),1)]),ue,i(w,{type:"justify-center"},{default:m(()=>[i(O,{username:"profile-card",class:"lg:w-20 lg:h-20 w-16 h-16 mt-2",avatar:t.image},null,8,["avatar"])]),_:2},1024),l("div",ge,[me,l("h4",fe,[l("p",he,u(t.code),1),X(" - "+u(t.name),1)]),_e,l("div",pe,[t.sex?(n(),g(p,{key:0,class:y((C=(h=r.filter(t))==null?void 0:h.sex)==null?void 0:C.style),path:(B=(v=r.filter(t))==null?void 0:v.sex)==null?void 0:B.icon,w:"w-4 lg:w-6",h:"h-4 lg:h-6"},null,8,["class","path"])):_("",!0),t.grade?(n(),f("p",{key:1,class:y(((P=(k=r.filter(t))==null?void 0:k.grade)==null?void 0:P.style)+" flex items-center justify-center font-extrabold  lg:text-base text-sm text-center bg-gray-800 rounded-full lg:h-6 lg:w-6 w-4 h-4 shadow-xl mr-1")},[l("div",null,u(t.grade),1)],2)):_("",!0),t.status?(n(),g(p,{key:2,class:y((A=(S=r.filter(t))==null?void 0:S.status)==null?void 0:A.style),path:(M=(F=r.filter(t))==null?void 0:F.status)==null?void 0:M.icon,w:"w-4 lg:w-6",h:"h-4 lg:h-6"},null,8,["class","path"])):_("",!0)])])]}),_:2},1032,["onClick"]))),128))])),l("div",be,[i(w,null,{default:m(()=>[i(U,null,{default:m(()=>[(n(!0),f(L,null,T(r.pagesList,t=>(n(),g(b,{key:t,active:t===s.currentPage,label:t+1,teeny:"",onClick:h=>s.currentPage=t},null,8,["active","label","onClick"]))),128))]),_:1}),l("small",null,"หน้า "+u(r.currentPageHuman)+" จาก "+u(r.numPages),1)]),_:1})])]),_:1})]),_:1})}const Re=K(ne,[["render",we]]);export{Re as default};
