import{a as $,T as C,o as n,c as o,w as f,I as h,s as k,n as V,N as S,k as b,h as x,t as I,q as g,e as T,d as p,O,Y as F,y as u,z as w,E as d,B as D,p as R,m as q,l as A,i as M,K as z,J as E}from"./index-529745f7.js";import{_ as P}from"./FormField-6bb0587b.js";import{_ as Q}from"./FormCheckRadioPicker-8bda58a9.js";import{D as H}from"./Cow-784919ca.js";const J=["onClick"],K={key:1,class:"text-center py-10 text-gray-500 dark:text-gray-400"},G=k("p",null,"ไม่มีรายการ...",-1),W=[G],X={key:2,class:"text-center py-10 text-gray-500 dark:text-gray-400"},Z=k("p",null," กำลังโหลดข้อมูล...",-1),ee={__name:"CardBoxCollapse",props:{title:{type:String,default:null},icon:{type:String,default:null},headerIcon:{type:String,default:null},rounded:{type:String,default:"md:rounded-2xl"},hasTable:Boolean,empty:Boolean,loading:Boolean,form:Boolean,hoverable:Boolean,modal:Boolean},emits:["header-icon-click","submit"],setup(t,{emit:e}){const a=t;var s=$(!1);const v=C(()=>a.form?"form":"div"),c=C(()=>{const m=[a.rounded,(a.modal,"dark:bg-gray-900")];return a.hoverable&&m.push("hover:shadow-lg transition-shadow duration-500"),m}),r=C(()=>s.value?"chevronDown":"chevronUp"),y=()=>{e("header-icon-click")},_=m=>{e("submit",m)},B=()=>{s.value=!s.value};return(m,j)=>(n(),o(F(g(v)),{class:V([g(c),"bg-white border shadow-lg border-gray-300 dark:border-gray-900"]),onSubmit:_},{default:f(()=>[t.title?(n(),h("header",{key:0,onClick:B,class:"flex items-stretch border-b border-gray-100 dark:border-gray-800"},[k("p",{class:V(["flex items-center py-3 grow font-bold",[t.icon?"px-4":"px-6"]])},[t.icon?(n(),o(S,{key:0,path:t.icon,class:"mr-3"},null,8,["path"])):b("",!0),x(" "+I(t.title),1)],2),g(r)?(n(),h("a",{key:0,href:"#",class:"flex items-center py-3 px-4 justify-center ring-blue-700 focus:ring","aria-label":"more options",onClick:T(y,["prevent"])},[p(S,{path:g(r),size:"18"},null,8,["path"])],8,J)):b("",!0)])):b("",!0),t.empty?(n(),h("div",K,W)):t.loading?(n(),h("div",X,[t.loading?(n(),o(S,{key:0,path:"dotsCircle",size:"22",class:"animate-spin"})):b("",!0),Z])):g(s)?(n(),h("div",{key:3,class:V({"p-6":!t.hasTable})},[O(m.$slots,"default")],2)):b("",!0)]),_:3},40,["class"]))}};async function te(t={}){let e="?";return t.type&&(e=e+`type=${t.type}&`),t.recipe&&(e=e+`recipe=${t.recipe}&`),t?e.replace(/&*$/,""):""}class ae{async all(e){const a=await te(e);return u.get("/recipe"+a).then(s=>s)}get(e){return u.get(`/recipe/${e}`)}create(e){return u.post("/recipe",e)}delete(e){return u.delete(`/recipe/${e}`)}update(e,a){return u.put(`/recipe/${e}`,a)}}const le=new ae;const ne={data(){return{datas:[]}},created(){this.initialData()},computed:{value:{get(){var t;return this.valueType==="object"&&(this.modelValue.recipe_data=(t=this.modelValue)==null?void 0:t.name),this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},methods:{async initialData(){const t={farm:this.user.farm._id};try{const e=await le.all(t);if(this.datas=[],e&&(this.datas=e.data.recipes,this.datas.map(a=>a.recipe_data=a.name)),this.defaultValue){const a=this.datas.filter(s=>s[this.defaultType]==this.defaultValue);a&&this.handleInput(this.reduceAction(a[0]))}}catch(e){this.datas=[],console.error("Error: "+e.message)}},reduceAction(t){return this.valueType==="object"?t:t[this.valueType]},handleInput(t){this.$emit("update:value",t),this.dataSelected=this.datas.find(e=>e.name===t),this.$emit("update:dataSelected",this.dataSelected)}},props:{clear:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},dataSelected:{default:null,type:Object},defaultType:{default:null,type:Object},valueType:{default:"_id",type:Object},defaultValue:{default:null,type:Object},modelValue:{type:[String,Number,Boolean,Array,Object],default:""},multiple:{default:!1,type:Boolean}}},ce={class:"relative"};function de(t,e,a,s,v,c){const r=d("mdicon"),y=d("v-select");return n(),h("div",ce,[p(y,{class:"ddl",clearable:a.clear,disabled:a.disabled,options:v.datas,reduce:c.reduceAction,label:"recipe_data",placeholder:"เลือกสูตรอาหาร",onInput:c.handleInput,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=_=>c.value=_),dataSelected:a.dataSelected,multiple:a.multiple},{"no-options":f(()=>[p(r,{name:"alertCircleOutline",width:"16",height:"16",class:"inline-block"}),x(" ไม่พบข้อมูล ")]),_:1},8,["clearable","disabled","options","reduce","onInput","modelValue","dataSelected","multiple"])])}const se=w(ne,[["render",de]]);async function ie(t={}){let e="?";if(t.dateCurrent){const a=D(new Date(t.dateCurrent)).format("YYYY-MM-DD");e=e+`dateCurrent=${a}&`}if(t.dateNext){const a=D(new Date(t.dateNext)).format("YYYY-MM-DD");e=e+`dateNext=${a}&`}return t.vaccine&&(e=e+`vaccine=${t.vaccine}&`),t?e.replace(/&*$/,""):""}class oe{async all(e){const a=await ie(e);return u.get("/vaccine"+a).then(s=>s)}get(e){return u.get(`/vaccine/${e}`)}create(e){return e.dateCurrent&&(e.dateCurrent=D(new Date(e.dateCurrent)).format("YYYY-MM-DD")),e.dateNext&&(e.dateNext=D(new Date(e.dateNext)).format("YYYY-MM-DD")),u.post("/vaccine",e)}delete(e){return u.delete(`/vaccine/${e}`)}update(e,a){return u.put(`/vaccine/${e}`,a)}}const ue=new oe;const re={data(){return{datas:[]}},created(){this.initialData()},computed:{value:{get(){var t;return this.valueType==="object"&&(this.modelValue.vaccine_data=(t=this.modelValue)==null?void 0:t.name),this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},methods:{async initialData(){try{const t=await ue.all();if(this.datas=[],t&&(this.datas=t.data.vaccines,this.datas.map(e=>e.vaccine_data=e.name)),this.defaultValue){const e=this.datas.filter(a=>a[this.defaultType]==this.defaultValue);e&&this.handleInput(this.reduceAction(e[0]))}}catch(t){this.datas=[],console.error("Error: "+t.message)}},reduceAction(t){return this.valueType==="object"?t:t[this.valueType]},handleInput(t){this.$emit("update:value",t),this.dataSelected=this.datas.find(e=>e.name===t),this.$emit("update:dataSelected",this.dataSelected)}},props:{clear:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},dataSelected:{default:null,type:Object},defaultType:{default:null,type:Object},valueType:{default:"_id",type:Object},defaultValue:{default:null,type:Object},modelValue:{type:[String,Number,Boolean,Array,Object],default:""},multiple:{default:!1,type:Boolean}}},pe={class:"relative"};function me(t,e,a,s,v,c){const r=d("mdicon"),y=d("v-select");return n(),h("div",pe,[p(y,{class:"ddl",clearable:a.clear,disabled:a.disabled,options:v.datas,reduce:c.reduceAction,label:"vaccine_data",placeholder:"เลือกวัคซีน",onInput:c.handleInput,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=_=>c.value=_),dataSelected:a.dataSelected,multiple:a.multiple},{"no-options":f(()=>[p(r,{name:"alertCircleOutline",width:"16",height:"16",class:"inline-block"}),x(" ไม่พบข้อมูล ")]),_:1},8,["clearable","disabled","options","reduce","onInput","modelValue","dataSelected","multiple"])])}const he=w(re,[["render",me]]),ye={props:{grid:{type:String,default:"grid-cols-4"},forms:{type:Array,default:[]},search:{type:Object,default:null},collapse:Boolean,btnSubmitLabel:{type:String,default:"ค้นหา"},btnLoading:Boolean},components:{BaseButton:R,BaseButtons:q,BaseDivider:A,CardBoxCollapse:ee,FormField:P,FormControl:M,FormCheckRadioPicker:Q,DDLCow:H,DDLRecipe:se,DDLVaccine:he},methods:{submit(){this.$emit("search",this.search)},reset(){this.$emit("reset",this.search)}}};function _e(t,e,a,s,v,c){const r=d("DDLCow"),y=d("DDLRecipe"),_=d("DDLVaccine"),B=d("FormCheckRadioPicker"),m=d("FormControl"),j=d("FormField"),L=d("BaseDivider"),Y=d("BaseButton"),N=d("BaseButtons"),U=d("CardBoxCollapse");return n(),o(U,{title:"ค้นหา",icon:"",form:"",class:"mb-2","header-icon":"",collapse:a.collapse,onSubmit:T(c.submit,["prevent"]),onReset:T(c.reset,["prevent"])},{default:f(()=>[k("div",{class:V(["grid gap-5",[a.grid]])},[(n(!0),h(E,null,z(a.forms,l=>(n(),o(j,{key:l.value,label:l.label,class:V([l.class])},{default:f(()=>[l.type==="ddl"&&l.module==="cow"?(n(),o(r,{key:0,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,valueType:l.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):l.type==="ddl-multiple"&&l.module==="cow"?(n(),o(r,{key:1,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,valueType:l.valueType,mutiple:""},null,8,["modelValue","onUpdate:modelValue","valueType"])):l.type==="ddl"&&l.module==="recipe"?(n(),o(y,{key:2,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,valueType:l.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):l.type==="ddl"&&l.module==="vaccine"?(n(),o(_,{key:3,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,valueType:l.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):l.type==="radio"?(n(),o(B,{key:4,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,type:l.type,options:l.options,required:l.required},null,8,["modelValue","onUpdate:modelValue","type","options","required"])):(n(),o(m,{key:5,modelValue:a.search[l.value],"onUpdate:modelValue":i=>a.search[l.value]=i,icon:l.icon,options:l.options,type:l.type,required:l.required},null,8,["modelValue","onUpdate:modelValue","icon","options","type","required"]))]),_:2},1032,["label","class"]))),128))],2),p(L),p(N,{type:"justify-center","no-wrap":""},{default:f(()=>[p(Y,{type:"submit",color:"info",label:a.btnSubmitLabel,loading:a.btnLoading,disabled:a.btnLoading},null,8,["label","loading","disabled"]),p(Y,{type:"reset",color:"danger",label:"ล้าง"})]),_:1})]),_:1},8,["collapse","onSubmit","onReset"])}const Ve=w(ye,[["render",_e]]);export{Ve as C,he as D,le as R,ue as V,se as a};
