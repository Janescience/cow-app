import{c as D,_ as y,b as S}from"./BaseDivider-92a0f226.js";import{_ as w}from"./LayoutAuthenticated-bfcabf3e.js";import{_ as C}from"./SectionTitleBarSub-d1c9d639.js";import{_ as M}from"./UserAvatar-9e392228.js";import{v as x,_ as R,h as k,c as B,w as c,z as l,o as T,d as s}from"./index-c8301f55.js";import{T as L}from"./Table-3d752fda.js";import{C as A}from"./Criteria-97bbe65d.js";import{M as V}from"./Modal-706c549a.js";import{R as n}from"./reproduction-b2b9d280.js";import{a as d,r as u}from"./reproduct-4b10c1e3.js";import{T as m}from"./alert-b696341f.js";import"./CardBoxModal-989c2f17.js";import"./FormControl-0cbf83ef.js";import"./CardBoxCollapse-cc74730f.js";import"./FormField-c07d5fcc.js";import"./FormCheckRadioPicker-b7967c85.js";import"./Cow-6e9470ab.js";import"./cow-197f9a15.js";import"./Recipe-ae3d1971.js";import"./Vaccine-ebb45c10.js";import"./NotificationBar-d46182a6.js";const q={data(){return{openModal:!1,items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"สถานะ",value:"status",options:d()},{label:"ผล",value:"result",options:u()},{label:"วันที่เข้าระบบสืบพันธุ์",value:"loginDate",icon:"calendar",type:"date"},{label:"วันที่เป็นสัด",value:"estrusDate",icon:"calendar",type:"date"},{label:"วันที่ผสมพันธุ์",value:"matingDate",icon:"calendar",type:"date"},{label:"วันที่ตรวจท้อง",value:"checkDate",icon:"calendar",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,mode:"create",modalData:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"วันที่เข้าระบบสืบพันธุ์",class:"text-center",value:"loginDate",type:"date"},{label:"ผล",func:e=>u()[e.result].label},{label:"วันที่เป็นสัด",class:"text-center",value:"estrusDate",type:"date"},{label:"วันที่ผสมพันธุ์",class:"text-center",value:"matingDate",type:"date"},{label:"วันที่ตรวจท้อง",class:"text-center",value:"checkDate",type:"date"},{label:"พ่อพันธุ์",value:"dad"},{label:"สถานะ",func:e=>d()[e.status].label},{label:"วิธีรักษา",value:"howTo"}],buttons:[{label:"ลบ",type:"delete",color:"danger",condition:e=>e.status!="2"&&e.status!="3"},{label:"แก้ไข",type:"edit",color:"warning",condition:e=>e.status!="2"&&e.status!="3"}]}},components:{SectionMain:D,LayoutAuthenticated:w,SectionTitleBarSub:C,Table:L,Modal:V,Criteria:A,UserAvatar:M,CardBox:y,BaseLevel:R,BaseButtons:k,BaseButton:S},computed:{getDataCopy(){return{...this.modalData}}},created(){this.search.cow=this.$route.params.cow,this.getReproductions()},methods:{async getReproductions(){this.loading=!0;const e=await n.all(this.search);this.items=[],e.data&&(this.items=e.data.reproducts),this.loading=!1},async remove(e){this.loading=!0,(await n.delete(e)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},async removeSelected(e){this.loading=!0;let a=[];for(let r of e)a.push(r._id);(await n.deletes(a)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},edit(e){this.modalData=e,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.loginDate=null,this.search.estrusDate=null,this.search.matingDate=null,this.search.checkDate=null,this.search.status="",this.search.result="",this.getReproductions()},resetData(){this.modalData=null}}};function E(e,a,p,r,t,o){const h=l("SectionTitleBarSub"),f=l("Modal"),_=l("Criteria"),b=l("Table"),g=l("SectionMain"),v=l("LayoutAuthenticated");return T(),B(v,null,{default:c(()=>[s(g,null,{default:c(()=>[s(h,{icon:"reproduction",title:"ประวัติการผสมพันธุ์",btnText:"เพิ่มการผสมพันธุ์","has-btn-add":"",onOpenModal:a[0]||(a[0]=i=>{t.mode="create",t.openModal=!0})}),s(f,{modelValue:t.openModal,"onUpdate:modelValue":a[1]||(a[1]=i=>t.openModal=i),mode:t.mode,data:o.getDataCopy,onConfirm:o.getReproductions,onCancel:o.resetData},null,8,["modelValue","mode","data","onConfirm","onCancel"]),s(_,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:o.getReproductions,onReset:o.reset,forms:t.forms,search:t.search,btnLoading:t.loading},null,8,["onSearch","onReset","forms","search","btnLoading"]),s(b,{title:"รายการประวัติการผสมพันธุ์","has-checkbox":"","checked-data":t.checked,items:t.items,datas:t.datas,buttons:t.buttons,onEdit:o.edit,onDelete:o.remove,onDeleteSelected:o.removeSelected,loading:t.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}const oe=x(q,[["render",E]]);export{oe as default};
