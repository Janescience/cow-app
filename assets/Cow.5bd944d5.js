import{a as A,W as T,o as n,c as o,w as f,p as u,H as L,X as O,Y as R,N as S,l as M,_ as U,f as N,e as I,Z as Y,$ as H,Q as h,s as i,b as _,t as k,F as C,G as b,j as g,n as x,a0 as v,O as E,i as F}from"./index.24884b02.js";import{_ as $}from"./BaseButtons.5121764f.js";import{_ as q}from"./CardBoxModal.67976e70.js";import{a as w}from"./auth-header.e4a3adbe.js";const Q={class:"checkbox"},z=u("span",{class:"check"},null,-1),G={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},isChecked:{type:Boolean,default:!1}},emits:["checked"],setup(t,{emit:e}){const a=t,c=A(a.isChecked);return T(c,s=>{e("checked",s)}),(s,l)=>(n(),o(R(a.type),{class:"checkbox-cell"},{default:f(()=>[u("label",Q,[L(u("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>c.value=m),type:"checkbox"},null,512),[[O,c.value]]),z])]),_:1}))}},W={data(){return{textConfirm:"",modalConfirm:!1,funcConfirm:Function,idConfirm:null,dataSelectedConfirm:[],perPage:10,currentPage:0,checkedRows:[],loading:!1}},props:{title:{type:String,default:""},items:{type:Array,default:[]},datas:{type:Array,default:[]},button:{type:Object,default:null},hasCheckbox:Boolean},computed:{itemsPaginated(){return this.items?this.items.slice(this.perPage*this.currentPage,this.perPage*(this.currentPage+1)):[]},numPages(){return Math.ceil((this.items?this.items.length:0)/this.perPage)},currentPageHuman(){return this.currentPage+1},pagesList(){const t=[];for(let e=0;e<this.numPages;e++)t.push(e);return t}},components:{BaseButton:M,BaseButtons:$,CardBox:U,CardBoxModal:q,TableCheckboxCell:G,UserAvatar:N,BaseLevel:I},methods:{getValue(t,e){const a=this.getPropByString(t,e.value);if(!e.type)return e.func?e.func(t):a;switch(e.type){case"number":return this.formatCurrency(a);case"date":return this.formatDate(a);case"image":return a}},getPropByString(t,e){if(!e)return t;let a,c=e.split(".");for(var s=0,l=c.length-1;s<l;s++){a=c[s];var m=t[a];if(m!==void 0)t=m;else break}return t[c[s]]},removeData(){this.$emit("delete",this.idConfirm)},removeSelected(){this.$emit("deleteSelected",this.dataSelectedConfirm)},edit(t){this.$emit("edit",t)},detail(t){this.$router.push(t)},confirm(t,e,a,c){this.textConfirm=t,this.funcConfirm=c,this.idConfirm=e,this.dataSelectedConfirm=a,this.modalConfirm=!0},checked(t,e){t?(e.checked=!0,this.checkedRows.push(e)):(e.checked=!1,this.checkedRows=this.removeArr(this.checkedRows,a=>a._id===e._id))},countChecked(){return this.checkedRows.length>0?"(\u0E40\u0E25\u0E37\u0E2D\u0E01 "+this.checkedRows.length+" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23)":""},removeArr(t,e){const a=[];return t.forEach(c=>{e(c)||a.push(c)}),a},formatDate(t){return t?Y(new Date(t)).format("DD/MM/YYYY"):""},formatCurrency(t){return H(t).format(0,0)}}},X={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},Z={class:"overflow-x-auto"},J={key:0,class:"text-center whitespace-nowrap"},K=u("th",null,null,-1),j=["data-label"],ee={key:1},te={key:1,class:"lg:w-6 whitespace-nowrap"},ae={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"};function le(t,e,a,c,s,l){const m=h("CardBoxModal"),y=h("BaseButton"),p=h("BaseButtons"),P=h("TableCheckboxCell"),V=h("UserAvatar"),D=h("BaseLevel"),B=h("CardBox");return n(),i(C,null,[_(m,{modelValue:s.modalConfirm,"onUpdate:modelValue":e[0]||(e[0]=r=>s.modalConfirm=r),title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07","button-label":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19",onConfirm:s.funcConfirm,"has-cancel":"","has-button":""},{default:f(()=>[u("p",null,k(s.textConfirm),1)]),_:1},8,["modelValue","onConfirm"]),l.itemsPaginated.length>0?(n(),o(B,{key:0,title:a.title+" "+l.countChecked(),class:"shadow-lg","has-table":"","header-icon":""},{default:f(()=>[s.checkedRows.length>0?(n(),i("div",X,[(n(!0),i(C,null,b(s.checkedRows,r=>(n(),i("span",{key:r._id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700 mb-1"},k(r.name),1))),128)),_(p,{type:"justify-start lg:justify-end","no-wrap":""},{default:f(()=>[_(y,{color:"danger",label:"\u0E25\u0E1A\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",onClick:e[1]||(e[1]=r=>l.confirm("\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E25\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E17\u0E35\u0E48\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 \u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 ?",null,s.checkedRows,l.removeSelected))})]),_:1})])):g("",!0),u("div",Z,[u("table",null,[u("thead",null,[u("tr",null,[a.hasCheckbox?(n(),i("th",J,"\u0E40\u0E25\u0E37\u0E2D\u0E01")):g("",!0),(n(!0),i(C,null,b(a.datas,r=>(n(),i("th",{key:r.label,class:x(["whitespace-nowrap",[r.class]])},k(r.label),3))),128)),K])]),u("tbody",null,[(n(!0),i(C,null,b(l.itemsPaginated,r=>(n(),i("tr",{key:r._id},[a.hasCheckbox?(n(),o(P,{key:0,isChecked:r.checked,class:"text-center border-b-0 lg:w-6 before:hidden",onChecked:d=>l.checked(d,r)},null,8,["isChecked","onChecked"])):g("",!0),(n(!0),i(C,null,b(a.datas,d=>(n(),i("td",{key:d.label,"data-label":d.label,class:x(["whitespace-nowrap",[d.class]])},[d.type==="image"?(n(),o(V,{key:0,avatar:l.getValue(r,d),class:"w-36 mx-auto lg:h-20 lg:w-20"},null,8,["avatar"])):(n(),i("span",ee,k(l.getValue(r,d)),1))],10,j))),128)),a.button?(n(),i("td",te,[_(p,{type:"justify-end lg:justify-start","no-wrap":""},{default:f(()=>[a.button.delete?(n(),o(y,{key:0,color:"danger",label:"\u0E25\u0E1A",onClick:d=>l.confirm("\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E25\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E19\u0E35\u0E49 \u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 ?",r._id,null,l.removeData)},null,8,["onClick"])):g("",!0),a.button.edit?(n(),o(y,{key:1,color:"warning",label:"\u0E41\u0E01\u0E49\u0E44\u0E02",onClick:d=>l.edit(r)},null,8,["onClick"])):g("",!0),a.button.detail?(n(),o(y,{key:2,color:"info",label:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14",onClick:d=>l.detail(a.button.detail.path+"/"+r._id)},null,8,["onClick"])):g("",!0)]),_:2},1024)])):g("",!0)]))),128))])])]),u("div",ae,[_(D,null,{default:f(()=>[_(p,null,{default:f(()=>[(n(!0),i(C,null,b(l.pagesList,r=>(n(),o(y,{key:r,active:r===s.currentPage,label:r+1,small:"",onClick:d=>s.currentPage=r},null,8,["active","label","onClick"]))),128))]),_:1}),u("small",null,"\u0E2B\u0E19\u0E49\u0E32 "+k(l.currentPageHuman)+" \u0E08\u0E32\u0E01 "+k(l.numPages),1)]),_:1})])]),_:1},8,["title"])):s.loading?(n(),o(B,{key:1,loading:""})):(n(),o(B,{key:2,empty:""}))],64)}var _e=S(W,[["render",le]]);async function ne(t={}){let e="?";return t.farm&&(e=e+`farm=${t.farm}&`),t.flag&&(e=e+`flag=${t.flag}&`),t.code&&(e=e+`code=${t.code}&`),t.name&&(e=e+`name=${t.name}&`),t.status&&(e=e+`status=${t.status}&`),t.birthDate&&(e=e+`birthDate=${t.birthDate}&`),t.corral&&(e=e+`corral=${t.corral}&`),t?e.replace(/&*$/,""):""}class re{async all(e){const a=await ne(e);return v.get("/cow"+a,{headers:w()}).then(c=>c)}get(e){return v.get(`/cow/${e}`,{headers:w()})}create(e){return v.post("/cow",e,{headers:w()})}delete(e){return v.delete(`/cow/${e}`,{headers:w()})}update(e,a){return v.put(`/cow/${e}`,a,{headers:w()})}}var se=new re;const ce={data(){return{datas:[]}},created(){this.initialData()},computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{async initialData(){const t={farm:E().farm._id};try{const e=await se.all(t);if(this.datas=[],e&&(this.datas=e.data.cows,this.datas.map(a=>a.cow_data=a.code+" : "+a.name)),this.defaultValue){const a=this.datas.filter(c=>c[this.defaultType]==this.defaultValue);a&&this.handleInput(this.reduceAction(a[0]))}}catch(e){this.datas=[],console.error("Error: "+e.message)}},reduceAction(t){return this.valueType==="object"?t:t[this.valueType]},handleInput(t){this.$emit("update:value",t),this.dataSelected=this.datas.find(e=>e.cde===t||e.name===t),this.$emit("update:dataSelected",this.dataSelected)}},props:{clear:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},dataSelected:{default:null,type:Object},defaultType:{default:null,type:Object},valueType:{default:"_id",type:Object},defaultValue:{default:null,type:Object},modelValue:{type:[String,Number,Boolean,Array,Object],default:""}}},ie={class:"relative"},de=F(" \u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ");function ue(t,e,a,c,s,l){const m=h("mdicon"),y=h("v-select");return n(),i("div",ie,[_(y,{class:"ddl",clearable:a.clear,disabled:a.disabled,options:s.datas,reduce:l.reduceAction,label:"cow_data",placeholder:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E42\u0E04",onInput:l.handleInput,modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=p=>l.value=p),dataSelected:a.dataSelected},{"no-options":f(()=>[_(m,{name:"alertCircleOutline",width:"16",height:"16",class:"inline-block"}),de]),_:1},8,["clearable","disabled","options","reduce","onInput","modelValue","dataSelected"])])}var ye=S(ce,[["render",ue]]);export{se as C,ye as D,_e as T};
