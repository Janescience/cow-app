import{r as p,a as g,c as b,w as a,u as x,b as N,o as V,d as e,n as j,e as C,_ as d,f as i,t as k,g as S,h as U,i as u,k as q,j as _,A as B}from"./index-039a43b4.js";import{_ as R,a as A}from"./SectionFullScreen-a3a4c265.js";import{_ as z,a as D,b as M}from"./BaseDivider-dfbedae5.js";import{_ as O}from"./CardBoxModal-ded57ce9.js";import{_ as f}from"./FormField-40942a33.js";import{_ as c}from"./FormControl-8a29cb33.js";import{_ as T}from"./SectionTitle-1d57376d.js";import{_ as E}from"./UserAvatar-53e67a05.js";import{_ as F}from"./NotificationBar-74322950.js";const G=_("a",{href:"/login",class:"ml-1 text-blue-500"},[_("u",null,"เข้าสู่ระบบ")],-1),H=_("p",null,"สร้างบัญชีสำเร็จ ต้องการเข้าสู่ระบบหรือไม่ ? ",-1),ee={__name:"RegisterView",setup(I){const s=p({username:"",password:"",farmName:""}),o=g(!1),n=g(!1),r=p({message:""}),w=x(),y=N(),$=async()=>{r.message="",(await B.register(s)).data&&(n.value=!0)},h=()=>{o.value=!0,r.message="",y.dispatch("auth/login",{username:s.username,password:s.password}).then(m=>{w.push("/overview/farm")}).catch(m=>{r.message=m.response.data.message,o.value=!1})};return(m,t)=>(V(),b(R,null,{default:a(()=>[e(A,{bg:"login"},{default:a(({cardClass:v})=>[e(z,{class:j(v),form:"",title:"","header-icon":"",onSubmit:C($,["prevent"])},{default:a(()=>[e(d,{type:"justify-center"},{default:a(()=>[e(E,{avatar:"/image/cow-logo.jpg",class:"w-28",username:"logo"})]),_:1}),e(T,null,{default:a(()=>[i(" ระบบจัดการฟาร์มโคนม ")]),_:1}),e(d,{type:"justify-center",class:"text-lg"},{default:a(()=>[i(" สร้างบัญชี ")]),_:1}),e(d,{type:"justify-center",class:"text-sm"},{default:a(()=>[i(" มีบัญชีแล้ว ? "),G]),_:1}),e(f,{label:"ชื่อผู้ใช้",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.username,"onUpdate:modelValue":t[0]||(t[0]=l=>s.username=l),icon:"account",name:"login",required:"",autocomplete:"username"},null,8,["modelValue"])]),_:1}),e(f,{label:"รหัสผ่าน",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=l=>s.password=l),icon:"asterisk",type:"password",name:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),e(f,{label:"ชื่อฟาร์ม",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.farmName,"onUpdate:modelValue":t[2]||(t[2]=l=>s.farmName=l),icon:"barn",required:""},null,8,["modelValue"])]),_:1}),r.message?(V(),b(F,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[i(k(r.message),1)]),_:1})):S("",!0),e(D),e(U,{type:"justify-center"},{default:a(()=>[e(M,{type:"submit",color:"info",label:"สร้างบัญชี",loading:u(o),disabled:u(o)},null,8,["loading","disabled"])]),_:1})]),_:2},1032,["class","onSubmit"]),e(O,{modelValue:u(n),"onUpdate:modelValue":t[3]||(t[3]=l=>q(n)?n.value=l:null),title:"ยืนยันอีกครั้ง","button-label":"ตกลง",onConfirm:h,"has-cancel":"","has-button":"",loading:u(o)},{default:a(()=>[H]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}))}};export{ee as default};
