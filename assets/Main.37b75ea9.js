import{K as S,p as L,m as F,_ as T,l as q,$ as N,i as O,j as R,f as j,X as A,N as a,P as C,W as D,o as v,c as y,w as n,d as o,s as b,h as m,t as g,k as E,e as U,S as I,L as H,M as P}from"./index.2dcfda0f.js";import{T as z}from"./Table.0d5ec7f5.js";import{D as K,C as W}from"./Criteria.9b7500d4.js";import{_ as X}from"./FormField.8a37672c.js";import{T as B}from"./alert.427ba63d.js";import{F as u}from"./food.d65ebbdc.js";import{_ as G}from"./FormCheckRadioPicker.85760ddd.js";import"./Cow.0dc5b479.js";import"./cow.e98d4c53.js";const J={data(){return{food:{corral:"",recipe:{},qty:0,amount:0,amountAvg:0,numCow:0},loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},watch:{data(t){t&&this.mode==="edit"&&(this.food=t)},"food.recipe"(t){t?this.food.amount=t.amount:this.food.amount=null}},methods:{clear(){this.food.corral="",this.food.recipe={},this.food.qty=0},confirmCancel(t){this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await u.create(this.food)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")):await u.update(this.food._id,this.food)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")),B.fire({icon:"success",title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})}catch(t){console.error("Error : ",t),this.clear(),this.loading=!1,this.alert=await t.response.data.message,B.fire({icon:"error",title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})}}},components:{BaseButton:L,BaseButtons:F,CardBox:T,BaseDivider:q,OverlayLayer:N,FormField:X,FormControl:O,NotificationBar:R,BaseLevel:j,DDLRecipe:K,FormCheckRadioPicker:G,BaseIcon:A},props:{modelValue:{type:[String,Number,Boolean],default:null},data:{type:Object,default:null},mode:{type:String,default:""}}},Q={class:"grid grid-cols-2 gap-5"},Y={class:"text-red-700 font-bold p-2"},Z={class:"text-red-700 font-bold p-2"};function $(t,l,V,x,e,s){const f=a("DDLRecipe"),r=a("FormField"),d=a("FormControl"),p=a("BaseLevel"),_=a("NotificationBar"),h=a("BaseDivider"),i=a("BaseButton"),k=a("BaseButtons"),w=a("CardBox"),M=a("OverlayLayer");return C((v(),y(M,null,{default:n(()=>[C(o(w,{title:(this.mode==="create"?"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01":"\u0E41\u0E01\u0E49\u0E44\u0E02")+"\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E49\u0E2D\u0E32\u0E2B\u0E32\u0E23",class:"shadow-lg w-full lg:w-5/6 z-50","header-icon":"close",modal:"",form:"",onSubmit:U(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:n(()=>[b("div",Q,[o(r,{label:"\u0E2A\u0E39\u0E15\u0E23\u0E2D\u0E32\u0E2B\u0E32\u0E23",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[o(f,{modelValue:e.food.recipe,"onUpdate:modelValue":l[0]||(l[0]=c=>e.food.recipe=c),valueType:"object"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u0E04\u0E2D\u0E01",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[o(d,{modelValue:e.food.corral,"onUpdate:modelValue":l[1]||(l[1]=c=>e.food.corral=c),icon:"barn",type:"number",required:""},null,8,["modelValue"])]),_:1}),o(r,{label:"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E43\u0E2B\u0E49/\u0E27\u0E31\u0E19 (\u0E01\u0E01.)",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[o(d,{modelValue:e.food.qty,"onUpdate:modelValue":l[2]||(l[2]=c=>e.food.qty=c),icon:"shaker",type:"number",required:""},null,8,["modelValue"])]),_:1}),o(r,{class:"col-span-3"},{default:n(()=>[o(p,{type:"justify-end"},{default:n(()=>[m(" \u0E23\u0E32\u0E04\u0E32/\u0E01\u0E01. "),b("p",Y,g(e.food.amount>0?e.food.amount:"-"),1),m(" \u0E1A\u0E32\u0E17 , \u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E40\u0E07\u0E34\u0E19/\u0E27\u0E31\u0E19 "),b("p",Z,g(e.food.qty&&e.food.amount>0?e.food.qty*e.food.amount:"-"),1),m(" \u0E1A\u0E32\u0E17 ")]),_:1})]),_:1})]),e.alert?(v(),y(_,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:n(()=>[m(g(e.alert),1)]),_:1})):E("",!0),o(h),o(k,{type:"justify-center"},{default:n(()=>[o(i,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:e.loading},null,8,["loading"]),o(i,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[D,s.value]])]),_:1},512)),[[D,s.value]])}var ee=S(J,[["render",$]]);const te={data(){return{openModal:!1,modalData:null,items:[],forms:[{label:"\u0E2A\u0E39\u0E15\u0E23\u0E2D\u0E32\u0E2B\u0E32\u0E23",value:"recipe",type:"ddl",module:"recipe"},{label:"\u0E04\u0E2D\u0E01",value:"corral",icon:"barn",type:"number"}],search:{recipe:null,corral:""},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"corral"},label:{value:"recipe.name"}},datas:[{label:"\u0E04\u0E2D\u0E01",class:"text-center",value:"corral"},{label:"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E27\u0E31\u0E27",class:"text-center",value:"numCow"},{label:"\u0E2A\u0E39\u0E15\u0E23\u0E2D\u0E32\u0E2B\u0E32\u0E23",class:"text-center",value:"recipe.name"},{label:"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E43\u0E2B\u0E49/\u0E27\u0E31\u0E19 (\u0E01\u0E01.)",class:"text-center",value:"qty"},{label:"\u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E40\u0E07\u0E34\u0E19/\u0E27\u0E31\u0E19",class:"text-center",value:"amount"},{label:"\u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E40\u0E07\u0E34\u0E19/\u0E15\u0E31\u0E27",class:"text-center",value:"amountAvg"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger"},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning"}]}},components:{SectionMain:I,LayoutAuthenticated:H,SectionTitleBarSub:P,Table:z,Modal:ee,Criteria:W},computed:{user(){return this.$store.state.auth.user}},created(){this.getDatas()},methods:{async getDatas(t){this.loading=!0;const l=await u.all(t);this.items=[],l.data&&(this.items=l.data.foods),this.loading=!1},async remove(t){this.loading=!0,(await u.delete(t)).data&&this.getDatas(),this.loading=!1,B.fire({icon:"success",title:"\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})},edit(t){this.modalData=t,this.mode="edit",this.openModal=!0},reset(){this.search.recipe=null,this.search.corral="",this.getDatas()}}};function oe(t,l,V,x,e,s){const f=a("SectionTitleBarSub"),r=a("Modal"),d=a("Criteria"),p=a("Table"),_=a("SectionMain"),h=a("LayoutAuthenticated");return v(),y(h,null,{default:n(()=>[o(_,null,{default:n(()=>[o(f,{icon:"foodDrumstickOutline",title:"\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E49\u0E2D\u0E32\u0E2B\u0E32\u0E23","has-btn-add":"",onOpenModal:l[0]||(l[0]=i=>{e.mode="create",e.openModal=!0}),btnText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E49\u0E2D\u0E32\u0E2B\u0E32\u0E23"}),o(r,{modelValue:e.openModal,"onUpdate:modelValue":l[1]||(l[1]=i=>e.openModal=i),data:e.modalData,mode:e.mode,onConfirm:s.getDatas},null,8,["modelValue","data","mode","onConfirm"]),o(d,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getDatas,onReset:s.reset,forms:e.forms,search:e.search},null,8,["onSearch","onReset","forms","search"]),o(p,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E49\u0E2D\u0E32\u0E2B\u0E32\u0E23","has-checkbox":"","checked-data":e.checked,items:e.items,datas:e.datas,buttons:e.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:t.removeSelected,loading:e.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var ue=S(te,[["render",oe]]);export{ue as default};
