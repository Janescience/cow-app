import{_ as I}from"./LayoutAuthenticated-c63231e3.js";import{c as H,b as R,d as Y,_ as G,a as J}from"./BaseDivider-e6f522d1.js";import{v as K,h as Q,_ as W,c as m,w as g,z as o,o as n,d as i,s as f,F as M,D as L,j as l,t as u,f as X,n as p,g as y}from"./index-833fccd7.js";import{_ as Z}from"./UserAvatar-e8a89c62.js";import{_ as $}from"./FormField-e4067010.js";import{_ as ee}from"./FormControl-c6bef721.js";import{T as te}from"./Table-7335323f.js";import{C as se}from"./Criteria-aeebf4c3.js";import{_ as ae}from"./SectionTitleBarSub-10fabe8f.js";import{C as re}from"./Modal-b50afa58.js";import{C as T}from"./cow-2cb1e0fe.js";import{g as le}from"./age-calculate-3b5fe841.js";import{s as F,a as oe}from"./cow-17efafc3.js";import"./CardBoxModal-2c7e77f6.js";import"./CardBoxCollapse-3e6546ff.js";import"./FormCheckRadioPicker-ea4a7d63.js";import"./Cow-2e6f527c.js";import"./Recipe-ed7ed823.js";import"./Vaccine-fe177487.js";import"./Corral-a83ab125.js";import"./NotificationBar-a8fe964b.js";import"./ImageUpload-f0143515.js";import"./alert-c25fb8f9.js";const ne={data(){return{perPage:18,currentPage:0,modalCow:!1,cowStatus:F(),items:[],forms:[{label:"โค",value:"code",type:"ddl",module:"cow",valueType:"code"},{label:"เพศ",value:"sex",options:oe()},{label:"สถานะ",value:"status",options:F()},{label:"คอก",value:"corral",type:"ddl",module:"corral",valueType:"id"}],search:{code:null,status:"",quality:"",corral:null,sex:"",flag:"Y"},mode:"create",loading:!1}},computed:{itemsPaginated(){return this.items?this.items.slice(this.perPage*this.currentPage,this.perPage*(this.currentPage+1)):[]},numPages(){return Math.ceil((this.items?this.items.length:0)/this.perPage)},currentPageHuman(){return this.currentPage+1},pagesList(){const e=[];for(let s=0;s<this.numPages;s++)e.push(s);return e},user(){return this.$store.state.auth.user}},components:{SectionMain:H,LayoutAuthenticated:I,BaseButton:R,BaseIcon:Y,BaseButtons:Q,CardBox:G,FormControl:ee,FormField:$,BaseDivider:J,CreateCowModal:re,Table:te,SectionTitleBarSub:ae,Criteria:se,UserAvatar:Z,BaseLevel:W},created(){this.getCows()},methods:{async getCows(){this.loading=!0;const e=await T.all(this.search);this.items=[],e.data&&(this.items=e.data.cows,this.loading=!1)},async removeCow(e){this.loading=!0,(await T.update(e,{flag:"N"})).data&&this.getCows(),this.loading=!1},detail(e){this.$router.push({name:"cowDetail",params:{id:e._id}})},reset(){this.search.code=null,this.search.status="",this.search.quality="",this.search.sex="",this.search.corral=""},filter(e){const s={},d={},c={},a={};return e.sex=="F"?(a.icon="genderFemale",a.style="text-rose-500 bg-red-300 rounded-full  p-1 mr-1"):e.sex=="M"&&(a.icon="genderMale",a.style="text-blue-500 bg-indigo-300 rounded-full p-1 mr-1"),e.status==1?(s.icon="humanPregnant",s.style="text-blue-500 bg-indigo-900 rounded-full  p-1 mr-1"):e.status==2?(s.icon="waterOff",s.style="text-rose-500 bg-red-900 rounded-full p-1 mr-1"):e.status==3?(s.icon="water",s.style="text-white bg-teal-700 rounded-full p-1 mr-1"):e.status==4&&(s.icon="babyFaceOutline",s.style="text-yellow-400 bg-amber-900 rounded-full mr-1"),s.desc=this.cowStatus[e.status].label,e.grade==="A+"?d.style="text-lime-500":e.grade==="A"?d.style="text-green-500":e.grade==="B"?d.style="text-white":e.grade==="C"?d.style="text-orange-500":e.grade==="D"&&(d.style="text-red-500"),e.quality==1?(c.icon="medalOutline",c.style="text-green-600  bg-gray-800 rounded-full"):e.quality==3?(c.icon="medalOutline",c.style="text-red-600 bg-gray-800 rounded-full"):e.quality==2&&(c.icon="medalOutline",c.style="text-gray-400 bg-gray-800 rounded-full"),{status:s,grade:d,quality:c,sex:a}},calAge(e){return le(e).ageString}}},ie={key:0,class:"grid lg:gap-3 md:gap-2 gap-1 grid-cols-3 lg:grid-cols-6 md:grid-cols-4"},ce={class:"flex justify-between md:text-sm text-xs p-2"},de={class:""},ue=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),ge={class:"text-center mt-2"},me=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),fe={class:"lg:text-lg text-xs flex justify-center"},he={class:"dark:text-gray-400 text-gray-500 mr-1"},_e=l("hr",{class:"border-1 dark:border-gray-800 border-gray-300"},null,-1),pe={class:"justify-center flex lg:p-2 p-1"},ye={key:1,class:"text-center py-10 text-gray-500 dark:text-gray-400"},xe=l("p",null," กำลังโหลดข้อมูล...",-1),be={class:"p-3 mt-2 border-t border-gray-100 dark:border-gray-800 dark:bg-gray-900 lg:rounded-lg shadow-lg"};function we(e,s,d,c,a,r){const V=o("SectionTitleBarSub"),j=o("CreateCowModal"),q=o("Criteria"),D=o("UserAvatar"),x=o("BaseLevel"),_=o("BaseIcon"),O=o("CardBox"),N=o("BaseButton"),E=o("BaseButtons"),U=o("SectionMain"),z=o("LayoutAuthenticated");return n(),m(z,null,{default:g(()=>[i(U,null,{default:g(()=>[i(V,{icon:"cow",title:"โค",btnText:"เพิ่มโค","has-btn-add":"",onOpenModal:s[0]||(s[0]=t=>{a.mode="create",a.modalCow=!0})}),i(j,{modelValue:a.modalCow,"onUpdate:modelValue":s[1]||(s[1]=t=>a.modalCow=t),onConfirm:r.getCows,mode:a.mode,dataEdit:e.dataEdit},null,8,["modelValue","onConfirm","mode","dataEdit"]),i(q,{grid:"grid-cols-2 md:grid-cols-3 lg:grid-cols-5",onSearch:r.getCows,onReset:r.reset,forms:a.forms,search:a.search},null,8,["onSearch","onReset","forms","search"]),a.loading?(n(),f("div",ye,[i(_,{path:"dotsCircle",size:"22",class:"animate-spin"}),xe])):(n(),f("div",ie,[(n(!0),f(M,null,L(r.itemsPaginated,t=>(n(),m(O,{key:t.name,onClick:h=>r.detail(t),class:"bg-gray-100","has-table":"",hoverable:""},{default:g(()=>{var h,b,w,C,v,B,k,P,S,A;return[l("div",ce,[l("div",null,"คอก "+u(t.corral||"-"),1),l("p",de,u(r.calAge(t.birthDate)),1)]),ue,i(x,{type:"justify-center"},{default:g(()=>[i(D,{username:"profile-card",class:"lg:w-20 lg:h-20 w-16 h-16 mt-2",avatar:t.image},null,8,["avatar"])]),_:2},1024),l("div",ge,[me,l("h4",fe,[l("p",he,u(t.code),1),X(" - "+u(t.name),1)]),_e,l("div",pe,[t.sex?(n(),m(_,{key:0,class:p((b=(h=r.filter(t))==null?void 0:h.sex)==null?void 0:b.style),path:(C=(w=r.filter(t))==null?void 0:w.sex)==null?void 0:C.icon,w:"w-4 lg:w-6",h:"h-4 lg:h-6"},null,8,["class","path"])):y("",!0),t.grade?(n(),f("p",{key:1,class:p(((B=(v=r.filter(t))==null?void 0:v.grade)==null?void 0:B.style)+" flex items-center justify-center font-extrabold  lg:text-base text-sm text-center bg-gray-800 rounded-full lg:h-6 lg:w-6 w-4 h-4 shadow-xl mr-1")},[l("div",null,u(t.grade),1)],2)):y("",!0),t.status?(n(),m(_,{key:2,class:p((P=(k=r.filter(t))==null?void 0:k.status)==null?void 0:P.style),path:(A=(S=r.filter(t))==null?void 0:S.status)==null?void 0:A.icon,w:"w-4 lg:w-6",h:"h-4 lg:h-6"},null,8,["class","path"])):y("",!0)])])]}),_:2},1032,["onClick"]))),128))])),l("div",be,[i(x,null,{default:g(()=>[i(E,null,{default:g(()=>[(n(!0),f(M,null,L(r.pagesList,t=>(n(),m(N,{key:t,active:t===a.currentPage,label:t+1,teeny:"",onClick:h=>a.currentPage=t},null,8,["active","label","onClick"]))),128))]),_:1}),l("small",null,"หน้า "+u(r.currentPageHuman)+" จาก "+u(r.numPages),1)]),_:1})])]),_:1})]),_:1})}const Ye=K(ne,[["render",we]]);export{Ye as default};
