import{c as h}from"./BaseDivider-61ee89c2.js";import{_ as g}from"./LayoutAuthenticated-1901d823.js";import{_ as b}from"./SectionTitleBarSub-8c22e3c4.js";import{T as _}from"./Table-9dcddb90.js";import{C as S}from"./Criteria-35c42e3f.js";import{N as y}from"./notification-048cbcbc.js";import{E as x,v as T,x as v,c as L,w as n,z as s,o as A,d as i}from"./index-d112b817.js";import{T as r}from"./alert-32d4a5a7.js";import"./UserAvatar-3f93aca2.js";import"./CardBoxModal-037276b0.js";import"./FormControl-ea42ddb9.js";import"./CardBoxCollapse-451f0abb.js";import"./FormField-1c9cc7b4.js";import"./FormCheckRadioPicker-49cc75de.js";import"./Cow-ed7bc072.js";import"./cow-9a42aa2f.js";import"./Recipe-d0be585f.js";import"./Vaccine-e5427c6f.js";import"./Corral-3dbf33df.js";const B="/line";class C{notify(e){return x.post(B+"/notify",e)}}const D=new C,l=t=>t=="ddl"?[{id:"",label:"ทั้งหมด"},{id:"S",label:"สำเร็จ"},{id:"F",label:"ไม่สำเร็จ"}]:{S:"สำเร็จ",F:"ไม่สำเร็จ"},c=t=>t=="ddl"?[{id:"",label:"ทั้งหมด"},{id:"B",label:"ระบบ(ตามเงื่อนไข)"},{id:"T",label:"ทดสอบจากผู้ใช้"},{id:"S",label:"ระบบ(อัตโนมัติ)"}]:{B:"ระบบ(ตามเงื่อนไข)",T:"ทดสอบจากผู้ใช้",S:"ระบบ(อัตโนมัติ)"},M={data(){return{items:[],forms:[{label:"วันที่",value:"createdAt",icon:"calendar",type:"date"},{label:"ประเภท",value:"type",options:c("ddl")},{label:"สถานะ",value:"status",options:l("ddl")},{label:"ข้อความ",value:"message"}],search:{createdAt:null,type:"",status:""},loading:!1,datas:[{label:"วันที่",class:"text-center",func:t=>v(t.createdAt).format("DD/MM/YYYY HH:mm:ss")},{label:"ประเภท",class:"text-center",func:t=>c()[t.type]},{label:"ข้อความ",value:"message"},{label:"สถานะ",class:"text-center",func:t=>l()[t.status]}]}},components:{SectionMain:h,LayoutAuthenticated:g,SectionTitleBarSub:b,Table:_,Criteria:S},computed:{user(){return this.$store.state.auth.user}},created(){this.getDatas()},methods:{async getDatas(){this.loading=!0;const t=await y.getLogs(this.search);this.items=[],t.data&&(this.items=t.data.notifications),this.loading=!1},async notify(t){this.loading=!0;try{(await D.notify({message:t,lineToken:this.user.farm.lineToken})).data&&(this.loading=!1,r.fire({icon:"success",title:"แจ้งเตือนสำเร็จ"}),this.getDatas())}catch{this.loading=!1,r.fire({icon:"error",title:"แจ้งเตือนไม่สำเร็จ"})}},reset(){this.search.createdAt=null,this.search.type="",this.search.status="",this.getDatas()}}};function k(t,e,w,Y,a,o){const m=s("SectionTitleBarSub"),d=s("Criteria"),u=s("Table"),p=s("SectionMain"),f=s("LayoutAuthenticated");return A(),L(f,null,{default:n(()=>[i(p,null,{default:n(()=>[i(m,{icon:"bellCogOutline",title:"ประวัติการแจ้งเตือน","has-btn-add":"","btn-text":"ทดสอบแจ้งเตือน",onOpenModal:e[0]||(e[0]=N=>o.notify("รายการเงินเข้า เข้าบัญชี xxx-x-x1574-x วันที่ 25 ส.ค. 67 เวลา 09:15  น. จำนวนเงิน 4.00  บาท ยอดเงินคงเหลือ 348.62  บาท"))}),i(d,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:o.getDatas,onReset:o.reset,forms:a.forms,search:a.search,btnLoading:a.loading},null,8,["onSearch","onReset","forms","search","btnLoading"]),i(u,{title:"รายการแจ้งเตือน",items:a.items,datas:a.datas,loading:a.loading},null,8,["items","datas","loading"])]),_:1})]),_:1})}const Z=T(M,[["render",k]]);export{Z as default};
