import{c as J,_ as K,d as X,a as Z}from"./BaseDivider-98f6dc1f.js";import{a as L,C as M,l as E,m as B,p as Q,q as F,o as u,s as m,v as $,x as O,y as S,z as y,c as tt,w as p,d as i,j as e,g as j,t as d,f as w}from"./index-5a45805c.js";import{_ as et}from"./DoughnutChart-f187d8e8.js";import{_ as st}from"./SectionTitleBar-3986fd00.js";import{_ as at}from"./SectionTitleBarSub-4df96ee6.js";import{_ as lt}from"./LayoutAuthenticated-df187f74.js";import{T as it}from"./Table-a0d4a443.js";import{_ as ot}from"./FormControl-5466ebf9.js";import{_ as rt}from"./FormField-7c373276.js";import{D}from"./dashboard-ab996b00.js";import{y as nt,m as H}from"./date-1696e46e.js";import"./UserAvatar-4bc740bd.js";import"./CardBoxModal-aee8f745.js";const ct={__name:"BarChart",props:{data:{type:Object,required:!0}},setup(t){const s=t,l=L(null);let o;M.register(...E),B(()=>{o=new M(l.value,{type:"bar",data:s.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}})});const a=Q(()=>s.data);return F(a,n=>{o&&(o.data=n,o.update())}),(n,c)=>(u(),m("canvas",{ref_key:"root",ref:l},null,512))}},ht={__name:"LineChart",props:{data:{type:Object,required:!0}},setup(t){const s=t,l=L(null);let o;M.register(...E),B(()=>{o=new M(l.value,{type:"line",data:s.data,options:{responsive:!0,plugins:{title:{display:!0}},scales:{x:{display:!0,title:{display:!0}},y:{display:!0,suggestedMin:0,suggestedMax:200}}}})});const a=Q(()=>s.data);return F(a,n=>{o&&(o.data=n,o.update())}),(n,c)=>(u(),m("canvas",{ref_key:"root",ref:l},null,512))}},dt={__name:"PieChart",props:{data:{type:Object,required:!0}},setup(t){const s=t,l=L(null);let o;M.register(...E),B(()=>{o=new M(l.value,{type:"pie",data:s.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",display:!0}}}})});const a=Q(()=>s.data);return F(a,n=>{o&&(o.data=n,o.update())}),(n,c)=>(u(),m("canvas",{ref_key:"root",ref:l},null,512))}},ut={data(){return{milkLastQtyChart:null,milkLastAmtChart:null,foodMonthChart:null,milkAllQtyChart:null,milkAllAmtChart:null,businessAllChart:null,doughnutCostChartData:null,doughnutBillChartData:null,doughnutCareChartData:null,doughnutIncomeChartData:null,lineChartColors:{primary:"#00D1B2",danger:"#FF3860"},milkLasts:[],milkAlls:[],statistics:{},corrals:[],food:{},foodYear:new Date().getFullYear(),milkYear:new Date().getFullYear(),businessYear:new Date().getFullYear(),milkYearSearch:!1,foodYearSearch:!1,businessYearSearch:!1,milkLast:{},milkAll:{},cow:{},corralColumns:[{label:"คอก",value:"corral",class:"text-center"},{label:"จำนวนโค",value:"numCows",class:"text-center"}],foodColumns:[{label:"คอก",value:"corral",class:"text-center"},{label:"จำนวนโค",value:"numCow",class:"text-center"},{label:"จำนวนเฉลี่ย/เดือน (กก.)",value:"avgQty",class:"text-center",type:"number"},{label:"ค่าใช้จ่ายเฉลี่ย/เดือน (บาท)",value:"avgAmount",class:"text-right",type:"currency"},{label:"จำนวนเดือน",value:"count"}],years:nt("search"),expense:{},expenseSum:{},income:{},incomeSum:{},loading:{milks:!0,expense:!0,income:!0,corral:!0,statistic:!0,food:!0}}},components:{DoughnutChart:et,LineChart:ht,BarChart:ct,SectionMain:J,SectionTitleBar:st,CardBox:K,SectionTitleBarSub:at,LayoutAuthenticated:lt,BaseIcon:X,BaseDivider:Z,Table:it,FormControl:ot,FormField:rt,PieChart:dt},watch:{foodYear(t){t&&this.getFood(t)},milkYear(t){t&&this.getMilks(t)},businessYear(t){t?(this.incomeSum={},this.expenseSum={},this.getExpense(t),this.getIncome(t)):(this.getExpenseAll(),this.getIncomeAll())}},computed:{user(){return this.$store.state.auth.user}},created(){this.getFood(),this.getIncome(),this.getMilks(),this.getExpense(),this.getCorrals(),this.getStatistics()},methods:{async getMilks(t){this.loading.milks=!0;const s=await D.getMilks(t||this.milkYear);if(s){const l=s.data.last;this.milkLast.sumQty=0,this.milkLast.sumAmt=0;for(let c of l){c.month=O(c.date,"DD-MM-YYYY").format("M");let C=c.milkDetails.reduce((b,k)=>b+k.qty,0),A=c.milkDetails.reduce((b,k)=>b+k.amount,0);this.milkLast.sumQty+=C,this.milkLast.sumAmt+=A}const o=S.groupBy(l,"date");this.milkLast.avgQty=this.milkLast.sumQty>0?this.milkLast.sumQty/Object.keys(o).length:0,this.milkLast.avgAmt=this.milkLast.sumAmt>0?this.milkLast.sumAmt/Object.keys(o).length:0,this.milkLast.count=Object.keys(o).length,this.milkLasts=S.groupBy(l,"month");for(let c of Object.keys(this.milkLasts))this.milkLasts[c][0].date=O(this.milkLasts[c][0].date,"DD-MM-YYYY").format("MMM"),this.milkLasts[this.milkLasts[c][0].date]=this.milkLasts[c],delete this.milkLasts[c];const a=s.data.all;this.milkAll.sumQty=0,this.milkAll.sumAmt=0;for(let c of a){c.year=O(c.date,"YYYY-MM-DD").format("YYYY"),c.month=O(c.date,"YYYY-MM-DD").format("M");let C=c.milkDetails.reduce((b,k)=>b+k.qty,0),A=c.milkDetails.reduce((b,k)=>b+k.amount,0);this.milkAll.sumQty+=C,this.milkAll.sumAmt+=A}const n=S.groupBy(a,"month");this.milkAlls=S.groupBy(a,"year"),this.milkAll.count=Object.keys(this.milkAlls).length,this.milkAll.avgQty=this.milkAll.sumQty>0?this.milkAll.sumQty/Object.keys(n).length:0,this.milkAll.avgAmt=this.milkAll.sumAmt>0?this.milkAll.sumAmt/this.milkAll.count:0}this.milkLastQtyChart=this.createMilkLastChart("qty"),this.milkLastAmtChart=this.createMilkLastChart("amt"),this.milkAllQtyChart=this.createMilkAllChart("qty"),this.milkAllAmtChart=this.createMilkAllChart("amt"),this.loading.milks=!1},async getFood(t){this.loading.food=!0;const s=await D.getFood(t||this.foodYear);s.data&&(this.food=s.data,this.foodMonthChart=this.createFoodMonthChart()),this.loading.food=!1},async getExpense(t){this.loading.expense=!0;const s=await D.getExpense(t||this.businessYear);s&&(this.expense=s.data),this.loading.expense=!1,this.doughnutCostChartData=this.createDoughnutChart("cost"),this.doughnutBillChartData=this.createDoughnutChart("bill"),this.doughnutCareChartData=this.createDoughnutChart("care")},async getExpenseAll(){this.loading.expense=!0;const t=await D.getExpenseAll();t&&(this.expense=t.data.expenseDetail,this.expenseSum=t.data.expenseSum),this.loading.expense=!1,this.doughnutCostChartData=this.createDoughnutChart("cost"),this.doughnutBillChartData=this.createDoughnutChart("bill"),this.doughnutCareChartData=this.createDoughnutChart("care")},async getIncome(t){this.loading.income=!0;const s=await D.getIncome(t||this.businessYear);s&&(this.income=s.data),this.loading.income=!1,this.doughnutIncomeChartData=this.createDoughnutChart("income")},async getIncomeAll(){this.loading.income=!0;const t=await D.getIncomeAll();t&&(this.income=t.data.incomeDetail,this.incomeSum=t.data.incomeSum),this.loading.income=!1,this.businessAllChart=this.createBusinessAllChart(),this.doughnutIncomeChartData=this.createDoughnutChart("income")},async getCorrals(){this.loading.corral=!0;const t=await D.getCorrals();t&&(this.corrals=t.data),this.loading.corral=!1},async getStatistics(){this.loading.statistic=!0;const t=await D.getStatistics();t&&(this.statistics=t.data),this.loading.statistic=!1},milkLastChartAnlyz(t){const s=[];return t=="qty"?Object.keys(this.milkLasts).forEach(l=>{let o=this.milkLasts[l],a=0;o.map(n=>{n.milkDetails.map(c=>{a+=c.qty})}),s.push(a)}):Object.keys(this.milkLasts).forEach(l=>{let o=this.milkLasts[l],a=0;o.map(n=>{n.milkDetails.map(c=>{a+=c.amount})}),s.push(a)}),s},milkAllChartAnlyz(t){const s=[];return t==="qty"?Object.keys(this.milkAlls).forEach(l=>{let o=this.milkAlls[l],a=0;o.map(n=>{n.milkDetails.map(c=>{a+=c.qty})}),s.push(a)}):Object.keys(this.milkAlls).forEach(l=>{let o=this.milkAlls[l],a=0;o.map(n=>{n.milkDetails.map(c=>{a+=c.amount})}),s.push(a)}),s},foodMonthChartAnlyz(t){const s=[],l=[];return this.food.month.map(a=>{s.push(a.sumAmount),l.push(a.sumQty)}),{amount:s,qty:l}},foodMonthAmountChartObj(t,s){return{label:"ค่าอาหาร",borderColor:"#566573",borderWidth:2,borderRadius:5,borderSkipped:!0,backgroundColor:"#5D6D7E",data:this.foodMonthChartAnlyz().amount,tension:.5}},foodMonthQtyChartObj(t,s){return{label:"จำนวน (กก.)",borderColor:"#E83105",borderWidth:2,borderRadius:5,borderSkipped:!0,backgroundColor:"#F6461C",data:this.foodMonthChartAnlyz().qty,tension:.5}},milkLastChartObj(t,s){return{label:s=="qty"?"น้ำนมดิบ":"รายได้",borderColor:s=="qty"?"#e11d48":"#16a34a",borderWidth:2,borderRadius:5,borderSkipped:!0,barPercentage:.5,backgroundColor:s=="qty"?"#db2777":"#65a30d",data:this.milkLastChartAnlyz(s),tension:.5}},milkAllChartObj(t,s){return{label:s=="qty"?"น้ำนมดิบ":"รายได้",fill:!1,borderColor:s=="qty"?"#e11d48":"#16a34a",backgroundColor:s=="qty"?"#db2777":"#65a30d",borderWidth:3,data:this.milkAllChartAnlyz(s),tension:.4,cubicInterpolationMode:"monotone"}},createBusinessAllChart(){const t=[];let s=new Set([...Object.keys(this.expenseSum.bill),...Object.keys(this.expenseSum.care),...Object.keys(this.expenseSum.cost),...Object.keys(this.incomeSum.rawMilk)]);return s=Array.from(s),Object.keys(this.incomeSum).forEach(l=>{let o=this.incomeSum[l];s.forEach(a=>{o.hasOwnProperty(a)||(o[a]=0)})}),Object.keys(this.expenseSum).forEach(l=>{let o=this.expenseSum[l];s.forEach(a=>{o.hasOwnProperty(a)||(o[a]=0)})}),Object.keys(this.expenseSum.bill).forEach(l=>{t.push(`${l}`)}),{labels:t,datasets:[this.businessAllChartObj("rawMilk"),this.businessAllChartObj("cost"),this.businessAllChartObj("bill"),this.businessAllChartObj("care")]}},businessAllChartObj(t){return{label:t=="cost"?"ต้นทุน":t=="bill"?"ค่าใช้จ่ายเพิ่มเติม":t=="care"?"ค่าดูแลโค":"ผลผลิต",data:this.businessAllChartData(t),borderWidth:2,weight:2,backgroundColor:t=="cost"?"#d1d5db":t=="bill"?"#fca5a5":t=="care"?"#fcd34d":"#bbf7d0",hoverOffset:4}},businessAllChartData(t){const s=[];return t=="cost"?Object.keys(this.expenseSum.cost).forEach(l=>{s.push(this.expenseSum.cost[l])}):t=="bill"?Object.keys(this.expenseSum.bill).forEach(l=>{s.push(this.expenseSum.bill[l])}):t=="care"?Object.keys(this.expenseSum.care).forEach(l=>{s.push(this.expenseSum.care[l])}):t=="rawMilk"&&Object.keys(this.incomeSum.rawMilk).forEach(l=>{s.push(this.incomeSum.rawMilk[l])}),s},createFoodMonthChart(){const t=[];return H().forEach(s=>{t.push(`${s}`)}),{labels:t,datasets:[this.foodMonthAmountChartObj(),this.foodMonthQtyChartObj()]}},createMilkLastChart(t){const s=[];return Object.keys(this.milkLasts),H().forEach(l=>{s.push(`${l}`)}),{labels:s,datasets:[this.milkLastChartObj("primary",t)]}},createMilkAllChart(t){const s=[];return Object.keys(this.milkAlls).forEach(l=>{s.push(`${l}`)}),{labels:s,datasets:[this.milkAllChartObj("danger",t)]}},getDoughnutChartData(t){const s=[];return t=="cost"?Object.keys(this.expense.cost).forEach(l=>{s.push(this.expense.cost[l])}):t=="bill"?Object.keys(this.expense.bill).forEach(l=>{s.push(this.expense.bill[l])}):t=="care"?Object.keys(this.expense.care).forEach(l=>{s.push(this.expense.care[l])}):t=="income"&&Object.keys(this.income).forEach(l=>{s.push(this.income[l])}),s},getDoughnutChartObject(t){return{data:this.getDoughnutChartData(t),borderWidth:2,weight:2,backgroundColor:["#d1d5db","#fca5a5","#fcd34d","#bbf7d0","#a5f3fc","#c7d2fe","#fbcfe8"],hoverOffset:4}},createDoughnutChart(t){const s=[];return t=="cost"?Object.keys(this.expense.cost).forEach(l=>{s.push(`${this.mapText(t)[l]}`)}):t=="bill"?Object.keys(this.expense.bill).forEach(l=>{s.push(`${this.mapText(t)[l]}`)}):t=="care"?Object.keys(this.expense.care).forEach(l=>{s.push(`${this.mapText(t)[l]}`)}):t=="income"&&Object.keys(this.income).forEach(l=>{s.push(`${this.mapText(t)[l]}`)}),{labels:s,datasets:[this.getDoughnutChartObject(t)]}},mapText(t){if(t=="cost")return{building:"สิ่งปลูกสร้าง",equipment:"อุปกรณ์",cow:"ค่านำเข้าโค",maintenance:"ซ่อมบำรุง"};if(t=="bill")return{water:"ค่าน้ำ",electric:"ค่าไฟ",accom:"ค่าที่พักคนงาน",rent:"ค่าเช่า",internet:"ค่าอินเทอร์เน็ต",waste:"ค่าของเสีย",oth:"อื่นๆ"};if(t=="care")return{food:"ค่าอาหาร",heal:"ค่ารักษา",protection:"ค่าวัคซีน",worker:"ค่าจ้างคนงาน"};if(t=="income")return{rawMilk:"น้ำนมดิบ",cowExport:"จำหน่ายโค",pasteuri:"นมพาสเจอไรซ์",dung:"มูลสัตว์",meat:"จำหน่ายเนื้อโค"}},sumExpense(){var c,C,A,b,k,g,Y;let t=0,s=0,l=0,o=0;if((c=this.expense)!=null&&c.care)for(let v of Object.keys((C=this.expense)==null?void 0:C.care)){const _=this.expense.care[v];_&&(s+=_)}if((A=this.expense)!=null&&A.cost)for(let v of Object.keys((b=this.expense)==null?void 0:b.cost)){const _=this.expense.cost[v];_&&(t+=_)}if((k=this.expense)!=null&&k.bill)for(let v of Object.keys((g=this.expense)==null?void 0:g.bill)){const _=this.expense.bill[v];_&&(l+=_)}let a=s+t+l,n=this.income.rawMilk-a;return n>=0?o=n/((Y=this.income)==null?void 0:Y.rawMilk)*100:o=n/a*100,{sumExpense:a,sumCare:s,sumCost:t,sumBill:l,profit:n,percent:o}},formatDate(t){return t?O(new Date(t)).format("DD/MM/YYYY"):""}}},mt={class:"grid grid-cols-1 gap-5"},pt={key:0,class:"lg:col-span-2 grid lg:grid-cols-6 grid-cols-3 mb-5"},gt={key:1,class:"h-52 mt-5"},_t={key:2,class:"text-gray-500"},ft={class:"grid grid-cols-1 gap-5"},kt={class:"grid lg:grid-cols-2 grid-cols-1 gap-5"},bt={key:0,class:"lg:col-span-2 grid lg:grid-cols-6 grid-cols-3"},xt={class:"overflow-x-auto"},yt=e("thead",null,[e("tr",null,[e("th",{class:"whitespace-nowrap text-center"},"รีดนมแล้ว (วัน)"),e("th",{class:"whitespace-nowrap text-center"},"ทั้งหมด (กก.)"),e("th",{class:"whitespace-nowrap text-center"},"เฉลี่ย/วัน (กก.)")])],-1),Ct={class:"font-extrabold text-2xl"},At={class:"text-center"},vt={class:"text-center"},wt={class:"text-center"},Dt={key:0,class:"mt-3 h-60 mb-5"},Mt={key:1,class:"text-gray-500"},Yt={class:"overflow-x-auto"},Ot=e("thead",null,[e("tr",null,[e("th",{class:"whitespace-nowrap text-center"},"รายได้ทั้งหมด (บาท)"),e("th",{class:"whitespace-nowrap text-center"},"รายได้เฉลี่ย/วัน (บาท)")])],-1),St={class:"font-extrabold text-2xl"},jt={class:"text-center"},Lt={class:"text-center"},Et={key:0,class:"mt-3 h-60"},Bt={key:1,class:"text-gray-500"},Qt={class:"grid lg:grid-cols-2 grid-cols-1 gap-5"},Ft={class:"overflow-x-auto"},qt=e("thead",null,[e("tr",null,[e("th",{class:"whitespace-nowrap text-center"},"รีดนมแล้ว (ปี)"),e("th",{class:"whitespace-nowrap text-center"},"ทั้งหมด (กก.)"),e("th",{class:"whitespace-nowrap text-center"},"เฉลี่ย/เดือน (กก.)")])],-1),It={class:"font-extrabold text-2xl"},zt={class:"text-center"},Tt={class:"text-center"},Vt={class:"text-center"},Pt={key:0,class:"lg:h-62"},Rt={key:1,class:"text-gray-500"},Wt={class:"overflow-x-auto"},Nt=e("thead",null,[e("tr",null,[e("th",{class:"whitespace-nowrap text-center"},"รายได้ทั้งหมด (บาท)"),e("th",{class:"whitespace-nowrap text-center"},"รายได้เฉลี่ย/ปี (บาท)")])],-1),Ht={class:"font-extrabold text-2xl"},Ut={class:"text-center"},Gt={class:"text-center"},Jt={key:0,class:"lg:h-62"},Kt={key:1,class:"text-gray-500"},Xt={key:0,class:"lg:col-span-2 grid lg:grid-cols-6 grid-cols-3 mb-5"},Zt={key:1,class:"h-80 mt-5 col-span-2"},$t={key:2,class:"text-gray-500"},te={class:"grid lg:grid-cols-2 grid-cols-1 gap-5"},ee={class:"grid lg:grid-cols-3 grid-cols-1 gap-5 text-center"},se=e("p",null,"ต้นทุน",-1),ae={class:"text-red-500 underline decoration-2 font-extrabold"},le={key:0,class:"h-80"},ie={key:1,class:"text-gray-500"},oe=e("p",null,"ค่าดูแลโค",-1),re={class:"text-red-500 underline decoration-2 font-extrabold"},ne={key:0,class:"h-80"},ce={key:1,class:"text-gray-500"},he=e("p",null,"ค่าใช้จ่ายเพิ่มเติม",-1),de={class:"text-red-500 underline decoration-2 font-extrabold"},ue={key:0,class:"h-80"},me={key:1,class:"text-gray-500"},pe={class:"grid grid-cols-1 gap-5 text-center"},ge=e("p",null,"ผลผลิต",-1),_e={class:"text-lime-500 underline decoration-2 font-extrabold"},fe={key:0,class:"h-80"},ke={key:1,class:"text-gray-500"},be={class:"grid grid-cols-1 gap-5 text-center"},xe=e("div",{class:"dark:text-gray-300"}," รายรับ ",-1),ye={class:"font-extrabold text-2xl"},Ce=e("div",{class:"dark:text-gray-300"}," รายจ่าย ",-1),Ae={class:"font-extrabold text-2xl"},ve={class:"dark:text-gray-300"},we={class:"font-extrabold text-2xl"},De={class:"font-extrabold text-2xl"},Me={class:"grid lg:grid-cols-4 grid-cols-1 gap-5"},Ye={class:"grid grid-cols-2 gap-5"},Oe={class:"mt-1"},Se={class:"lg:text-xl text-lg text-yellow-600 text-center"},je={key:0,class:"grid grid-cols-2 gap-5 mt-5"},Le={class:"mt-1"},Ee=e("div",{class:"text-xs text-gray-500"},"(รักษามากที่สุด)",-1),Be={class:"lg:text-xl text-lg text-yellow-600 text-center"},Qe={class:"grid grid-cols-2 gap-5"},Fe={class:"mt-1"},qe={class:"lg:text-xl text-lg text-yellow-600 text-center"},Ie={class:"mt-1"},ze={class:"lg:text-xl text-lg text-yellow-600 text-center"},Te={class:"grid grid-cols-2 gap-5"},Ve={class:"mt-1"},Pe={class:"lg:text-xl text-lg text-yellow-600 text-center"},Re={class:"mt-1"},We=e("div",{class:"text-xs text-gray-500"},"(มากกว่า 8 เดือน)",-1),Ne={class:"lg:text-xl text-lg text-yellow-600 text-center"},He={class:"grid grid-cols-2 gap-5"},Ue={class:"mt-1"},Ge={class:"lg:text-xl text-lg text-yellow-600 text-center"},Je={class:"mt-1"},Ke={class:"lg:text-xl text-lg text-yellow-600 text-center"};function Xe(t,s,l,o,a,n){const c=y("SectionTitleBarSub"),C=y("FormControl"),A=y("FormField"),b=y("Table"),k=y("bar-chart"),g=y("CardBox"),Y=y("line-chart"),v=y("pie-chart"),_=y("BaseIcon"),U=y("SectionMain"),G=y("LayoutAuthenticated");return u(),tt(G,null,{default:p(()=>[i(U,null,{default:p(()=>[i(c,{icon:"chartPie",title:"ภาพรวมฟาร์ม"}),e("div",mt,[i(g,{title:"การให้อาหาร (ปี พ.ศ. "+(a.foodYear+543)+")",icon:"corn",onHeaderIconClick:s[1]||(s[1]=()=>{this.foodYearSearch=!this.foodYearSearch}),"header-icon":"magnifyExpand"},{default:p(()=>{var h,r;return[a.foodYearSearch?(u(),m("div",pt,[i(A,{label:"ปี พ.ศ.",help:"เลือกปีแสดงผล"},{default:p(()=>[i(C,{modelValue:a.foodYear,"onUpdate:modelValue":s[0]||(s[0]=f=>a.foodYear=f),options:a.years},null,8,["modelValue","options"])]),_:1})])):j("",!0),i(b,{title:"คอก",icon:"barn",items:a.food.corral,datas:a.foodColumns,perPage:"5",loading:a.loading.food},null,8,["items","datas","loading"]),((r=(h=a.foodMonthChart)==null?void 0:h.datasets[0])==null?void 0:r.data.length)>0?(u(),m("div",gt,[i(k,{data:a.foodMonthChart},null,8,["data"])])):(u(),m("div",_t,"ไม่มีข้อมูล..."))]}),_:1},8,["title"]),i(g,{title:"น้ำนมดิบ",icon:"water",class:"lg:p-4 md:p-4","has-table":"","header-icon":""},{default:p(()=>[e("div",ft,[i(g,{title:"รายเดือน (ปี พ.ศ. "+(a.milkYear+543)+")",icon:"chartBellCurveCumulative",class:"",loading:a.loading.milks,onHeaderIconClick:s[3]||(s[3]=()=>{this.milkYearSearch=!this.milkYearSearch}),"header-icon":"magnifyExpand"},{default:p(()=>[e("div",kt,[a.milkYearSearch?(u(),m("div",bt,[i(A,{label:"ปี พ.ศ.",help:"เลือกปีแสดงผล"},{default:p(()=>[i(C,{modelValue:a.milkYear,"onUpdate:modelValue":s[2]||(s[2]=h=>a.milkYear=h),options:a.years},null,8,["modelValue","options"])]),_:1})])):j("",!0),i(g,{title:"ปริมาณ","header-icon":"","has-table":"",class:""},{default:p(()=>{var h,r;return[e("div",xt,[e("table",null,[yt,e("tbody",null,[e("tr",Ct,[e("td",At,d(a.milkLast.count),1),e("td",vt,d(t.$filters.number(a.milkLast.sumQty)),1),e("td",wt,d(t.$filters.number(a.milkLast.avgQty)),1)])])])]),((r=(h=a.milkLastQtyChart)==null?void 0:h.datasets[0])==null?void 0:r.data[0])>0?(u(),m("div",Dt,[i(k,{data:a.milkLastQtyChart},null,8,["data"])])):(u(),m("div",Mt,"ไม่มีข้อมูล..."))]}),_:1}),i(g,{title:"จำนวนเงิน","header-icon":"","has-table":"",class:""},{default:p(()=>{var h,r;return[e("div",Yt,[e("table",null,[Ot,e("tbody",null,[e("tr",St,[e("td",jt,d(t.$filters.currency(a.milkLast.sumAmt)),1),e("td",Lt,d(t.$filters.currency(a.milkLast.avgAmt)),1)])])])]),((r=(h=a.milkLastAmtChart)==null?void 0:h.datasets[0])==null?void 0:r.data[0])>0?(u(),m("div",Et,[i(k,{data:a.milkLastAmtChart},null,8,["data"])])):(u(),m("div",Bt,"ไม่มีข้อมูล..."))]}),_:1})])]),_:1},8,["title","loading"]),i(g,{title:"รายปี",icon:"chartBellCurveCumulative","header-icon":""},{default:p(()=>[e("div",Qt,[i(g,{title:"ปริมาณ","header-icon":"","has-table":"",class:""},{default:p(()=>{var h,r;return[e("div",Ft,[e("table",null,[qt,e("tbody",null,[e("tr",It,[e("td",zt,d(a.milkAll.count),1),e("td",Tt,d(t.$filters.number(a.milkAll.sumQty)),1),e("td",Vt,d(t.$filters.number(a.milkAll.avgQty)),1)])])])]),((r=(h=a.milkAllQtyChart)==null?void 0:h.datasets[0])==null?void 0:r.data[0])>0?(u(),m("div",Pt,[i(Y,{data:a.milkAllQtyChart},null,8,["data"])])):(u(),m("div",Rt,"ไม่มีข้อมูล..."))]}),_:1}),i(g,{title:"จำนวนเงิน","header-icon":"","has-table":"",class:""},{default:p(()=>{var h,r;return[e("div",Wt,[e("table",null,[Nt,e("tbody",null,[e("tr",Ht,[e("td",Ut,d(t.$filters.currency(a.milkAll.sumAmt)),1),e("td",Gt,d(t.$filters.currency(a.milkAll.avgAmt)),1)])])])]),((r=(h=a.milkAllAmtChart)==null?void 0:h.datasets[0])==null?void 0:r.data[0])>0?(u(),m("div",Jt,[i(Y,{data:a.milkAllAmtChart},null,8,["data"])])):(u(),m("div",Kt,"ไม่มีข้อมูล..."))]}),_:1})])]),_:1})])]),_:1}),i(g,{title:"ผลประกอบการ (ปี พ.ศ. "+(a.businessYear+543)+")",icon:"cashRegister","header-icon":"magnifyExpand",onHeaderIconClick:s[5]||(s[5]=()=>{this.businessYearSearch=!this.businessYearSearch})},{default:p(()=>{var h;return[a.businessYearSearch?(u(),m("div",Xt,[i(A,{label:"ปี พ.ศ.",help:"เลือกปีแสดงผล"},{default:p(()=>[i(C,{modelValue:a.businessYear,"onUpdate:modelValue":s[4]||(s[4]=r=>a.businessYear=r),options:a.years},null,8,["modelValue","options"])]),_:1})])):j("",!0),(h=this.incomeSum)!=null&&h.rawMilk?(u(),m("div",Zt,[i(k,{data:a.businessAllChart},null,8,["data"])])):(u(),m("div",$t,"ไม่มีข้อมูล...")),e("div",te,[i(g,{title:"รายจ่าย",class:"lg:col-span-2","header-icon":""},{default:p(()=>{var r,f;return[e("div",ee,[e("div",null,[se,e("div",ae,d(t.$filters.currency(n.sumExpense().sumCost)),1),n.sumExpense().sumCost>0?(u(),m("div",le,[i(v,{data:a.doughnutCostChartData},null,8,["data"])])):(u(),m("div",ie,"ไม่มีข้อมูล..."))]),e("div",null,[oe,e("div",re,d(t.$filters.currency(n.sumExpense().sumCare)),1),n.sumExpense().sumCare>0?(u(),m("div",ne,[i(v,{data:a.doughnutCareChartData},null,8,["data"])])):(u(),m("div",ce,"ไม่มีข้อมูล..."))]),e("div",null,[he,e("div",de,d(t.$filters.currency(n.sumExpense().sumBill)),1),((f=(r=a.doughnutBillChartData)==null?void 0:r.datasets[0])==null?void 0:f.data[0])>0?(u(),m("div",ue,[i(v,{data:a.doughnutBillChartData},null,8,["data"])])):(u(),m("div",me,"ไม่มีข้อมูล..."))])])]}),_:1}),i(g,{title:"รายรับ","header-icon":""},{default:p(()=>[e("div",pe,[e("div",null,[ge,e("div",_e,d(t.$filters.currency(a.income.rawMilk)),1),a.income.rawMilk>0?(u(),m("div",fe,[i(v,{data:a.doughnutIncomeChartData},null,8,["data"])])):(u(),m("div",ke,"ไม่มีข้อมูล..."))])])]),_:1}),i(g,{title:"สรุป","header-icon":""},{default:p(()=>{var r;return[e("div",be,[xe,e("div",ye,d(t.$filters.currency(this.income.rawMilk)),1),Ce,e("div",Ae,d(t.$filters.currency(n.sumExpense().sumExpense)),1),e("div",ve,d(n.sumExpense().profit>0?"กำไร":"ขาดทุน"),1),e("div",we,d(t.$filters.currency((r=n.sumExpense())==null?void 0:r.profit)),1),e("div",De,d(t.$filters.number(n.sumExpense().percent|0))+" % ",1)])]}),_:1})])]}),_:1},8,["title"]),i(g,{icon:"poll",title:"สถิติ","header-icon":"",class:"mb-1 lg:mb-5"},{default:p(()=>[e("div",Me,[i(g,{title:"การรักษา","header-icon":"",class:"dark:border-gray-800 border"},{default:p(()=>{var h,r,f,x,q,I,z,T,V,P,R,W,N;return[e("div",Ye,[e("p",Oe,[i(_,{class:"bg-red-900 text-rose-400 rounded-full p-1 mr-2",path:"plusThick",size:"16"}),w("ทั้งหมด ")]),e("h1",Se,d((r=(h=a.statistics)==null?void 0:h.heal)==null?void 0:r.count),1)]),(I=(q=(x=(f=a.statistics)==null?void 0:f.heal)==null?void 0:x.max)==null?void 0:q.cow)!=null&&I.name?(u(),m("div",je,[e("p",Le,[i(_,{class:"bg-gray-700 text-white rounded-full p-1 mr-2",path:"cow",size:"16"}),w("โค"+d((P=(V=(T=(z=a.statistics)==null?void 0:z.heal)==null?void 0:T.max)==null?void 0:V.cow)==null?void 0:P.name)+" ",1),Ee]),e("h1",Be,d((N=(W=(R=a.statistics)==null?void 0:R.heal)==null?void 0:W.max)==null?void 0:N.count),1)])):j("",!0)]}),_:1}),i(g,{title:"การผสมพันธุ์","header-icon":"",class:"dark:border-gray-800 border"},{default:p(()=>{var h,r,f,x;return[e("div",Qe,[e("p",Fe,[i(_,{class:"bg-teal-900 text-green-500 rounded-full p-1 mr-2",path:"check",size:"16"}),w("สำเร็จ ")]),e("h1",qe,d((r=(h=a.statistics)==null?void 0:h.reproduction)==null?void 0:r.success),1),e("p",Ie,[i(_,{class:"bg-red-900 text-rose-500 rounded-full p-1 mr-2",path:"close",size:"16"}),w("ล้มเหลว ")]),e("h1",ze,d((x=(f=a.statistics)==null?void 0:f.reproduction)==null?void 0:x.fail),1)])]}),_:1}),i(g,{title:"การตั้งครรภ์","header-icon":"",class:"dark:border-gray-800 border"},{default:p(()=>{var h,r,f,x;return[e("div",Te,[e("p",Ve,[i(_,{class:"bg-black text-gray-300 rounded-full p-1 mr-2",path:"emoticonCryOutline",size:"16"}),w(" แท้ง ")]),e("h1",Pe,d((r=(h=a.statistics)==null?void 0:h.pregnant)==null?void 0:r.abort),1),e("p",Re,[i(_,{class:"bg-orange-900 text-yellow-500 rounded-full p-1 mr-2",path:"calendarClock",size:"16"}),w(" ใกล้คลอด "),We]),e("h1",Ne,d((x=(f=a.statistics)==null?void 0:f.pregnant)==null?void 0:x.nearBirth),1)])]}),_:1}),i(g,{title:"การคลอด","header-icon":"",class:"dark:border-gray-800 border"},{default:p(()=>{var h,r,f,x;return[e("div",He,[e("p",Ue,[i(_,{class:"bg-indigo-900 text-white rounded-full p-1 mr-2",path:"genderMale",size:"16"}),w("เพศผู้ ")]),e("h1",Ge,d((r=(h=a.statistics)==null?void 0:h.born)==null?void 0:r.male),1),e("p",Je,[i(_,{class:"bg-rose-900 text-white rounded-full p-1 mr-2",path:"genderFemale",size:"16"}),w("เพศเมีย ")]),e("h1",Ke,d((x=(f=a.statistics)==null?void 0:f.born)==null?void 0:x.female),1)])]}),_:1})])]),_:1})])]),_:1})]),_:1})}const ds=$(ut,[["render",Xe]]);export{ds as default};
