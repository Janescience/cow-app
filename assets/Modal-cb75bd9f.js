import{z as F,X as m,Y as D,n as U,m as x,_ as N,l as S,G as L,i as T,j as q,f as O,R,F as u,H as h,I as _,o as n,c,w as a,d as l,q as j,k as p,h as M,t as H,e as I}from"./index-c9a4d9fd.js";import{_ as z}from"./FormField-11b53394.js";import{D as E}from"./Cow-8bb62a32.js";import{T as g}from"./alert-2f84845f.js";import{a as G,r as P}from"./reproduct-4b10c1e3.js";import{R as V}from"./reproduction-aa0cad69.js";const X={data(){return{reproduct:{cow:{},loginDate:new Date,estrusDate:m(new Date,21),matingDate:m(new Date,22),checkDate:D(m(new Date,22),2),dad:"",howTo:"",status:1,result:2},status:G("create"),result:P("create"),loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},watch:{"reproduct.loginDate"(t){this.reproduct.estrusDate=m(t,21)},"reproduct.estrusDate"(t){this.reproduct.matingDate=m(t,1)},"reproduct.matingDate"(t){this.reproduct.checkDate=D(t,2)},"reproduct.result"(t){t==1?this.reproduct.status=4:this.reproduct.status=1},data:{handler(t,o){t&&(this.reproduct=t,this.reproduct.loginDate=t.loginDate?new Date(t.loginDate):null,this.reproduct.estrusDate=t.estrusDate?new Date(t.estrusDate):null,this.reproduct.matingDate=t.matingDate?new Date(t.matingDate):null,this.reproduct.checkDate=t.checkDate?new Date(t.checkDate):null)}}},methods:{clear(){this.reproduct={}},confirmCancel(t){this.clear(),this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await V.create(this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"})):await V.update(this.reproduct._id,this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"}))}catch(t){console.error("Error : ",t),this.loading=!1,this.alert=t.response.data.message}}},components:{BaseButton:U,BaseButtons:x,CardBox:N,BaseDivider:S,OverlayLayer:L,FormField:z,FormControl:T,NotificationBar:q,BaseLevel:O,DDLCow:E,FormCheckRadioPicker:R},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},data:{type:Object,default:null}}},Y={class:"grid grid-cols-2 lg:grid-cols-3 gap-3 mt-1"};function A(t,o,w,J,e,d){const y=u("DDLCow"),s=u("FormField"),i=u("FormControl"),B=u("NotificationBar"),C=u("BaseDivider"),f=u("BaseButton"),k=u("BaseButtons"),v=u("CardBox"),b=u("OverlayLayer");return h((n(),c(b,null,{default:a(()=>[h(l(v,{title:w.mode==="create"?"เพิ่มการผสมพันธุ์":"แก้ไขการผสมพันธุ์",class:"shadow-lg w-full lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:I(d.submit,["prevent"]),onHeaderIconClick:d.cancel},{default:a(()=>[j("div",Y,[l(s,{label:"โค",help:"* ห้ามว่าง",class:"lg:col-span-1 col-span-2"},{default:a(()=>[l(y,{modelValue:e.reproduct.cow,"onUpdate:modelValue":o[0]||(o[0]=r=>e.reproduct.cow=r),valueType:"object"},null,8,["modelValue"])]),_:1}),l(s,{label:"วันที่เข้าระบบสืบพันธุ์",help:"* ห้ามว่าง"},{default:a(()=>[l(i,{modelValue:e.reproduct.loginDate,"onUpdate:modelValue":o[1]||(o[1]=r=>e.reproduct.loginDate=r),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),l(s,{label:"ผล"},{default:a(()=>[l(i,{modelValue:e.reproduct.result,"onUpdate:modelValue":o[2]||(o[2]=r=>e.reproduct.result=r),options:e.result},null,8,["modelValue","options"])]),_:1}),e.reproduct.result==1?(n(),c(s,{key:0,label:"วิธีการรักษา",help:""},{default:a(()=>[l(i,{modelValue:e.reproduct.howTo,"onUpdate:modelValue":o[3]||(o[3]=r=>e.reproduct.howTo=r),icon:"doctor"},null,8,["modelValue"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:1,label:"วันที่เป็นสัด",help:"* ห้ามว่าง (วันที่เข้าระบบสืบพันธุ์ + 21 วัน)"},{default:a(()=>[l(i,{modelValue:e.reproduct.estrusDate,"onUpdate:modelValue":o[4]||(o[4]=r=>e.reproduct.estrusDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.loginDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:2,label:"วันที่ผสมพันธุ์",help:"* ห้ามว่าง (วันที่เป็นสัด + 24 ชม)"},{default:a(()=>[l(i,{modelValue:e.reproduct.matingDate,"onUpdate:modelValue":o[5]||(o[5]=r=>e.reproduct.matingDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.estrusDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:3,label:"วันที่ตรวจท้อง",help:"* ห้ามว่าง (วันที่ผสมพันธุ์ + 2 เดือน)"},{default:a(()=>[l(i,{modelValue:e.reproduct.checkDate,"onUpdate:modelValue":o[6]||(o[6]=r=>e.reproduct.checkDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.matingDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),l(s,{label:"สถานะ"},{default:a(()=>[l(i,{modelValue:e.reproduct.status,"onUpdate:modelValue":o[7]||(o[7]=r=>e.reproduct.status=r),options:e.status},null,8,["modelValue","options"])]),_:1}),l(s,{label:"รายละเอียดพ่อพันธุ์/น้ำเชื้อ",help:""},{default:a(()=>[l(i,{modelValue:e.reproduct.dad,"onUpdate:modelValue":o[8]||(o[8]=r=>e.reproduct.dad=r),icon:""},null,8,["modelValue"])]),_:1})]),e.alert?(n(),c(B,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[M(H(e.alert),1)]),_:1})):p("",!0),l(C),l(k,{type:"justify-center"},{default:a(()=>[l(f,{label:"บันทึก",color:"success",type:"submit",loading:e.loading},null,8,["loading"]),l(f,{label:"ยกเลิก",color:"danger",onClick:d.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[_,d.value]])]),_:1},512)),[[_,d.value]])}const te=F(X,[["render",A]]);export{te as M};
