import{z as D,p as x,m as S,l as f,i as T,R,F as t,o as n,c as o,w as r,s as F,J as U,L as q,n as g,K as M,d as c,e as y,C as A,D as E,E as N,T as Y,B as j,k as P}from"./index-d48a962a.js";import{_ as z}from"./CardBoxCollapse-1ee5a5f0.js";import{_ as H}from"./FormField-76de1c62.js";import{D as O}from"./Cow-e02d01ab.js";import{D as J}from"./Recipe-2a1988cd.js";import{D as K}from"./Vaccine-095a1aaa.js";import{R as w}from"./report-c05a570b.js";import{a as G,r as I}from"./reproduct-30a2ed6f.js";import"./cow-f215981b.js";const Q={props:{grid:{type:String,default:"grid-cols-4"},forms:{type:Array,default:[]},search:{type:Object,default:null},collapse:Boolean,btnSubmitLabel:{type:String,default:"ค้นหา"},btnSubmitLoading:Boolean,btnViewLoading:Boolean},components:{BaseButton:x,BaseButtons:S,BaseDivider:f,CardBoxCollapse:z,FormField:H,FormControl:T,FormCheckRadioPicker:R,DDLCow:O,DDLRecipe:J,DDLVaccine:K},methods:{view(){this.$emit("view",this.search)},submit(){this.$emit("search",this.search)},reset(){this.$emit("reset",this.search)}}};function W(u,d,a,V,s,i){const m=t("DDLCow"),p=t("DDLRecipe"),v=t("DDLVaccine"),b=t("FormCheckRadioPicker"),_=t("FormControl"),L=t("FormField"),B=t("BaseDivider"),h=t("BaseButton"),C=t("BaseButtons"),k=t("CardBoxCollapse");return n(),o(k,{title:"ค้นหา",icon:"",form:"",class:"mb-2","header-icon":"",collapse:a.collapse,onSubmit:y(i.submit,["prevent"]),onView:y(i.view,["prevent"]),onReset:y(i.reset,["prevent"])},{default:r(()=>[F("div",{class:g(["grid gap-5",[a.grid]])},[(n(!0),U(M,null,q(a.forms,e=>(n(),o(L,{key:e.value,label:e.label,class:g([e.class])},{default:r(()=>[e.type==="ddl"&&e.module==="cow"?(n(),o(m,{key:0,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl-multiple"&&e.module==="cow"?(n(),o(m,{key:1,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType,mutiple:""},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl"&&e.module==="recipe"?(n(),o(p,{key:2,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl"&&e.module==="vaccine"?(n(),o(v,{key:3,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="radio"?(n(),o(b,{key:4,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,type:e.type,options:e.options,required:e.required},null,8,["modelValue","onUpdate:modelValue","type","options","required"])):(n(),o(_,{key:5,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,icon:e.icon,options:e.options,type:e.type,required:e.required},null,8,["modelValue","onUpdate:modelValue","icon","options","type","required"]))]),_:2},1032,["label","class"]))),128))],2),c(B),c(C,{type:"justify-center","no-wrap":""},{default:r(()=>[c(h,{onClick:i.view,color:"success",label:"ดูข้อมูล",loading:a.btnViewLoading,disabled:a.btnViewLoading},null,8,["onClick","loading","disabled"]),c(h,{type:"submit",color:"info",label:"ออกรายงาน",loading:a.btnSubmitLoading,disabled:a.btnSubmitLoading},null,8,["loading","disabled"]),c(h,{type:"reset",color:"danger",label:"ล้าง"})]),_:1})]),_:1},8,["collapse","onSubmit","onView","onReset"])}const X=D(Q,[["render",W]]),Z={data(){return{items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"สถานะ",value:"status",options:G()},{label:"ผล",value:"result",options:I()},{label:"วันที่เข้าระบบสืบพันธุ์",value:"loginDate",icon:"calendar",type:"date"},{label:"วันที่เป็นสัด",value:"estrusDate",icon:"calendar",type:"date"},{label:"วันที่ผสมพันธุ์",value:"matingDate",icon:"calendar",type:"date"},{label:"วันที่ตรวจท้อง",value:"checkDate",icon:"calendar",type:"date"}],datas:[{label:"วันที่เข้าระบบสืบพันธุ์",class:"text-center",value:"loginDate",type:"date"},{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"พ่อพันธุ์",value:"dad"},{label:"ผล",value:"result"},{label:"สถานะ",value:"status"},{label:"การรักษา",value:"howTo"},{label:"วันที่เป็นสัด",class:"text-center",value:"estrusDate",type:"date"},{label:"วันที่ผสมพันธุ์",class:"text-center",value:"matingDate",type:"date"},{label:"วันที่ตรวจท้อง",class:"text-center",value:"checkDate",type:"date"},{label:"วันที่ตั้งครรภ์",class:"text-center",value:"pregnantDate",type:"date"},{label:"เพศ",class:"text-center",value:"sex"},{label:"วันที่คลอด",class:"text-center",value:"birthDate",type:"date"},{label:"รกค้าง",class:"text-center",value:"overgrown"},{label:"วันที่ใช้ยาขับ",class:"text-center",value:"drugDate",type:"date"},{label:"วันที่ล้างมดลูก",class:"text-center",value:"washDate",type:"date"},{label:"อายุครรภ์",class:"text-center",value:"gestAge"},{label:"รหัสลูกวัว",class:"text-center",value:"calfCode"},{label:"ชื่อลูกวัว",class:"text-center",value:"calfName"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,viewLoading:!1}},components:{SectionMain:A,LayoutAuthenticated:E,SectionTitleBarSub:N,Criteria:X,Table:Y},methods:{async view(u){this.viewLoading=!0;const d=await w.reproductView(u);this.items=[],d.data&&(this.items=d.data.reproducts),this.viewLoading=!1},async print(){this.loading=!0;const u=await w.reproductExport(this.search);if(u.data){const d=window.URL.createObjectURL(new Blob([u.data])),a=document.createElement("a");a.href=d,a.setAttribute("download","ข้อมูลการสืบพันธุ์ "+j().format("DDMMYYYYHHmm")+".xlsx"),document.body.appendChild(a),a.click(),a.remove()}this.loading=!1},reset(){this.items=[],this.search.cow=null,this.search.date=null}}};function $(u,d,a,V,s,i){const m=t("SectionTitleBarSub"),p=t("Criteria"),v=t("Table"),b=t("SectionMain"),_=t("LayoutAuthenticated");return n(),o(_,null,{default:r(()=>[c(b,null,{default:r(()=>[c(m,{icon:"reproduction",title:"การสืบพันธุ์"}),c(p,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:i.print,onView:i.view,onReset:i.reset,forms:s.forms,search:s.search,btnSubmitLoading:s.loading,btnViewLoading:s.viewLoading},null,8,["onSearch","onView","onReset","forms","search","btnSubmitLoading","btnViewLoading"]),s.items.length>0?(n(),o(v,{key:0,title:"ข้อมูลการสืบพันธุ์",items:s.items,datas:s.datas,loading:s.viewLoading},null,8,["items","datas","loading"])):P("",!0)]),_:1})]),_:1})}const ue=D(Z,[["render",$]]);export{ue as default};
