import{N as r,$ as n,O as m,P as _,R as i,o as p,s as v,b as s,w as b,i as D}from"./index.2ae6ed15.js";import{a as l}from"./auth-header.22f18301.js";async function y(t={}){let e="?";if(t.farm&&(e=e+`farm=${t.farm}&`),t.cows&&(e=e+`flag=${t.flag}&`),t.code&&(e=e+`code=${t.code}&`),t.name&&(e=e+`name=${t.name}&`),t.status&&(e=e+`status=${t.status}&`),t.birthDate){const a=n(new Date(t.birthDate)).format("YYYY-MM-DD");e=e+`birthDate=${a}&`}return t.corral&&(e=e+`corral=${t.corral}&`),t?e.replace(/&*$/,""):""}class w{async all(e){const a=await y(e);return r.get("/cow"+a,{headers:l()}).then(d=>d)}get(e){return r.get(`/cow/${e}`,{headers:l()})}create(e){return e.dateCurrent&&(e.dateCurrent=n(new Date(e.dateCurrent)).format("YYYY-MM-DD")),e.dateNext&&(e.dateNext=n(new Date(e.dateNext)).format("YYYY-MM-DD")),r.post("/protection",e,{headers:l()})}delete(e){return r.delete(`/cow/${e}`,{headers:l()})}update(e,a){return r.put(`/cow/${e}`,a,{headers:l()})}}var V=new w;const g={data(){return{datas:[]}},created(){this.initialData()},computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{async initialData(){const t={farm:_().farm._id};try{const e=await V.all(t);if(this.datas=[],e&&(this.datas=e.data.vaccines,this.datas.map(a=>a.vaccine_data=a.name)),this.defaultValue){const a=this.datas.filter(d=>d[this.defaultType]==this.defaultValue);a&&this.handleInput(this.reduceAction(a[0]))}}catch(e){this.datas=[],console.error("Error: "+e.message)}},reduceAction(t){return this.valueType==="object"?t:t[this.valueType]},handleInput(t){this.$emit("update:value",t),this.dataSelected=this.datas.find(e=>e.name===t),this.$emit("update:dataSelected",this.dataSelected)}},props:{clear:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},dataSelected:{default:null,type:Object},defaultType:{default:null,type:Object},valueType:{default:"_id",type:Object},defaultValue:{default:null,type:Object},modelValue:{type:[String,Number,Boolean,Array,Object],default:""},multiple:{default:!1,type:Boolean}}},Y={class:"relative"},S=D(" \u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ");function $(t,e,a,d,u,c){const o=i("mdicon"),f=i("v-select");return p(),v("div",Y,[s(f,{class:"ddl",clearable:a.clear,disabled:a.disabled,options:u.datas,reduce:c.reduceAction,label:"vaccine_data",placeholder:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E27\u0E31\u0E04\u0E0B\u0E35\u0E19",onInput:c.handleInput,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=h=>c.value=h),dataSelected:a.dataSelected,multiple:""},{"no-options":b(()=>[s(o,{name:"alertCircleOutline",width:"16",height:"16",class:"inline-block"}),S]),_:1},8,["clearable","disabled","options","reduce","onInput","modelValue","dataSelected"])])}var C=m(g,[["render",$]]);export{C as D};
