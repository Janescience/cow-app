import{b as F,_ as U,a as x}from"./BaseDivider-95ad4108.js";import{v as L,L as m,B as D,h as N,_ as S,z as u,G as h,H as _,o as n,c,w as a,d as r,j as T,g as p,f as O,t as j,e as q}from"./index-eca85292.js";import{a as M}from"./CardBoxModal-024406f0.js";import{_ as R}from"./FormField-b970840e.js";import{_ as H}from"./FormControl-42986717.js";import{_ as z}from"./FormCheckRadioPicker-ec20d5d3.js";import{_ as I}from"./NotificationBar-fdce797b.js";import{D as E}from"./Cow-fec14630.js";import{T as g}from"./alert-84edf021.js";import{a as G,r as P}from"./reproduct-4b10c1e3.js";import{R as V}from"./reproduction-974e83db.js";const A={data(){return{reproduct:{cow:{},loginDate:new Date,estrusDate:m(new Date,21),matingDate:m(new Date,22),checkDate:D(m(new Date,22),2),dad:"",howTo:"",status:1,result:2},status:G("create"),result:P("create"),loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},watch:{"reproduct.loginDate"(t){this.reproduct.estrusDate=m(t,21)},"reproduct.estrusDate"(t){this.reproduct.matingDate=m(t,1)},"reproduct.matingDate"(t){this.reproduct.checkDate=D(t,2)},"reproduct.result"(t){t==1?this.reproduct.status=4:this.reproduct.status=1},data:{handler(t,o){t&&(this.reproduct=t,this.reproduct.loginDate=t.loginDate?new Date(t.loginDate):null,this.reproduct.estrusDate=t.estrusDate?new Date(t.estrusDate):null,this.reproduct.matingDate=t.matingDate?new Date(t.matingDate):null,this.reproduct.checkDate=t.checkDate?new Date(t.checkDate):null)}}},methods:{clear(){this.reproduct={}},confirmCancel(t){this.clear(),this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await V.create(this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"})):await V.update(this.reproduct._id,this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"}))}catch(t){console.error("Error : ",t),this.loading=!1,this.alert=t.response.data.message}}},components:{BaseButton:F,BaseButtons:N,CardBox:U,BaseDivider:x,OverlayLayer:M,FormField:R,FormControl:H,NotificationBar:I,BaseLevel:S,DDLCow:E,FormCheckRadioPicker:z},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},data:{type:Object,default:null}}},J={class:"grid grid-cols-2 lg:grid-cols-3 gap-3 mt-1"};function K(t,o,w,Q,e,d){const B=u("DDLCow"),s=u("FormField"),i=u("FormControl"),y=u("NotificationBar"),C=u("BaseDivider"),f=u("BaseButton"),v=u("BaseButtons"),b=u("CardBox"),k=u("OverlayLayer");return h((n(),c(k,null,{default:a(()=>[h(r(b,{title:w.mode==="create"?"เพิ่มการผสมพันธุ์":"แก้ไขการผสมพันธุ์",class:"shadow-lg w-full lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:q(d.submit,["prevent"]),onHeaderIconClick:d.cancel},{default:a(()=>[T("div",J,[r(s,{label:"โค",help:"* ห้ามว่าง",class:"lg:col-span-1 col-span-2"},{default:a(()=>[r(B,{modelValue:e.reproduct.cow,"onUpdate:modelValue":o[0]||(o[0]=l=>e.reproduct.cow=l),valueType:"object"},null,8,["modelValue"])]),_:1}),r(s,{label:"วันที่เข้าระบบสืบพันธุ์",help:"* ห้ามว่าง"},{default:a(()=>[r(i,{modelValue:e.reproduct.loginDate,"onUpdate:modelValue":o[1]||(o[1]=l=>e.reproduct.loginDate=l),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),r(s,{label:"ผล"},{default:a(()=>[r(i,{modelValue:e.reproduct.result,"onUpdate:modelValue":o[2]||(o[2]=l=>e.reproduct.result=l),options:e.result},null,8,["modelValue","options"])]),_:1}),e.reproduct.result==1?(n(),c(s,{key:0,label:"วิธีการรักษา",help:""},{default:a(()=>[r(i,{modelValue:e.reproduct.howTo,"onUpdate:modelValue":o[3]||(o[3]=l=>e.reproduct.howTo=l),icon:"doctor"},null,8,["modelValue"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:1,label:"วันที่เป็นสัด",help:"* ห้ามว่าง (วันที่เข้าระบบสืบพันธุ์ + 21 วัน)"},{default:a(()=>[r(i,{modelValue:e.reproduct.estrusDate,"onUpdate:modelValue":o[4]||(o[4]=l=>e.reproduct.estrusDate=l),icon:"calendar",type:"date","lower-limit":e.reproduct.loginDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:2,label:"วันที่ผสมพันธุ์",help:"* ห้ามว่าง (วันที่เป็นสัด + 24 ชม)"},{default:a(()=>[r(i,{modelValue:e.reproduct.matingDate,"onUpdate:modelValue":o[5]||(o[5]=l=>e.reproduct.matingDate=l),icon:"calendar",type:"date","lower-limit":e.reproduct.estrusDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),e.reproduct.result==2?(n(),c(s,{key:3,label:"วันที่ตรวจท้อง",help:"* ห้ามว่าง (วันที่ผสมพันธุ์ + 2 เดือน)"},{default:a(()=>[r(i,{modelValue:e.reproduct.checkDate,"onUpdate:modelValue":o[6]||(o[6]=l=>e.reproduct.checkDate=l),icon:"calendar",type:"date","lower-limit":e.reproduct.matingDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),r(s,{label:"สถานะ"},{default:a(()=>[r(i,{modelValue:e.reproduct.status,"onUpdate:modelValue":o[7]||(o[7]=l=>e.reproduct.status=l),options:e.status},null,8,["modelValue","options"])]),_:1}),r(s,{label:"รายละเอียดพ่อพันธุ์/น้ำเชื้อ",help:""},{default:a(()=>[r(i,{modelValue:e.reproduct.dad,"onUpdate:modelValue":o[8]||(o[8]=l=>e.reproduct.dad=l),icon:""},null,8,["modelValue"])]),_:1})]),e.alert?(n(),c(y,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[O(j(e.alert),1)]),_:1})):p("",!0),r(C),r(v,{type:"justify-center"},{default:a(()=>[r(f,{label:"บันทึก",color:"success",type:"submit",loading:e.loading},null,8,["loading"]),r(f,{label:"ยกเลิก",color:"danger",onClick:d.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[_,d.value]])]),_:1},512)),[[_,d.value]])}const se=L(A,[["render",K]]);export{se as M};
