import{N as F,a1 as _,l as A,_ as O,k as q,R,g as E,h as I,e as W,U as H,Q as n,H as C,T as k,o as d,c as m,w as o,b as l,p as P,i as v,t as g,j as y,d as z,a0 as p,Z as f,O as Q,S as j,P as Z,V as G}from"./index.cbf61ad4.js";import{D as J,T as K,a as X}from"./Criteria.53e25487.js";import{_ as $}from"./BaseButtons.69d3d48f.js";import{_ as ee,a as te}from"./FormField.eac37562.js";import{g as N}from"./age-calculate.613305e3.js";import{a as w}from"./auth-header.c3e264e6.js";import"./CardBoxModal.5de7a184.js";const ae={data(){return{create:{sex:"F",calf:"",overgrown:"N",date:new Date,placentaDrugDate:_(new Date,15),uterusWashDate:_(new Date,29)},show:{cow:null,seq:""},loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{data(t){t&&(this.show=t)},"create.date"(t){this.create.placentaDrugDate=_(t,15)},"create.placentaDrugDate"(t){this.create.uterusWashDate=_(t,14)}},methods:{clear(){this.create.sex="",this.create.overgrown="",this.create.date=new Date,this.create.placentaDrugDate=new Date,this.create.uterusWashDate=_(new Date,14)},confirmCancel(t){this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert=""},calAge(t){return N(t)}},components:{BaseButton:A,BaseButtons:$,CardBox:O,BaseDivider:q,OverlayLayer:R,FormField:ee,FormControl:E,NotificationBar:I,BaseLevel:W,DDLCow:J,FormCheckRadioPicker:te,BaseIcon:H},props:{modelValue:{type:[String,Number,Boolean],default:null},data:{type:Object,default:null}}},le={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"};function re(t,e,i,B,a,s){const V=n("BaseIcon"),h=n("BaseLevel"),u=n("FormControl"),c=n("FormField"),b=n("FormCheckRadioPicker"),x=n("NotificationBar"),M=n("BaseDivider"),Y=n("BaseButton"),L=n("BaseButtons"),T=n("CardBox"),U=n("OverlayLayer");return C((d(),m(U,null,{default:o(()=>[C(l(T,{title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",class:"shadow-lg w-full overflow-y-auto lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:z(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:o(()=>[P("div",le,[l(h,{type:"justify-start"},{default:o(()=>{var r,D;return[l(V,{path:"cow",size:"24",class:"mr-3"}),v(g((r=a.show.cow)==null?void 0:r.code)+" : "+g((D=a.show.cow)==null?void 0:D.name),1)]}),_:1}),l(h,{type:"justify-start"},{default:o(()=>{var r,D;return[v(" \u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48 : "+g((D=(r=a.show)==null?void 0:r.reproduction)==null?void 0:D.seq),1)]}),_:1}),l(h,{type:"justify-start"},{default:o(()=>{var r;return[v(" \u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C : "+g(s.calAge((r=a.show)==null?void 0:r.pregnantDate)),1)]}),_:1}),l(c,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(u,{modelValue:a.create.date,"onUpdate:modelValue":e[0]||(e[0]=r=>a.create.date=r),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),l(c,{label:"\u0E40\u0E1E\u0E28",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(b,{modelValue:a.create.sex,"onUpdate:modelValue":e[1]||(e[1]=r=>a.create.sex=r),type:"radio",options:{M:"\u0E40\u0E1E\u0E28\u0E1C\u0E39\u0E49",F:"\u0E40\u0E1E\u0E28\u0E40\u0E21\u0E35\u0E22"}},null,8,["modelValue"])]),_:1}),a.create.sex=="F"?(d(),m(c,{key:0,label:"\u0E0A\u0E37\u0E48\u0E2D\u0E25\u0E39\u0E01\u0E27\u0E31\u0E27"},{default:o(()=>[l(u,{modelValue:a.create.calf,"onUpdate:modelValue":e[2]||(e[2]=r=>a.create.calf=r),icon:"babyFaceOutline"},null,8,["modelValue"])]),_:1})):y("",!0),l(c,{label:"\u0E23\u0E01",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:o(()=>[l(b,{modelValue:a.create.overgrown,"onUpdate:modelValue":e[3]||(e[3]=r=>a.create.overgrown=r),type:"radio",options:{Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}},null,8,["modelValue"])]),_:1}),a.create.overgrown==="Y"?(d(),m(c,{key:1,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14 + 15 \u0E27\u0E31\u0E19)"},{default:o(()=>[l(u,{modelValue:a.create.placentaDrugDate,"onUpdate:modelValue":e[4]||(e[4]=r=>a.create.placentaDrugDate=r),icon:"calendar",type:"date","lower-limit":a.create.date},null,8,["modelValue","lower-limit"])]),_:1})):y("",!0),a.create.overgrown==="Y"?(d(),m(c,{key:2,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A + 14 \u0E27\u0E31\u0E19)"},{default:o(()=>[l(u,{modelValue:a.create.uterusWashDate,"onUpdate:modelValue":e[5]||(e[5]=r=>a.create.uterusWashDate=r),icon:"calendar",type:"date","lower-limit":a.create.placentaDrugDate},null,8,["modelValue","lower-limit"])]),_:1})):y("",!0)]),a.alert?(d(),m(x,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:o(()=>[v(g(a.alert),1)]),_:1})):y("",!0),l(M),l(L,{type:"justify-center"},{default:o(()=>[l(Y,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:a.loading},null,8,["loading"]),l(Y,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit","onHeaderIconClick"]),[[k,s.value]])]),_:1},512)),[[k,s.value]])}var ne=F(ae,[["render",re]]);async function oe(t={}){let e="?";if(t.farm&&(e=e+`farm=${t.farm}&`),t.cow&&(e=e+`cow=${t.cow}&`),t.date){const i=f(new Date(t.date)).format("YYYY-MM-DD");e=e+`date=${i}&`}return t.sex&&(e=e+`sex=${t.sex}&`),t?e.replace(/&*$/,""):""}class se{async all(e){const i=await oe(e);return p.get("/birth"+i,{headers:w()}).then(B=>B)}get(e){return p.get(`/birth/${e}`,{headers:w()})}create(e){return e.birthDate&&(e.birthDate=f(new Date(e.birthDate)).format("YYYY-MM-DD")),e.loginDate&&(e.loginDate=f(new Date(e.loginDate)).format("YYYY-MM-DD")),e.estrusDate&&(e.estrusDate=f(new Date(e.estrusDate)).format("YYYY-MM-DD")),e.matingDate&&(e.matingDate=f(new Date(e.matingDate)).format("YYYY-MM-DD")),e.checkDate&&(e.checkDate=f(new Date(e.checkDate)).format("YYYY-MM-DD")),p.post("/birth",e,{headers:w()})}delete(e){return p.delete(`/birth/${e}`,{headers:w()})}update(e,i){return p.put(`/birth/${e}`,i,{headers:w()})}}var S=new se;const ce=()=>({M:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49",F:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}),ie=()=>({Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}),ue={data(){return{openModal:!1,birthData:null,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E40\u0E1E\u0E28",value:"sex",options:[{id:"",label:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{id:"M",label:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49"},{id:"F",label:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}]},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",value:"date",icon:"calendar",type:"date"}],search:{cow:null,date:null,sex:"",farm:Q().farm._id},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48",value:"seq",class:"text-center"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07\u0E04\u0E23\u0E23\u0E20\u0E4C",class:"text-center",value:"pregnantDate",type:"date"},{label:"\u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C",func:t=>this.calAge(t==null?void 0:t.pregnantDate)},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",class:"text-center",value:"date",type:"date"},{label:"\u0E40\u0E1E\u0E28",class:"text-center",func:t=>ce()[t.sex]},{label:"\u0E23\u0E01\u0E04\u0E49\u0E32\u0E07",class:"text-center",func:t=>ie()[t.overgrown]},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A",class:"text-center",value:"drugDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01",class:"text-center",value:"washDate",type:"date"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger",condition:t=>!t.date},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning",condition:t=>t.date},{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",color:"info",type:"oth",func:t=>{this.openModal=!0,this.birthData=t}}]}},components:{SectionMain:j,LayoutAuthenticated:Z,SectionTitleBarSub:G,Table:K,Modal:ne,Criteria:X},created(){this.getDatas()},methods:{async getDatas(t){this.loading=!0;const e=await S.all(t);this.items=[],e.data&&(this.items=e.data.births),this.loading=!1},async remove(t){this.loading=!0,(await S.delete(t)).data&&this.getDatas(),this.loading=!1},edit(t){this.dataEdit=t,this.dataEdit.cow=t.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null,this.search.sex=null},calAge(t){return N(t)}}};function de(t,e,i,B,a,s){const V=n("SectionTitleBarSub"),h=n("Modal"),u=n("Criteria"),c=n("Table"),b=n("SectionMain"),x=n("LayoutAuthenticated");return d(),m(x,null,{default:o(()=>[l(b,null,{default:o(()=>[l(V,{icon:"babyFaceOutline",title:"\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01"}),l(h,{modelValue:a.openModal,"onUpdate:modelValue":e[0]||(e[0]=M=>a.openModal=M),data:a.birthData,onConfirm:s.getDatas},null,8,["modelValue","data","onConfirm"]),l(u,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getDatas,onReset:s.reset,forms:a.forms,search:a.search},null,8,["onSearch","onReset","forms","search"]),l(c,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01","has-checkbox":"","checked-data":a.checked,items:a.items,datas:a.datas,buttons:a.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:t.removeSelected,loading:a.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var we=F(ue,[["render",de]]);export{we as default};
