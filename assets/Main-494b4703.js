import{z as qe,B as st,p as He,m as gt,_ as yt,G as St,F as Y,H as fe,I as de,o as O,c as Pe,w as Q,d as A,s as d,J as E,K as ee,L as se,t as I,a as X,M as jt,N as Lt,n as Ve,h as V,q as U,O as T,k as S,f as wt,P as Nt,C as It,D as Vt,Q as Ht,A as Wt}from"./index-327694b2.js";import{_ as zt}from"./SectionTitle-351053b8.js";import{u as qt,_ as Ft}from"./Top-c8c45393.js";import"./alert-4eea592d.js";import{N as Yt}from"./notification-7f1fd7ab.js";const Ut={data(){return{}},emits:["update:modelValue","cancel"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},date(){let e=st(new Date(this.year,this.month,this.day)).format("dddd DD MMMM yyyy").split(" ");return"วัน"+e[0]+" "+e[1]+" "+e[2]+" "+(Number(e[3])+543)}},methods:{confirmCancel(e){this.value=!1,this.$emit(e)},cancel(){this.confirmCancel("cancel")},formatDate(e,t){return st(e).format(t)}},components:{BaseButton:He,BaseButtons:gt,CardBox:yt,OverlayLayer:St},props:{modelValue:{type:[String,Number,Boolean],default:null},day:{type:Number,required:!0},month:{type:Number,required:!0},year:{type:Number,required:!0},events:{type:Object,required:!0}}},Xt={class:"overflow-x-auto"},Gt=d("thead",null,[d("tr",null,[d("th",{class:"whitespace-nowrap"},"วันที่ครบกำหนด"),d("th",{class:"whitespace-nowrap"},"หัวข้อ"),d("th",{class:"whitespace-nowrap"},"รายละเอียด"),d("th",{class:"whitespace-nowrap"},"การแจ้งเตือน")])],-1),Kt={"data-label":"วันที่ครบกำหนด",class:"whitespace-nowrap"},Qt={"data-label":"หัวข้อ",class:"whitespace-nowrap"},Jt={"data-label":"รายละเอียด",class:"whitespace-nowrap"},Zt={"data-label":"การแจ้งเตือน",class:"whitespace-nowrap"};function er(e,t,r,a,n,o){const c=Y("BaseButton"),i=Y("BaseButtons"),s=Y("CardBox"),f=Y("OverlayLayer");return fe((O(),Pe(f,null,{default:Q(()=>[fe(A(s,{title:o.date,class:"shadow-lg w-full md:w-3/5 lg:w-1/1 z-50","header-icon":"close",modal:"",form:"",onHeaderIconClick:o.cancel},{default:Q(()=>[d("div",Xt,[d("table",null,[Gt,d("tbody",null,[(O(!0),E(ee,null,se(r.events,l=>(O(),E("tr",{key:l._id},[d("td",Kt," วัน"+I(o.formatDate(l.date,"dddd DD MMMM yyyy")),1),d("td",Qt,I(l.title),1),d("td",Jt,I(l.description),1),d("td",Zt,I(l.alert?"แจ้งเตือนแล้ว":"ยังไม่แจ้งเตือน"),1)]))),128))])])]),A(i,{type:"justify-center",class:"mt-5"},{default:Q(()=>[A(c,{label:"ปิด",color:"danger",onClick:o.cancel,small:""},null,8,["onClick"])]),_:1})]),_:1},8,["title","onHeaderIconClick"]),[[de,o.value]])]),_:1},512)),[[de,o.value]])}const tr=qe(Ut,[["render",er]]);var j="top",W="bottom",z="right",L="left",Fe="auto",Ce=[j,W,z,L],pe="start",_e="end",rr="clippingParents",xt="viewport",we="popper",nr="reference",lt=Ce.reduce(function(e,t){return e.concat([t+"-"+pe,t+"-"+_e])},[]),bt=[].concat(Ce,[Fe]).reduce(function(e,t){return e.concat([t,t+"-"+pe,t+"-"+_e])},[]),ar="beforeRead",or="read",ir="afterRead",sr="beforeMain",lr="main",cr="afterMain",ur="beforeWrite",fr="write",dr="afterWrite",pr=[ar,or,ir,sr,lr,cr,ur,fr,dr];function K(e){return e?(e.nodeName||"").toLowerCase():null}function q(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ce(e){var t=q(e).Element;return e instanceof t||e instanceof Element}function H(e){var t=q(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ye(e){if(typeof ShadowRoot>"u")return!1;var t=q(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function vr(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var a=t.styles[r]||{},n=t.attributes[r]||{},o=t.elements[r];!H(o)||!K(o)||(Object.assign(o.style,a),Object.keys(n).forEach(function(c){var i=n[c];i===!1?o.removeAttribute(c):o.setAttribute(c,i===!0?"":i)}))})}function hr(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(a){var n=t.elements[a],o=t.attributes[a]||{},c=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:r[a]),i=c.reduce(function(s,f){return s[f]="",s},{});!H(n)||!K(n)||(Object.assign(n.style,i),Object.keys(o).forEach(function(s){n.removeAttribute(s)}))})}}const mr={name:"applyStyles",enabled:!0,phase:"write",fn:vr,effect:hr,requires:["computeStyles"]};function G(e){return e.split("-")[0]}var le=Math.max,Te=Math.min,ve=Math.round;function We(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function _t(){return!/^((?!chrome|android).)*safari/i.test(We())}function he(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var a=e.getBoundingClientRect(),n=1,o=1;t&&H(e)&&(n=e.offsetWidth>0&&ve(a.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ve(a.height)/e.offsetHeight||1);var c=ce(e)?q(e):window,i=c.visualViewport,s=!_t()&&r,f=(a.left+(s&&i?i.offsetLeft:0))/n,l=(a.top+(s&&i?i.offsetTop:0))/o,x=a.width/n,C=a.height/o;return{width:x,height:C,top:l,right:f+x,bottom:l+C,left:f,x:f,y:l}}function Ue(e){var t=he(e),r=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function Ot(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ye(r)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function J(e){return q(e).getComputedStyle(e)}function gr(e){return["table","td","th"].indexOf(K(e))>=0}function te(e){return((ce(e)?e.ownerDocument:e.document)||window.document).documentElement}function Se(e){return K(e)==="html"?e:e.assignedSlot||e.parentNode||(Ye(e)?e.host:null)||te(e)}function ct(e){return!H(e)||J(e).position==="fixed"?null:e.offsetParent}function yr(e){var t=/firefox/i.test(We()),r=/Trident/i.test(We());if(r&&H(e)){var a=J(e);if(a.position==="fixed")return null}var n=Se(e);for(Ye(n)&&(n=n.host);H(n)&&["html","body"].indexOf(K(n))<0;){var o=J(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function ke(e){for(var t=q(e),r=ct(e);r&&gr(r)&&J(r).position==="static";)r=ct(r);return r&&(K(r)==="html"||K(r)==="body"&&J(r).position==="static")?t:r||yr(e)||t}function Xe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function xe(e,t,r){return le(e,Te(t,r))}function wr(e,t,r){var a=xe(e,t,r);return a>r?r:a}function Ct(){return{top:0,right:0,bottom:0,left:0}}function kt(e){return Object.assign({},Ct(),e)}function Et(e,t){return t.reduce(function(r,a){return r[a]=e,r},{})}var xr=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,kt(typeof t!="number"?t:Et(t,Ce))};function br(e){var t,r=e.state,a=e.name,n=e.options,o=r.elements.arrow,c=r.modifiersData.popperOffsets,i=G(r.placement),s=Xe(i),f=[L,z].indexOf(i)>=0,l=f?"height":"width";if(!(!o||!c)){var x=xr(n.padding,r),C=Ue(o),p=s==="y"?j:L,k=s==="y"?W:z,y=r.rects.reference[l]+r.rects.reference[s]-c[s]-r.rects.popper[l],w=c[s]-r.rects.reference[s],B=ke(o),D=B?s==="y"?B.clientHeight||0:B.clientWidth||0:0,$=y/2-w/2,g=x[p],h=D-C[l]-x[k],b=D/2-C[l]/2+$,M=xe(g,b,h),_=s;r.modifiersData[a]=(t={},t[_]=M,t.centerOffset=M-b,t)}}function _r(e){var t=e.state,r=e.options,a=r.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||Ot(t.elements.popper,n)&&(t.elements.arrow=n))}const Or={name:"arrow",enabled:!0,phase:"main",fn:br,effect:_r,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function me(e){return e.split("-")[1]}var Cr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kr(e){var t=e.x,r=e.y,a=window,n=a.devicePixelRatio||1;return{x:ve(t*n)/n||0,y:ve(r*n)/n||0}}function ut(e){var t,r=e.popper,a=e.popperRect,n=e.placement,o=e.variation,c=e.offsets,i=e.position,s=e.gpuAcceleration,f=e.adaptive,l=e.roundOffsets,x=e.isFixed,C=c.x,p=C===void 0?0:C,k=c.y,y=k===void 0?0:k,w=typeof l=="function"?l({x:p,y}):{x:p,y};p=w.x,y=w.y;var B=c.hasOwnProperty("x"),D=c.hasOwnProperty("y"),$=L,g=j,h=window;if(f){var b=ke(r),M="clientHeight",_="clientWidth";if(b===q(r)&&(b=te(r),J(b).position!=="static"&&i==="absolute"&&(M="scrollHeight",_="scrollWidth")),b=b,n===j||(n===L||n===z)&&o===_e){g=W;var m=x&&b===h&&h.visualViewport?h.visualViewport.height:b[M];y-=m-a.height,y*=s?1:-1}if(n===L||(n===j||n===W)&&o===_e){$=z;var u=x&&b===h&&h.visualViewport?h.visualViewport.width:b[_];p-=u-a.width,p*=s?1:-1}}var v=Object.assign({position:i},f&&Cr),P=l===!0?kr({x:p,y}):{x:p,y};if(p=P.x,y=P.y,s){var R;return Object.assign({},v,(R={},R[g]=D?"0":"",R[$]=B?"0":"",R.transform=(h.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",R))}return Object.assign({},v,(t={},t[g]=D?y+"px":"",t[$]=B?p+"px":"",t.transform="",t))}function Er(e){var t=e.state,r=e.options,a=r.gpuAcceleration,n=a===void 0?!0:a,o=r.adaptive,c=o===void 0?!0:o,i=r.roundOffsets,s=i===void 0?!0:i,f={placement:G(t.placement),variation:me(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ut(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ut(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Br={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Er,data:{}};var Me={passive:!0};function Dr(e){var t=e.state,r=e.instance,a=e.options,n=a.scroll,o=n===void 0?!0:n,c=a.resize,i=c===void 0?!0:c,s=q(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&f.forEach(function(l){l.addEventListener("scroll",r.update,Me)}),i&&s.addEventListener("resize",r.update,Me),function(){o&&f.forEach(function(l){l.removeEventListener("scroll",r.update,Me)}),i&&s.removeEventListener("resize",r.update,Me)}}const Ar={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Dr,data:{}};var $r={left:"right",right:"left",bottom:"top",top:"bottom"};function Re(e){return e.replace(/left|right|bottom|top/g,function(t){return $r[t]})}var Mr={start:"end",end:"start"};function ft(e){return e.replace(/start|end/g,function(t){return Mr[t]})}function Ge(e){var t=q(e),r=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function Ke(e){return he(te(e)).left+Ge(e).scrollLeft}function Pr(e,t){var r=q(e),a=te(e),n=r.visualViewport,o=a.clientWidth,c=a.clientHeight,i=0,s=0;if(n){o=n.width,c=n.height;var f=_t();(f||!f&&t==="fixed")&&(i=n.offsetLeft,s=n.offsetTop)}return{width:o,height:c,x:i+Ke(e),y:s}}function Rr(e){var t,r=te(e),a=Ge(e),n=(t=e.ownerDocument)==null?void 0:t.body,o=le(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),c=le(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),i=-a.scrollLeft+Ke(e),s=-a.scrollTop;return J(n||r).direction==="rtl"&&(i+=le(r.clientWidth,n?n.clientWidth:0)-o),{width:o,height:c,x:i,y:s}}function Qe(e){var t=J(e),r=t.overflow,a=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+a)}function Bt(e){return["html","body","#document"].indexOf(K(e))>=0?e.ownerDocument.body:H(e)&&Qe(e)?e:Bt(Se(e))}function be(e,t){var r;t===void 0&&(t=[]);var a=Bt(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),o=q(a),c=n?[o].concat(o.visualViewport||[],Qe(a)?a:[]):a,i=t.concat(c);return n?i:i.concat(be(Se(c)))}function ze(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Tr(e,t){var r=he(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function dt(e,t,r){return t===xt?ze(Pr(e,r)):ce(t)?Tr(t,r):ze(Rr(te(e)))}function Sr(e){var t=be(Se(e)),r=["absolute","fixed"].indexOf(J(e).position)>=0,a=r&&H(e)?ke(e):e;return ce(a)?t.filter(function(n){return ce(n)&&Ot(n,a)&&K(n)!=="body"}):[]}function jr(e,t,r,a){var n=t==="clippingParents"?Sr(e):[].concat(t),o=[].concat(n,[r]),c=o[0],i=o.reduce(function(s,f){var l=dt(e,f,a);return s.top=le(l.top,s.top),s.right=Te(l.right,s.right),s.bottom=Te(l.bottom,s.bottom),s.left=le(l.left,s.left),s},dt(e,c,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Dt(e){var t=e.reference,r=e.element,a=e.placement,n=a?G(a):null,o=a?me(a):null,c=t.x+t.width/2-r.width/2,i=t.y+t.height/2-r.height/2,s;switch(n){case j:s={x:c,y:t.y-r.height};break;case W:s={x:c,y:t.y+t.height};break;case z:s={x:t.x+t.width,y:i};break;case L:s={x:t.x-r.width,y:i};break;default:s={x:t.x,y:t.y}}var f=n?Xe(n):null;if(f!=null){var l=f==="y"?"height":"width";switch(o){case pe:s[f]=s[f]-(t[l]/2-r[l]/2);break;case _e:s[f]=s[f]+(t[l]/2-r[l]/2);break}}return s}function Oe(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=a===void 0?e.placement:a,o=r.strategy,c=o===void 0?e.strategy:o,i=r.boundary,s=i===void 0?rr:i,f=r.rootBoundary,l=f===void 0?xt:f,x=r.elementContext,C=x===void 0?we:x,p=r.altBoundary,k=p===void 0?!1:p,y=r.padding,w=y===void 0?0:y,B=kt(typeof w!="number"?w:Et(w,Ce)),D=C===we?nr:we,$=e.rects.popper,g=e.elements[k?D:C],h=jr(ce(g)?g:g.contextElement||te(e.elements.popper),s,l,c),b=he(e.elements.reference),M=Dt({reference:b,element:$,strategy:"absolute",placement:n}),_=ze(Object.assign({},$,M)),m=C===we?_:b,u={top:h.top-m.top+B.top,bottom:m.bottom-h.bottom+B.bottom,left:h.left-m.left+B.left,right:m.right-h.right+B.right},v=e.modifiersData.offset;if(C===we&&v){var P=v[n];Object.keys(u).forEach(function(R){var re=[z,W].indexOf(R)>=0?1:-1,ne=[j,W].indexOf(R)>=0?"y":"x";u[R]+=P[ne]*re})}return u}function Lr(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=r.boundary,o=r.rootBoundary,c=r.padding,i=r.flipVariations,s=r.allowedAutoPlacements,f=s===void 0?bt:s,l=me(a),x=l?i?lt:lt.filter(function(k){return me(k)===l}):Ce,C=x.filter(function(k){return f.indexOf(k)>=0});C.length===0&&(C=x);var p=C.reduce(function(k,y){return k[y]=Oe(e,{placement:y,boundary:n,rootBoundary:o,padding:c})[G(y)],k},{});return Object.keys(p).sort(function(k,y){return p[k]-p[y]})}function Nr(e){if(G(e)===Fe)return[];var t=Re(e);return[ft(e),t,ft(t)]}function Ir(e){var t=e.state,r=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var n=r.mainAxis,o=n===void 0?!0:n,c=r.altAxis,i=c===void 0?!0:c,s=r.fallbackPlacements,f=r.padding,l=r.boundary,x=r.rootBoundary,C=r.altBoundary,p=r.flipVariations,k=p===void 0?!0:p,y=r.allowedAutoPlacements,w=t.options.placement,B=G(w),D=B===w,$=s||(D||!k?[Re(w)]:Nr(w)),g=[w].concat($).reduce(function(ue,Z){return ue.concat(G(Z)===Fe?Lr(t,{placement:Z,boundary:l,rootBoundary:x,padding:f,flipVariations:k,allowedAutoPlacements:y}):Z)},[]),h=t.rects.reference,b=t.rects.popper,M=new Map,_=!0,m=g[0],u=0;u<g.length;u++){var v=g[u],P=G(v),R=me(v)===pe,re=[j,W].indexOf(P)>=0,ne=re?"width":"height",N=Oe(t,{placement:v,boundary:l,rootBoundary:x,altBoundary:C,padding:f}),F=re?R?z:L:R?W:j;h[ne]>b[ne]&&(F=Re(F));var Ee=Re(F),ae=[];if(o&&ae.push(N[P]<=0),i&&ae.push(N[F]<=0,N[Ee]<=0),ae.every(function(ue){return ue})){m=v,_=!1;break}M.set(v,ae)}if(_)for(var Be=k?3:1,je=function(Z){var ye=g.find(function(Ae){var oe=M.get(Ae);if(oe)return oe.slice(0,Z).every(function(Le){return Le})});if(ye)return m=ye,"break"},ge=Be;ge>0;ge--){var De=je(ge);if(De==="break")break}t.placement!==m&&(t.modifiersData[a]._skip=!0,t.placement=m,t.reset=!0)}}const Vr={name:"flip",enabled:!0,phase:"main",fn:Ir,requiresIfExists:["offset"],data:{_skip:!1}};function pt(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function vt(e){return[j,z,W,L].some(function(t){return e[t]>=0})}function Hr(e){var t=e.state,r=e.name,a=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,c=Oe(t,{elementContext:"reference"}),i=Oe(t,{altBoundary:!0}),s=pt(c,a),f=pt(i,n,o),l=vt(s),x=vt(f);t.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:f,isReferenceHidden:l,hasPopperEscaped:x},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":x})}const Wr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Hr};function zr(e,t,r){var a=G(e),n=[L,j].indexOf(a)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,c=o[0],i=o[1];return c=c||0,i=(i||0)*n,[L,z].indexOf(a)>=0?{x:i,y:c}:{x:c,y:i}}function qr(e){var t=e.state,r=e.options,a=e.name,n=r.offset,o=n===void 0?[0,0]:n,c=bt.reduce(function(l,x){return l[x]=zr(x,t.rects,o),l},{}),i=c[t.placement],s=i.x,f=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=f),t.modifiersData[a]=c}const Fr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qr};function Yr(e){var t=e.state,r=e.name;t.modifiersData[r]=Dt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ur={name:"popperOffsets",enabled:!0,phase:"read",fn:Yr,data:{}};function Xr(e){return e==="x"?"y":"x"}function Gr(e){var t=e.state,r=e.options,a=e.name,n=r.mainAxis,o=n===void 0?!0:n,c=r.altAxis,i=c===void 0?!1:c,s=r.boundary,f=r.rootBoundary,l=r.altBoundary,x=r.padding,C=r.tether,p=C===void 0?!0:C,k=r.tetherOffset,y=k===void 0?0:k,w=Oe(t,{boundary:s,rootBoundary:f,padding:x,altBoundary:l}),B=G(t.placement),D=me(t.placement),$=!D,g=Xe(B),h=Xr(g),b=t.modifiersData.popperOffsets,M=t.rects.reference,_=t.rects.popper,m=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,u=typeof m=="number"?{mainAxis:m,altAxis:m}:Object.assign({mainAxis:0,altAxis:0},m),v=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(b){if(o){var R,re=g==="y"?j:L,ne=g==="y"?W:z,N=g==="y"?"height":"width",F=b[g],Ee=F+w[re],ae=F-w[ne],Be=p?-_[N]/2:0,je=D===pe?M[N]:_[N],ge=D===pe?-_[N]:-M[N],De=t.elements.arrow,ue=p&&De?Ue(De):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ct(),ye=Z[re],Ae=Z[ne],oe=xe(0,M[N],ue[N]),Le=$?M[N]/2-Be-oe-ye-u.mainAxis:je-oe-ye-u.mainAxis,At=$?-M[N]/2+Be+oe+Ae+u.mainAxis:ge+oe+Ae+u.mainAxis,Ne=t.elements.arrow&&ke(t.elements.arrow),$t=Ne?g==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,Je=(R=v==null?void 0:v[g])!=null?R:0,Mt=F+Le-Je-$t,Pt=F+At-Je,Ze=xe(p?Te(Ee,Mt):Ee,F,p?le(ae,Pt):ae);b[g]=Ze,P[g]=Ze-F}if(i){var et,Rt=g==="x"?j:L,Tt=g==="x"?W:z,ie=b[h],$e=h==="y"?"height":"width",tt=ie+w[Rt],rt=ie-w[Tt],Ie=[j,L].indexOf(B)!==-1,nt=(et=v==null?void 0:v[h])!=null?et:0,at=Ie?tt:ie-M[$e]-_[$e]-nt+u.altAxis,ot=Ie?ie+M[$e]+_[$e]-nt-u.altAxis:rt,it=p&&Ie?wr(at,ie,ot):xe(p?at:tt,ie,p?ot:rt);b[h]=it,P[h]=it-ie}t.modifiersData[a]=P}}const Kr={name:"preventOverflow",enabled:!0,phase:"main",fn:Gr,requiresIfExists:["offset"]};function Qr(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Jr(e){return e===q(e)||!H(e)?Ge(e):Qr(e)}function Zr(e){var t=e.getBoundingClientRect(),r=ve(t.width)/e.offsetWidth||1,a=ve(t.height)/e.offsetHeight||1;return r!==1||a!==1}function en(e,t,r){r===void 0&&(r=!1);var a=H(t),n=H(t)&&Zr(t),o=te(t),c=he(e,n,r),i={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(a||!a&&!r)&&((K(t)!=="body"||Qe(o))&&(i=Jr(t)),H(t)?(s=he(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):o&&(s.x=Ke(o))),{x:c.left+i.scrollLeft-s.x,y:c.top+i.scrollTop-s.y,width:c.width,height:c.height}}function tn(e){var t=new Map,r=new Set,a=[];e.forEach(function(o){t.set(o.name,o)});function n(o){r.add(o.name);var c=[].concat(o.requires||[],o.requiresIfExists||[]);c.forEach(function(i){if(!r.has(i)){var s=t.get(i);s&&n(s)}}),a.push(o)}return e.forEach(function(o){r.has(o.name)||n(o)}),a}function rn(e){var t=tn(e);return pr.reduce(function(r,a){return r.concat(t.filter(function(n){return n.phase===a}))},[])}function nn(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function an(e){var t=e.reduce(function(r,a){var n=r[a.name];return r[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,r},{});return Object.keys(t).map(function(r){return t[r]})}var ht={placement:"bottom",modifiers:[],strategy:"absolute"};function mt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function on(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,a=r===void 0?[]:r,n=t.defaultOptions,o=n===void 0?ht:n;return function(i,s,f){f===void 0&&(f=o);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},ht,o),modifiersData:{},elements:{reference:i,popper:s},attributes:{},styles:{}},x=[],C=!1,p={state:l,setOptions:function(B){var D=typeof B=="function"?B(l.options):B;y(),l.options=Object.assign({},o,l.options,D),l.scrollParents={reference:ce(i)?be(i):i.contextElement?be(i.contextElement):[],popper:be(s)};var $=rn(an([].concat(a,l.options.modifiers)));return l.orderedModifiers=$.filter(function(g){return g.enabled}),k(),p.update()},forceUpdate:function(){if(!C){var B=l.elements,D=B.reference,$=B.popper;if(mt(D,$)){l.rects={reference:en(D,ke($),l.options.strategy==="fixed"),popper:Ue($)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(u){return l.modifiersData[u.name]=Object.assign({},u.data)});for(var g=0;g<l.orderedModifiers.length;g++){if(l.reset===!0){l.reset=!1,g=-1;continue}var h=l.orderedModifiers[g],b=h.fn,M=h.options,_=M===void 0?{}:M,m=h.name;typeof b=="function"&&(l=b({state:l,options:_,name:m,instance:p})||l)}}}},update:nn(function(){return new Promise(function(w){p.forceUpdate(),w(l)})}),destroy:function(){y(),C=!0}};if(!mt(i,s))return p;p.setOptions(f).then(function(w){!C&&f.onFirstUpdate&&f.onFirstUpdate(w)});function k(){l.orderedModifiers.forEach(function(w){var B=w.name,D=w.options,$=D===void 0?{}:D,g=w.effect;if(typeof g=="function"){var h=g({state:l,name:B,instance:p,options:$}),b=function(){};x.push(h||b)}})}function y(){x.forEach(function(w){return w()}),x=[]}return p}}var sn=[Ar,Ur,Br,mr,Fr,Vr,Kr,Or,Wr],ln=on({defaultModifiers:sn});function cn(e){const t=X(!1),r=X({});return{popoverShow:t,todaysEvent:r,togglePopover:(n,o)=>{if(t.value==!1){r.value=o,t.value=!0,ln(n.target,e.value,{placement:"top"});return}t.value=!1,r.value={}}}}const un={ref:"calendarContainer",class:"min-h-full min-w-full dark:text-gray-300 text-gray-800"},fn={class:"w-full grid grid-cols-7"},dn=["onClick"],pn={class:"w-1/12 mr-2"},vn={key:0},hn={key:1},mn={key:2},gn={key:3},yn={key:4},wn={class:"w-11/12"},xn={class:"text-xs text-left tracking-tight text-clip overflow-hidden"},bn=["onClick"],_n={class:"w-1/12 mr-1"},On={class:"w-11/12"},Cn={class:"text-xs tracking-tight text-clip text-left overflow-hidden"},kn=["onClick"],En={class:"h-6 w-6 flex justify-center items-center text-xs bg-orange-600 rounded-full shadow-sm"},Bn={class:"font-medium text-white"},Dn=["onClick"],An={class:"w-1/12 mr-2"},$n={key:0},Mn={key:1},Pn={key:2},Rn={key:3},Tn={key:4},Sn={class:"w-11/12"},jn={class:"text-xs text-left tracking-tight text-clip overflow-hidden"},Ln=["onClick"],Nn={class:"w-1/12 mr-1"},In={class:"w-11/12"},Vn={class:"text-xs tracking-tight text-clip text-left overflow-hidden"},Hn=["onClick"],Wn={class:"h-6 w-6 flex justify-center items-center text-xs bg-orange-600 rounded-full shadow-sm"},zn={class:"font-medium text-white"},qn={__name:"Calendar",props:{events:{type:Object,required:!0}},setup(e){const t=qt();t.$subscribe((_,m)=>{k(),y()});const r={1:"อา",2:"จ.",3:"อ.",4:"พ.",5:"พฤ",6:"ศ.",7:"ส."},a=X(0),n=X(0),o=X(0),c=X(0),i=X(!1),s=X(0),f=X(null),l=X([]),{popoverShow:x,todaysEvent:C,togglePopover:p}=cn(f),k=()=>{a.value=new Date(t.getYear,t.getMonth+1,0).getDate()},y=()=>{o.value=new Date(t.getYear,t.getMonth,1).getDay()},w=()=>{n.value=new Date(t.getYear,t.getMonth,0).getDate()},B=()=>{let _=o.value<=5?35:42;console.log("totalGrid "+_),console.log("daysInCurrentMonth.value "+a.value),console.log("firstDayOfCurrentMonth.value "+o.value),c.value=_-a.value-o.value<0?0:_-a.value-o.value},D=_=>{let m=new Date;return t.getYear==m.getFullYear()&&t.getMonth==m.getMonth()&&_==m.getDate()},$=(_,m,u)=>t.getYear==m.substring(0,4)&&t.getMonth+(u?0:1)==m.substring(5,7)&&_==m.substring(8,10),g=(_,m,u)=>{if(!m.length)return[];let v=[];return m.forEach(P=>{if(v.length==3)return v;$(_,P.time.start,u)&&v.push(P)}),v},h=(_,m,u)=>{if(!m.length)return[];let v=[];return m.forEach(P=>{$(_,P.time.start,u)&&v.push(P)}),v},b=(_,m)=>{x.value=!1,l.value=m,s.value=_,i.value=!0},M=()=>{l.value=[],i.value=!1,s.value=0};return jt(()=>{k(),y(),w(),B()}),Lt(()=>{y(),w(),B()}),(_,m)=>(O(),E(ee,null,[d("div",un,[d("div",fn,[A(Ft),(O(),E(ee,null,se(r,u=>d("div",{key:u,class:"text-center text-sm md:text-base lg:text- font-medium border-b mt-3 border-gray-600"},I(u),1)),64)),(O(!0),E(ee,null,se(o.value,u=>fe((O(),E("div",{key:u,class:"h-16 md:h-36 w-full opacity-50 border-t border-gray-600 align-top"},[d("div",{class:Ve(["w-full h-full text-xs md:text-sm lg:text-base text-center transition-colors p-3",{"bg-slate-300 text-gray-900 font-medium  ":D(u),"hover:bg-gray-100 hover:text-gray-700":!D(u)}])},[V(I(n.value-(o.value-u))+" ",1),(O(!0),E(ee,null,se(g(n.value-(o.value-u),e.events,!0),v=>fe((O(),E("div",{key:v.title,class:"hidden md:block"},[d("div",{class:"w-full px-2 py-1 flex space-x-1 items-center whitespace-nowrap overflow-hidden hover:border hover:border-gray-200 cursor-pointer rounded-lg",onClick:P=>U(p)(P,v)},[d("div",pn,[v.type=="VACCINE"?(O(),E("div",vn,[A(T,{path:"needle",size:"18",class:"text-green-600"})])):S("",!0),v.type=="BIRTH"?(O(),E("div",hn,[A(T,{path:"cow",size:"18",class:"text-amber-600"})])):S("",!0),v.code=="REPRO_MATING"?(O(),E("div",mn,[A(T,{path:"reproduction",size:"18",class:"text-yellow-500"})])):S("",!0),v.code=="REPRO_ESTRUST"?(O(),E("div",gn,[A(T,{path:"heart",size:"14",class:"text-red-400"})])):S("",!0),v.code=="REPRO_CHECK"?(O(),E("div",yn,[A(T,{path:"stethoscope",size:"14",class:"text-blue-400"})])):S("",!0)]),d("div",wn,[d("h5",xn,I(v.title),1)])],8,dn)])),[[de,g(n.value-(o.value-u),e.events,!0).length]])),128)),h(n.value-(o.value-u),e.events,!0).length>3?(O(),E("div",{key:0,class:"hidden md:flex mt-2 w-full px-2 py-1 space-x-2 items-center whitespace-nowrap overflow-hidden hover:text-gray-800 hover:font-medium cursor-pointer rounded-sm",onClick:v=>b(n.value-(o.value-u),h(n.value-(o.value-u),e.events,!0))},[d("div",_n,[A(T,{path:"plus"})]),d("div",On,[d("h6",Cn,I(" มีอีก "+(h(n.value-(o.value-u),e.events,!0).length-3)+" รายการ"),1)])],8,bn)):S("",!0),h(n.value-(o.value-u),e.events,!0).length>0?(O(),E("div",{key:1,class:"flex md:hidden h-2/3 w-full justify-center items-center",onClick:v=>b(n.value-(o.value-u),h(n.value-(o.value-u),e.events,!0))},[d("div",En,[d("h3",Bn,I(h(n.value-(o.value-u),e.events,!0).length),1)])],8,kn)):S("",!0)],2)])),[[de,o.value>0]])),128)),(O(!0),E(ee,null,se(a.value,u=>(O(),E("div",{key:u,class:"h-16 md:h-36 w-full border-t border-gray-600 align-top"},[d("div",{class:Ve(["w-full h-full text-xs md:text-sm lg:text-base text-center transition-colors p-3",{"bg-slate-300 text-gray-900 font-medium  ":D(u),"hover:bg-gray-100 hover:text-gray-700":!D(u)}])},[V(I(u)+" ",1),(O(!0),E(ee,null,se(g(u,e.events),v=>fe((O(),E("div",{key:v.title,class:"hidden md:block"},[d("div",{class:"w-full px-2 py-1 flex space-x-1 items-center whitespace-nowrap overflow-hidden hover:border hover:border-gray-200 cursor-pointer rounded-lg",onClick:P=>b(u,h(u,e.events))},[d("div",An,[v.type=="VACCINE"?(O(),E("div",$n,[A(T,{path:"needle",size:"18",class:"text-green-600"})])):S("",!0),v.type=="BIRTH"?(O(),E("div",Mn,[A(T,{path:"cow",size:"18",class:"text-amber-600"})])):S("",!0),v.code=="REPRO_MATING"?(O(),E("div",Pn,[A(T,{path:"reproduction",size:"18",class:"text-yellow-500"})])):S("",!0),v.code=="REPRO_ESTRUST"?(O(),E("div",Rn,[A(T,{path:"heart",size:"14",class:"text-red-400"})])):S("",!0),v.code=="REPRO_CHECK"?(O(),E("div",Tn,[A(T,{path:"stethoscope",size:"14",class:"text-blue-400"})])):S("",!0)]),d("div",Sn,[d("h5",jn,I(v.title),1)])],8,Dn)])),[[de,g(u,e.events).length]])),128)),h(u,e.events).length>3?(O(),E("div",{key:0,class:"hidden md:flex mt-2 w-full px-2 py-1 space-x-2 items-center whitespace-nowrap overflow-hidden hover:text-gray-800 hover:font-medium cursor-pointer rounded-sm",onClick:v=>b(u,h(u,e.events))},[d("div",Nn,[A(T,{path:"plus"})]),d("div",In,[d("h6",Vn,I(" มีอีก "+(h(u,e.events).length-3)+" รายการ"),1)])],8,Ln)):S("",!0),h(u,e.events).length>0?(O(),E("div",{key:1,class:"flex md:hidden h-2/3 w-full justify-center items-center",onClick:v=>b(u,h(u,e.events))},[d("div",Wn,[d("h3",zn,I(h(u,e.events).length),1)])],8,Hn)):S("",!0)],2)]))),128)),(O(!0),E(ee,null,se(c.value,u=>fe((O(),E("div",{key:u,class:"h-16 md:h-36 w-full opacity-50"})),[[de,c.value>0]])),128))]),A(wt,{type:"justify-between w-full ",class:"md:hidden"},{default:Q(()=>[A(T,{path:"chevronLeft",size:"30",class:"cursor-pointer hover:text-gray-300",onClick:m[0]||(m[0]=u=>U(t).decrementMonth(1))}),A(T,{path:"chevronRight",size:"30",class:"cursor-pointer hover:text-gray-300",onClick:m[1]||(m[1]=u=>U(t).incrementMonth(1))})]),_:1})],512),A(tr,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=u=>i.value=u),onCloseModal:M,onTogglePopover:U(p),day:s.value,month:U(t).getMonth,year:U(t).getYear,events:l.value},null,8,["modelValue","onTogglePopover","day","month","year","events"]),d("div",{ref_key:"popoverRef",ref:f,class:Ve([{hidden:!U(x),block:U(x)},"bg-gray-100 mb-3 block z-50 max-w-xs rounded-lg shadow-md"])},[Nt(_.$slots,"eventDialog",{eventDialogData:U(C),closeEventDialog:U(p)},void 0,!0)],2)],64))}},Fn=qe(qn,[["__scopeId","data-v-91345a67"]]),Yn={data(){return{loading:!1,events:[],user:{},urlAuth:"https://notify-bot.line.me/oauth/authorize?response_type=code&client_id=oXiT9LVmeywPufRQwwlUfV&redirect_uri=https://cow-engine-mongo.fly.dev/line/redirect&scope=notify&state="}},components:{SectionMain:It,BaseButton:He,LayoutAuthenticated:Vt,BaseButtons:gt,BaseButton:He,SectionTitle:zt,BaseLevel:wt,CardBox:yt,Calendar:Fn},created(){this.getUser(),this.getNotificationCalendar()},methods:{async getNotificationCalendar(){this.loading=!0;const e=await Yt.getCalendar();e.data&&(this.events=Ht.orderBy(e.data.events,"date"),this.loading=!1)},async getUser(){const e=await Wt.user();e.data&&(this.user=e.data.user,this.urlAuth+=this.user.username)}}},Un={key:0},Xn=d("div",{class:"text-lg"},[d("div",{class:"py-2 px-5"},[V(" 1. เพิ่มเพื่อน "),d("span",{class:"text-green-500 font-bold"},"LINE Notify"),V(" ใน "),d("span",{class:"text-green-300 font-bold"},"LINE")]),d("div",{class:"py-2 px-5"},[V(" 2. กดปุ่ม "),d("u",{class:"text-blue-400"},"เชื่อมต่อ LINE"),V(" ด้านล่าง เพื่อเชื่อมต่อการแจ้งเตือนเข้า LINE ")]),d("div",{class:"py-2 px-5"},[V(" 3. เลือกกลุ่มที่มีอยู่แล้วหรือสร้างกลุ่มใหม่หรือเลือกส่งหาตัวเองใน "),d("span",{class:"text-green-300 font-bold"},"LINE")]),d("div",{class:"py-2 px-5"},[V(" 4. เชิญ "),d("span",{class:"text-green-500 font-bold"},"LINE Notify"),V(" เข้ากลุ่มที่ได้เลือกไว้ ")]),d("div",{class:"py-2 px-5"},[V(" 5. เมื่อเชื่อมต่อสำเร็จระบบจะส่งข้อความเข้ากลุ่มใน "),d("span",{class:"text-green-300 font-bold"},"LINE"),V(" ว่า "),d("i",{class:"font-light"},"`` เชื่อมต่อสำเร็จ ``")]),d("div",{class:"py-2 px-5"}," 6. กลับมาที่ระบบแล้วรีเฟรชอีกครั้ง ")],-1);function Gn(e,t,r,a,n,o){const c=Y("SectionTitle"),i=Y("BaseButton"),s=Y("BaseButtons"),f=Y("Calendar"),l=Y("CardBox"),x=Y("SectionMain"),C=Y("LayoutAuthenticated");return O(),Pe(C,null,{default:Q(()=>[A(x,null,{default:Q(()=>{var p,k,y,w;return[!((k=(p=n.user)==null?void 0:p.farm)!=null&&k.lineToken)&&!n.loading?(O(),E("div",Un,[A(c,{class:"text-2xl"},{default:Q(()=>[V(" เชื่อมต่อ LINE Notify เพื่อรับการแจ้งเตือน ")]),_:1}),Xn,A(s,{type:"justify-center",class:"mt-3"},{default:Q(()=>[A(i,{icon:"connection",class:"bg-gradient-to-r from-emerald-500 to-lime-600",label:"เชื่อมต่อ LINE",target:"_blank",href:n.urlAuth},null,8,["href"])]),_:1})])):(w=(y=n.user)==null?void 0:y.farm)!=null&&w.lineToken&&!n.loading?(O(),Pe(l,{key:1,title:"ตารางกำหนดการแจ้งเตือน","header-icon":""},{default:Q(()=>[A(f,{events:n.events},null,8,["events"])]),_:1})):(O(),Pe(l,{key:2,loading:""}))]}),_:1})]),_:1})}const ta=qe(Yn,[["render",Gn]]);export{ta as default};
