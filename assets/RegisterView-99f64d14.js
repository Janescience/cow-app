import{r as p,a as g,c as b,w as a,u as x,b as N,o as V,d as e,_ as j,n as C,e as k,f as d,g as S,h as i,i as c,j as q,t as U,k as B,l as R,m as A,p as z,q as m,v as D,x as M,s as _,A as O}from"./index-ed6d00fb.js";import{_ as T,a as E}from"./SectionFullScreen-261e6a82.js";import{_ as f}from"./FormField-f6d2afe6.js";import{_ as F}from"./SectionTitle-9be75ca2.js";const G=_("a",{href:"/login",class:"ml-1 text-blue-500"},[_("u",null,"เข้าสู่ระบบ")],-1),H=_("p",null,"สร้างบัญชีสำเร็จ ต้องการเข้าสู่ระบบหรือไม่ ? ",-1),Q={__name:"RegisterView",setup(I){const s=p({username:"",password:"",farmName:""}),o=g(!1),r=g(!1),n=p({message:""}),w=x(),y=N(),$=async()=>{n.message="",(await O.register(s)).data&&(r.value=!0)},h=()=>{o.value=!0,n.message="",y.dispatch("auth/login",{username:s.username,password:s.password}).then(u=>{w.push("/dashboard")}).catch(u=>{n.message=u.response.data.message,o.value=!1})};return(u,l)=>(V(),b(T,null,{default:a(()=>[e(E,{bg:"login"},{default:a(({cardClass:v})=>[e(j,{class:C(v),form:"",title:"","header-icon":"",onSubmit:k($,["prevent"])},{default:a(()=>[e(d,{type:"justify-center"},{default:a(()=>[e(S,{avatar:"/image/cow-logo.jpg",class:"w-28",username:"logo"})]),_:1}),e(F,null,{default:a(()=>[i(" ระบบจัดการฟาร์มโคนม ")]),_:1}),e(d,{type:"justify-center",class:"text-lg"},{default:a(()=>[i(" สร้างบัญชี ")]),_:1}),e(d,{type:"justify-center",class:"text-sm"},{default:a(()=>[i(" มีบัญชีแล้ว ? "),G]),_:1}),e(f,{label:"ชื่อผู้ใช้",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=t=>s.username=t),icon:"account",name:"login",required:"",autocomplete:"username"},null,8,["modelValue"])]),_:1}),e(f,{label:"รหัสผ่าน",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=t=>s.password=t),icon:"asterisk",type:"password",name:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),e(f,{label:"ชื่อฟาร์ม",help:"* ห้ามว่าง"},{default:a(()=>[e(c,{modelValue:s.farmName,"onUpdate:modelValue":l[2]||(l[2]=t=>s.farmName=t),icon:"barn",required:""},null,8,["modelValue"])]),_:1}),n.message?(V(),b(q,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[i(U(n.message),1)]),_:1})):B("",!0),e(R),e(A,{type:"justify-center"},{default:a(()=>[e(z,{type:"submit",color:"info",label:"สร้างบัญชี",loading:m(o),disabled:m(o)},null,8,["loading","disabled"])]),_:1})]),_:2},1032,["class","onSubmit"]),e(D,{modelValue:m(r),"onUpdate:modelValue":l[3]||(l[3]=t=>M(r)?r.value=t:null),title:"ยืนยันอีกครั้ง","button-label":"ตกลง",onConfirm:h,"has-cancel":"","has-button":"",loading:m(o)},{default:a(()=>[H]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}))}};export{Q as default};
