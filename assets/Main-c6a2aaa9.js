import{z as f,B as o,C as h,D as _,E as b,c as S,w as l,F as r,o as g,d as n}from"./index-7e77f046.js";import{C as w}from"./Criteria-b84776d4.js";import{R as y}from"./report-5544f2d4.js";import{T as M}from"./alert-301ef7ab.js";import"./FormField-1d1bae5c.js";import"./FormCheckRadioPicker-b78afa5f.js";import"./Cow-84d5c4ed.js";import"./cow-fc9434dc.js";import"./Vaccine-d088ef86.js";const x={data(){return{forms:[{label:"ปี",value:"year",type:"number",required:!0},{label:"เดือน ตั้งแต่",value:"monthFrom",type:"number",required:!0},{label:"เดือน ถึง",value:"monthTo",type:"number",required:!0}],search:{year:o().format("YYYY"),monthFrom:o().subtract(1,"months").format("MM"),monthTo:o().format("MM")},loading:!1}},components:{SectionMain:h,LayoutAuthenticated:_,SectionTitleBarSub:b,Criteria:w},methods:{async exportExcel(i){this.loading=!0;const t=await y.rawMilk(i);if(console.log(t),t.data.size<=4)M.fire({icon:"warning",title:"ไม่พบข้อมูล"});else{const s=window.URL.createObjectURL(new Blob([t.data])),e=document.createElement("a");e.href=s,e.setAttribute("download","ผลลิตน้ำนมดิบ ปี "+this.search.year+" "+o().format("DDMMYYYYHHmm")+".xlsx"),document.body.appendChild(e),e.click(),e.remove()}this.loading=!1},reset(){this.search.cow=null,this.search.date=null}}};function C(i,t,s,e,a,c){const m=r("SectionTitleBarSub"),u=r("Criteria"),d=r("SectionMain"),p=r("LayoutAuthenticated");return g(),S(p,null,{default:l(()=>[n(d,null,{default:l(()=>[n(m,{icon:"water",title:"ผลผลิตน้ำนมดิบ"}),n(u,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:c.exportExcel,onReset:c.reset,forms:a.forms,search:a.search,btnSubmitLabel:"ออกรายงาน",btnLoading:a.loading,collapse:!1},null,8,["onSearch","onReset","forms","search","btnLoading"])]),_:1})]),_:1})}const q=f(x,[["render",C]]);export{q as default};
