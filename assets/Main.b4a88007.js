import{a0 as p,Z as d,N as y,a1 as m,O as S,l as F,_ as N,k as E,R,g as U,h as L,e as q,Q as n,H as k,T as B,o as V,c as Y,w as r,b as l,p as O,i as H,t as A,j as I,d as Q,S as z,P,V as Z}from"./index.bb5a4a15.js";import{D as j,T as G,a as J}from"./Criteria.c3f83dec.js";import{_ as K}from"./BaseButtons.6dd2a442.js";import{_ as W}from"./FormField.0acb6139.js";import{a as D}from"./auth-header.1fabd503.js";import"./CardBoxModal.b219d5aa.js";const M=t=>t==="create"?[{id:1,label:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C"},{id:2,label:"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E23\u0E23\u0E20\u0E4C"},{id:3,label:"\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01\u0E41\u0E25\u0E49\u0E27"},{id:4,label:"\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"}]:[{id:"",label:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{id:1,label:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C"},{id:2,label:"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E23\u0E23\u0E20\u0E4C"},{id:3,label:"\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01\u0E41\u0E25\u0E49\u0E27"},{id:4,label:"\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"}],C=t=>t==="create"?[{id:1,label:"\u0E1C\u0E34\u0E14\u0E1B\u0E01\u0E15\u0E34"},{id:2,label:"\u0E44\u0E02\u0E48\u0E40\u0E25\u0E47\u0E01"},{id:3,label:"\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2D\u0E1A"},{id:4,label:"F - \u0E0B\u0E49\u0E32\u0E22"},{id:5,label:"F - \u0E02\u0E27\u0E32"}]:[{id:"",label:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{id:1,label:"\u0E1C\u0E34\u0E14\u0E1B\u0E01\u0E15\u0E34"},{id:2,label:"\u0E44\u0E02\u0E48\u0E40\u0E25\u0E47\u0E01"},{id:3,label:"\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2D\u0E1A"},{id:4,label:"F - \u0E0B\u0E49\u0E32\u0E22"},{id:5,label:"F - \u0E02\u0E27\u0E32"}];async function X(t={}){let e="?";if(t.farm&&(e=e+`farm=${t.farm}&`),t.cow&&(e=e+`cow=${t.cow}&`),t.loginDate){const i=d(new Date(t.loginDate)).format("YYYY-MM-DD");e=e+`loginDate=${i}&`}if(t.estrusDate){const i=d(new Date(t.estrusDate)).format("YYYY-MM-DD");e=e+`estrusDate=${i}&`}if(t.matingDate){const i=d(new Date(t.matingDate)).format("YYYY-MM-DD");e=e+`matingDate=${i}&`}if(t.checkDate){const i=d(new Date(t.checkDate)).format("YYYY-MM-DD");e=e+`checkDate=${i}&`}return t.status&&(e=e+`status=${t.status}&`),t.result&&(e=e+`result=${t.result}&`),t?e.replace(/&*$/,""):""}class ${async all(e){const i=await X(e);return p.get("/reproduction"+i,{headers:D()}).then(b=>b)}get(e){return p.get(`/reproduction/${e}`,{headers:D()})}create(e){return e.birthDate&&(e.birthDate=d(new Date(e.birthDate)).format("YYYY-MM-DD")),e.loginDate&&(e.loginDate=d(new Date(e.loginDate)).format("YYYY-MM-DD")),e.estrusDate&&(e.estrusDate=d(new Date(e.estrusDate)).format("YYYY-MM-DD")),e.matingDate&&(e.matingDate=d(new Date(e.matingDate)).format("YYYY-MM-DD")),e.checkDate&&(e.checkDate=d(new Date(e.checkDate)).format("YYYY-MM-DD")),p.post("/reproduction",e,{headers:D()})}delete(e){return p.delete(`/reproduction/${e}`,{headers:D()})}update(e,i){return p.put(`/reproduction/${e}`,i,{headers:D()})}}var g=new $;const ee={data(){return{reproduct:{cow:null,loginDate:new Date,estrusDate:m(new Date,21),matingDate:m(new Date,21),checkDate:m(new Date,42),dad:"",howTo:"",status:1,result:3,farm:S().farm._id},status:M("create"),result:C("create"),loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{"reproduct.loginDate"(t){this.reproduct.estrusDate=m(t,21)},"reproduct.estrusDate"(t){this.reproduct.matingDate=t},"reproduct.matingDate"(t){this.reproduct.checkDate=m(t,21)},dataEdit:{handler(t,e){t!=null&&this.mode=="edit"&&(this.reproduct=t,this.reproduct.loginDate=new Date(t.loginDate),this.reproduct.estrusDate=new Date(t.estrusDate),this.reproduct.matingDate=new Date(t.matingDate),this.reproduct.checkDate=new Date(t.loginDate))},deep:!0}},methods:{clear(){var t;this.mode==="edit"&&this.$emit("update:dataEdit",null),this.reproduct.cow=null,this.reproduct.loginDate=new Date,this.reproduct.estrusDate=m(new Date,21),this.reproduct.matingDate=m(new Date,21),this.reproduct.checkDate=m(new Date,42),this.reproduct.dad="",this.reproduct.howTo="",this.reproduct.status=1,this.reproduct.result="",(t=this.reproduct)==null||delete t._id},confirmCancel(t){this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await g.create(this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")):await g.update(this.reproduct._id,this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"))}catch(t){console.error("Error : ",t),this.loading=!1,this.alert=t.response.data.message}}},components:{BaseButton:F,BaseButtons:K,CardBox:N,BaseDivider:E,OverlayLayer:R,FormField:W,FormControl:U,NotificationBar:L,BaseLevel:q,DDLCow:j},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},dataEdit:{type:Object,default:null}}},te={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 mt-1"};function ae(t,e,i,b,a,s){const w=n("DDLCow"),u=n("FormField"),c=n("FormControl"),_=n("NotificationBar"),v=n("BaseDivider"),f=n("BaseButton"),h=n("BaseButtons"),T=n("CardBox"),x=n("OverlayLayer");return k((V(),Y(x,null,{default:r(()=>[k(l(T,{title:i.mode==="create"?"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C":"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"shadow-lg w-full overflow-y-auto lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:Q(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:r(()=>[O("div",te,[l(u,{label:"\u0E42\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[l(w,{modelValue:a.reproduct.cow,"onUpdate:modelValue":e[0]||(e[0]=o=>a.reproduct.cow=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:""},{default:r(()=>[l(c,{modelValue:a.reproduct.dad,"onUpdate:modelValue":e[1]||(e[1]=o=>a.reproduct.dad=o),icon:"genderMale"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30"},{default:r(()=>[l(c,{modelValue:a.reproduct.status,"onUpdate:modelValue":e[2]||(e[2]=o=>a.reproduct.status=o),options:a.status},null,8,["modelValue","options"])]),_:1}),l(u,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[l(c,{modelValue:a.reproduct.loginDate,"onUpdate:modelValue":e[3]||(e[3]=o=>a.reproduct.loginDate=o),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u0E1C\u0E25"},{default:r(()=>[l(c,{modelValue:a.reproduct.result,"onUpdate:modelValue":e[4]||(e[4]=o=>a.reproduct.result=o),options:a.result},null,8,["modelValue","options"])]),_:1}),l(u,{label:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32",help:""},{default:r(()=>[l(c,{modelValue:a.reproduct.howTo,"onUpdate:modelValue":e[5]||(e[5]=o=>a.reproduct.howTo=o),icon:"doctor"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C + 21 \u0E27\u0E31\u0E19)"},{default:r(()=>[l(c,{modelValue:a.reproduct.estrusDate,"onUpdate:modelValue":e[6]||(e[6]=o=>a.reproduct.estrusDate=o),icon:"calendar",type:"date","lower-limit":a.reproduct.loginDate,required:""},null,8,["modelValue","lower-limit"])]),_:1}),l(u,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E40\u0E14\u0E35\u0E22\u0E27\u0E01\u0E31\u0E19\u0E01\u0E31\u0E1A \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14)"},{default:r(()=>[l(c,{modelValue:a.reproduct.matingDate,"onUpdate:modelValue":e[7]||(e[7]=o=>a.reproduct.matingDate=o),icon:"calendar",type:"date","lower-limit":a.reproduct.estrusDate,required:""},null,8,["modelValue","lower-limit"])]),_:1}),l(u,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C + 21 \u0E27\u0E31\u0E19)"},{default:r(()=>[l(c,{modelValue:a.reproduct.checkDate,"onUpdate:modelValue":e[8]||(e[8]=o=>a.reproduct.checkDate=o),icon:"calendar",type:"date","lower-limit":a.reproduct.matingDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})]),a.alert?(V(),Y(_,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:r(()=>[H(A(a.alert),1)]),_:1})):I("",!0),l(v),l(h,{type:"justify-center"},{default:r(()=>[l(f,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:a.loading},null,8,["loading"]),l(f,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[B,s.value]])]),_:1},512)),[[B,s.value]])}var le=y(ee,[["render",ae]]);const oe={data(){return{openModal:!1,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",value:"status",options:M()},{label:"\u0E1C\u0E25",value:"result",options:C()},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"loginDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",value:"estrusDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"matingDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",value:"checkDate",icon:"calendar",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:"",farm:S().farm._id},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48",class:"text-center",value:"seq"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"text-center",value:"loginDate",type:"date"},{label:"\u0E1C\u0E25",func:t=>C()[t.result].label},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",class:"text-center",value:"estrusDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"text-center",value:"matingDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",class:"text-center",value:"checkDate",type:"date"},{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"dad"},{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",func:t=>M()[t.status].label},{label:"\u0E27\u0E34\u0E18\u0E35\u0E23\u0E31\u0E01\u0E29\u0E32",value:"howTo"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger",condition:t=>t.status!="2"&&t.status!="3"},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning",condition:t=>t.status!="2"&&t.status!="3"}]}},components:{SectionMain:z,LayoutAuthenticated:P,SectionTitleBarSub:Z,Table:G,Modal:le,Criteria:J},created(){this.getReproductions()},methods:{async getReproductions(t){this.loading=!0;const e=await g.all(t);this.items=[],e.data&&(this.items=e.data.reproducts),this.loading=!1},async remove(t){this.loading=!0,(await g.delete(t)).data&&this.getReproductions(),this.loading=!1},edit(t){this.dataEdit=t,this.dataEdit.cow=t.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null}}};function re(t,e,i,b,a,s){const w=n("SectionTitleBarSub"),u=n("Modal"),c=n("Criteria"),_=n("Table"),v=n("SectionMain"),f=n("LayoutAuthenticated");return V(),Y(f,null,{default:r(()=>[l(v,null,{default:r(()=>[l(w,{icon:"reproduction",title:"\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",btnText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C","has-btn-add":"",onOpenModal:e[0]||(e[0]=h=>{a.mode="create",a.openModal=!0})}),l(u,{modelValue:a.openModal,"onUpdate:modelValue":e[1]||(e[1]=h=>a.openModal=h),mode:a.mode,dataEdit:a.dataEdit,onConfirm:s.getReproductions,onCancel:s.getReproductions},null,8,["modelValue","mode","dataEdit","onConfirm","onCancel"]),l(c,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getReproductions,onReset:s.reset,forms:a.forms,search:a.search},null,8,["onSearch","onReset","forms","search"]),l(_,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C","has-checkbox":"","checked-data":a.checked,items:a.items,datas:a.datas,buttons:a.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:t.removeSelected,loading:a.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var me=y(oe,[["render",re]]);export{me as default};
