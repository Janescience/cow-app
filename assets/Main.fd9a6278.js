import{N as F,a1 as M,l as U,_ as O,k as R,R as q,g as E,h as I,e as W,U as H,Q as n,H as C,T as V,o as p,c as g,w as l,b as r,p as P,i as b,t as f,j as Y,d as z,a0 as D,Z as d,O as Q,S as j,P as Z,V as G}from"./index.bb5a4a15.js";import{D as J,T as K,a as X}from"./Criteria.c3f83dec.js";import{_ as $}from"./BaseButtons.6dd2a442.js";import{_ as ee,a as te}from"./FormField.0acb6139.js";import{g as N}from"./age-calculate.613305e3.js";import{a as _}from"./auth-header.1fabd503.js";import"./CardBoxModal.b219d5aa.js";const ae={data(){return{create:{sex:"F",overgrown:"N",date:new Date,placentaDrugDate:new Date,uterusWashDate:M(new Date,14)},show:{cow:null,seq:""},loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{data(t){t&&(this.show=t)},"create.date"(t){this.create.placentaDrugDate=t},"create.placentaDrugDate"(t){this.create.uterusWashDate=M(t,14)}},methods:{clear(){this.create.sex="",this.create.overgrown="",this.create.date=new Date,this.create.placentaDrugDate=new Date,this.create.uterusWashDate=M(new Date,14)},confirmCancel(t){this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert=""},calAge(t){return N(t)}},components:{BaseButton:U,BaseButtons:$,CardBox:O,BaseDivider:R,OverlayLayer:q,FormField:ee,FormControl:E,NotificationBar:I,BaseLevel:W,DDLCow:J,FormCheckRadioPicker:te,BaseIcon:H},props:{modelValue:{type:[String,Number,Boolean],default:null},data:{type:Object,default:null}}},re={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"};function oe(t,e,i,v,a,s){const B=n("BaseIcon"),m=n("BaseLevel"),h=n("FormControl"),u=n("FormField"),w=n("FormCheckRadioPicker"),y=n("NotificationBar"),k=n("BaseDivider"),x=n("BaseButton"),L=n("BaseButtons"),T=n("CardBox"),A=n("OverlayLayer");return C((p(),g(A,null,{default:l(()=>[C(r(T,{title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",class:"shadow-lg w-full overflow-y-auto lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:z(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:l(()=>[P("div",re,[r(m,{type:"justify-start"},{default:l(()=>{var o,c;return[r(B,{path:"cow",size:"24",class:"mr-3"}),b(f((o=a.show.cow)==null?void 0:o.code)+" : "+f((c=a.show.cow)==null?void 0:c.name),1)]}),_:1}),r(m,{type:"justify-start"},{default:l(()=>{var o,c;return[b(" \u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48 : "+f((c=(o=a.show)==null?void 0:o.reproduction)==null?void 0:c.seq),1)]}),_:1}),r(m,{type:"justify-start"},{default:l(()=>{var o,c;return[b(" \u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C : "+f(s.calAge((c=(o=a.show)==null?void 0:o.reproduction)==null?void 0:c.checkDate)),1)]}),_:1}),r(u,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:l(()=>[r(h,{modelValue:a.create.date,"onUpdate:modelValue":e[0]||(e[0]=o=>a.create.date=o),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),r(u,{label:"\u0E40\u0E1E\u0E28",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:l(()=>[r(w,{modelValue:a.create.sex,"onUpdate:modelValue":e[1]||(e[1]=o=>a.create.sex=o),type:"radio",options:{M:"\u0E40\u0E1E\u0E28\u0E1C\u0E39\u0E49",F:"\u0E40\u0E1E\u0E28\u0E40\u0E21\u0E35\u0E22"}},null,8,["modelValue"])]),_:1}),r(u,{label:"\u0E23\u0E01",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:l(()=>[r(w,{modelValue:a.create.overgrown,"onUpdate:modelValue":e[2]||(e[2]=o=>a.create.overgrown=o),type:"radio",options:{Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}},null,8,["modelValue"])]),_:1}),a.create.overgrown==="Y"?(p(),g(u,{key:0,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A"},{default:l(()=>[r(h,{modelValue:a.create.placentaDrugDate,"onUpdate:modelValue":e[3]||(e[3]=o=>a.create.placentaDrugDate=o),icon:"calendar",type:"date","lower-limit":a.create.date},null,8,["modelValue","lower-limit"])]),_:1})):Y("",!0),a.create.overgrown==="Y"?(p(),g(u,{key:1,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01"},{default:l(()=>[r(h,{modelValue:a.create.uterusWashDate,"onUpdate:modelValue":e[4]||(e[4]=o=>a.create.uterusWashDate=o),icon:"calendar",type:"date","lower-limit":a.create.placentaDrugDate},null,8,["modelValue","lower-limit"])]),_:1})):Y("",!0)]),a.alert?(p(),g(y,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:l(()=>[b(f(a.alert),1)]),_:1})):Y("",!0),r(k),r(L,{type:"justify-center"},{default:l(()=>[r(x,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:a.loading},null,8,["loading"]),r(x,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit","onHeaderIconClick"]),[[V,s.value]])]),_:1},512)),[[V,s.value]])}var ne=F(ae,[["render",oe]]);async function le(t={}){let e="?";if(t.farm&&(e=e+`farm=${t.farm}&`),t.cow&&(e=e+`cow=${t.cow}&`),t.date){const i=d(new Date(t.date)).format("YYYY-MM-DD");e=e+`date=${i}&`}return t.sex&&(e=e+`sex=${t.sex}&`),t?e.replace(/&*$/,""):""}class se{async all(e){const i=await le(e);return D.get("/birth"+i,{headers:_()}).then(v=>v)}get(e){return D.get(`/birth/${e}`,{headers:_()})}create(e){return e.birthDate&&(e.birthDate=d(new Date(e.birthDate)).format("YYYY-MM-DD")),e.loginDate&&(e.loginDate=d(new Date(e.loginDate)).format("YYYY-MM-DD")),e.estrusDate&&(e.estrusDate=d(new Date(e.estrusDate)).format("YYYY-MM-DD")),e.matingDate&&(e.matingDate=d(new Date(e.matingDate)).format("YYYY-MM-DD")),e.checkDate&&(e.checkDate=d(new Date(e.checkDate)).format("YYYY-MM-DD")),D.post("/birth",e,{headers:_()})}delete(e){return D.delete(`/birth/${e}`,{headers:_()})}update(e,i){return D.put(`/birth/${e}`,i,{headers:_()})}}var S=new se;const ce=()=>({M:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49",F:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}),ie=()=>({Y:"\u0E04\u0E49\u0E32\u0E07",N:"\u0E44\u0E21\u0E48\u0E04\u0E49\u0E32\u0E07"}),ue={data(){return{openModal:!1,birthData:null,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E40\u0E1E\u0E28",value:"sex",type:"radio",options:{"":"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",M:"\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49",F:"\u0E15\u0E31\u0E27\u0E40\u0E21\u0E35\u0E22"}},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",value:"date",icon:"calendar",type:"date"}],search:{cow:null,date:null,sex:"",farm:Q().farm._id},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"date"},label:{value:"cow.name"}},datas:[{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07\u0E04\u0E23\u0E23\u0E20\u0E4C",class:"text-center",value:"reproduction.checkDate",type:"date"},{label:"\u0E2D\u0E32\u0E22\u0E38\u0E04\u0E23\u0E23\u0E20\u0E4C",func:t=>{var e;return this.calAge((e=t==null?void 0:t.reproduction)==null?void 0:e.checkDate)}},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E25\u0E2D\u0E14",class:"text-center",value:"date",type:"date"},{label:"\u0E40\u0E1E\u0E28",class:"text-center",func:t=>ce()[t.sex]},{label:"\u0E23\u0E01\u0E04\u0E49\u0E32\u0E07",class:"text-center",func:t=>ie()[t.overgrown]},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E22\u0E32\u0E02\u0E31\u0E1A",class:"text-center",value:"drugDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E25\u0E49\u0E32\u0E07\u0E21\u0E14\u0E25\u0E39\u0E01",class:"text-center",value:"washDate",type:"date"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger",condition:t=>!t.date},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning",condition:t=>t.date},{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01",color:"info",type:"oth",func:t=>{this.openModal=!0,this.birthData=t}}]}},components:{SectionMain:j,LayoutAuthenticated:Z,SectionTitleBarSub:G,Table:K,Modal:ne,Criteria:X},created(){this.getDatas()},methods:{async getDatas(t){this.loading=!0;const e=await S.all(t);this.items=[],e.data&&(this.items=e.data.births),this.loading=!1},async remove(t){this.loading=!0,(await S.delete(t)).data&&this.getDatas(),this.loading=!1},edit(t){this.dataEdit=t,this.dataEdit.cow=t.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null,this.search.sex=null},calAge(t){return N(t)}}};function de(t,e,i,v,a,s){const B=n("SectionTitleBarSub"),m=n("Modal"),h=n("Criteria"),u=n("Table"),w=n("SectionMain"),y=n("LayoutAuthenticated");return p(),g(y,null,{default:l(()=>[r(w,null,{default:l(()=>[r(B,{icon:"babyFaceOutline",title:"\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01"}),r(m,{modelValue:a.openModal,"onUpdate:modelValue":e[0]||(e[0]=k=>a.openModal=k),data:a.birthData,onConfirm:s.getDatas},null,8,["modelValue","data","onConfirm"]),r(h,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getDatas,onReset:s.reset,forms:a.forms,search:a.search},null,8,["onSearch","onReset","forms","search"]),r(u,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E04\u0E25\u0E2D\u0E14\u0E25\u0E39\u0E01","has-checkbox":"","checked-data":a.checked,items:a.items,datas:a.datas,buttons:a.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:t.removeSelected,loading:a.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var we=F(ue,[["render",de]]);export{we as default};
