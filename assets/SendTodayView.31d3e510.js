import{L as R,M as B,N as V,O as T,P as U,S as E,Q as I,R as L,e as N,f as F,T as j,_ as H,c as y,w as b,U as g,o as d,a as m,i as e,B as i,h as f,F as w,v as D,D as k}from"./index.e82bd909.js";import{_ as Y}from"./CardBoxModal.a207ad7e.js";import{_ as O}from"./TableCheckboxCell.b3ba4da4.js";import{_ as z}from"./FormControl.79adb768.js";var K=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var t=document.activeElement,l=[],c=0;c<a.rangeCount;c++)l.push(a.getRangeAt(c));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||l.forEach(function(u){a.addRange(u)}),t&&t.focus()}},Q=K,v={"text/plain":"Text","text/html":"Url",default:"Text"},X="Copy to clipboard: #{key}, Enter";function q(a){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,t)}function G(a,t){var l,c,u,n,o,r,_=!1;t||(t={}),l=t.debug||!1;try{u=Q(),n=document.createRange(),o=document.getSelection(),r=document.createElement("span"),r.textContent=a,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",function(h){if(h.stopPropagation(),t.format)if(h.preventDefault(),typeof h.clipboardData=="undefined"){l&&console.warn("unable to use e.clipboardData"),l&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=v[t.format]||v.default;window.clipboardData.setData(C,a)}else h.clipboardData.clearData(),h.clipboardData.setData(t.format,a);t.onCopy&&(h.preventDefault(),t.onCopy(h.clipboardData))}),document.body.appendChild(r),n.selectNodeContents(r),o.addRange(n);var x=document.execCommand("copy");if(!x)throw new Error("copy command was unsuccessful");_=!0}catch(h){l&&console.error("unable to copy using execCommand: ",h),l&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",a),t.onCopy&&t.onCopy(window.clipboardData),_=!0}catch(C){l&&console.error("unable to copy using clipboardData: ",C),l&&console.error("falling back to prompt"),c=q("message"in t?t.message:X),window.prompt(c,a)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(n):o.removeAllRanges()),r&&document.body.removeChild(r),u()}return _}var J=G;const W={data(){return{perPage:10,currentPage:0,checkedRows:[],items:[],textAlert:"",modalAlert:!1,funcConfirm:Function,idConfirm:null}},created(){this.getSends()},methods:{async getSends(){let a=this.$loading.show();const t=await B.getDashboardAmountSend();t.data&&(this.items=t.data.data,this.items.map(l=>{l.sumSendPaid=l.sumSend-l.sumSendBalance,l.sumDebtPaid=l.sumDebt-l.sumDebtBalance}),a.hide())},async paid(){this.$loading.show()},async paidPartial(a){let t=this.$loading.show();const l=a.sumSendPaid,c=a.sumDebtPaid;(await B.updatePaidAmountSendByMember(a.memberId,l,c)).data&&(this.getSends(),t.hide())},countChecked(){return this.checkedRows.length>0?"(\u0E40\u0E25\u0E37\u0E2D\u0E01 "+this.checkedRows.length+" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23)":""},sum(){let a=0,t=0,l=0,c=0,u=0,n=0;return this.items.map(o=>{a+=o.sumSend,t+=o.sumDebt,u+=o.sumSend-o.sumSendBalance,n+=o.sumDebt-o.sumDebtBalance,l+=o.sumSendBalance,c+=o.sumDebtBalance}),{sumSend:a,sumDebt:t,sumSendPaid:u,sumDebtPaid:n,sumSendBalance:l,sumDebtBalance:c}},checkedSum(){let a=0,t=0,l=0;return this.checkedRows.map(c=>{a+=c.sumSend+c.sumDebt,l+=c.sumSend-c.sumSendBalance+(c.sumDebt-c.sumDebtBalance),t+=c.sumSendBalance+c.sumDebtBalance}),{sumSend:a,sumPaid:l,sumBalance:t}},checked(a,t){a?(t.checked=!0,this.checkedRows.push(t)):(t.checked=!1,this.checkedRows=this.remove(this.checkedRows,l=>l.memberId===t.memberId))},remove(a,t){const l=[];return a.forEach(c=>{t(c)||l.push(c)}),l},confirm(a,t,l){this.textConfirm=a,this.funcConfirm=l,this.idConfirm=t,this.modalConfirm=!0},formatCurrency(a){return V(a).format(0,0)},formatDate(a){return a?T(new Date(a)).format("DD/MM/YYYY"):""},copyText(){let a="",t=1;this.items.map(l=>{a+=t+++". "+l.memberName+" = "+this.formatCurrency(l.sumSend+l.sumDebt)+(l.sumSendBalance==0&&l.sumDebtBalance==0?" \u2705":"")+`
`}),J(`
\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 ${this.formatDate(new Date)}
(\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07 + \u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07 + \u0E04\u0E48\u0E32\u0E14\u0E39\u0E41\u0E25 + \u0E04\u0E48\u0E32\u0E1B\u0E23\u0E31\u0E1A)
===========================
${a}
        `),this.modalAlert=!0,this.textAlert="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",setTimeout(()=>{this.modalAlert=!1,this.textAlert=""},1e3)}},computed:{itemsPaginated(){return this.items?this.items.slice(this.perPage*this.currentPage,this.perPage*(this.currentPage+1)):[]},numPages(){return Math.ceil((this.items?this.items.length:0)/this.perPage)},currentPageHuman(){return this.currentPage+1},pagesList(){const a=[];for(let t=0;t<this.numPages;t++)a.push(t);return a}},components:{LayoutAuthenticated:U,SectionMain:E,SectionTitleBar:I,CardBoxModal:Y,TableCheckboxCell:O,BaseLevel:L,BaseButtons:N,BaseButton:F,UserAvatar:j,CardBox:H,FormControl:z}},Z={class:"px-6 sm:px-0 mb-6 grid lg:grid-cols-4 grid-cols-1 gap-5"},$=e("div",{class:"items-center lg:col-span-3"},[e("h1",{class:"text-2xl"}," \u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49 ")],-1),ee={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},te=e("span",{class:"justify-start"},"\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E23\u0E27\u0E21 : ",-1),ae={class:"text-red-500"},se={class:"before:hidden lg:w-6"},le={class:"overflow-x-auto"},ne=e("thead",null,[e("tr",null,[e("th"),e("th"),e("th"),e("th",{class:"text-center",colspan:"3"},"\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49"),e("th",{class:"text-center",colspan:"3"},"\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E2A\u0E48\u0E07")]),e("tr",null,[e("th"),e("th"),e("th",null,"\u0E25\u0E39\u0E01\u0E41\u0E0A\u0E23\u0E4C"),e("th",{class:"text-center whitespace-nowrap"},"\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07"),e("th",{class:"text-center"},"\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"),e("th",{class:"text-center"},"\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22"),e("th",{class:"text-center whitespace-nowrap"},"\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07"),e("th",{class:"text-center"},"\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"),e("th",{class:"text-center whitespace-nowrap"},"\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22"),e("th")])],-1),ce={key:1,class:"border-b-0 lg:w-6"},oe={class:"border-b-0 lg:w-6 before:hidden"},re={"data-label":"\u0E25\u0E39\u0E01\u0E41\u0E0A\u0E23\u0E4C",class:"whitespace-nowrap"},de={"data-label":"\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07",class:"text-right whitespace-nowrap"},ue={class:"text-blue-500"},ie={class:"flex items-center grow-0 shrink-0 whitespace-nowrap","data-label":"\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"},me={"data-label":"\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22",class:"text-right whitespace-nowrap"},he={key:2,"data-label":"\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E2A\u0E48\u0E07",class:"text-right whitespace-nowrap"},fe={class:"text-orange-500"},_e={key:3,colspan:"3",class:"border-b-0 lg:w-6 text-center","data-label":"\u0E08\u0E48\u0E32\u0E22\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E2A\u0E48\u0E07"},ge={key:4,class:"flex items-center grow-0 shrink-0","data-label":"\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"},pe={key:5,"data-label":"\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22",class:"text-right whitespace-nowrap"},be={class:"lg:w-1 whitespace-nowrap"},ye=e("td",{colspan:"2"},"\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21",-1),xe={colspan:"2",class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49"},Ce={class:"text-blue-500"},ke={class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"},we={class:"text-teal-500"},De={class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22"},Se={class:"text-rose-500"},Be={class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E2A\u0E48\u0E07"},ve={class:"text-orange-500"},Pe={class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E08\u0E48\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27"},Ae={class:"text-teal-500"},Me={class:"text-right","data-label":"\u0E23\u0E27\u0E21\u0E40\u0E2B\u0E25\u0E37\u0E2D\u0E08\u0E48\u0E32\u0E22"},Re={class:"text-rose-500"},Ve={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"};function Te(a,t,l,c,u,n){const o=g("FormControl"),r=g("CardBoxModal"),_=g("BaseButton"),x=g("BaseButtons"),h=g("TableCheckboxCell"),C=g("UserAvatar"),P=g("BaseLevel"),S=g("CardBox"),A=g("SectionMain"),M=g("LayoutAuthenticated");return d(),y(M,null,{default:b(()=>[m(A,null,{default:b(()=>[e("section",Z,[$,m(o,{modelValue:a.searchMember,"onUpdate:modelValue":t[0]||(t[0]=s=>a.searchMember=s),icon:"accountSearchOutline",class:"shadow",placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E25\u0E39\u0E01\u0E41\u0E0A\u0E23\u0E4C"},null,8,["modelValue"])]),m(r,{modelValue:u.modalAlert,"onUpdate:modelValue":t[1]||(t[1]=s=>u.modalAlert=s),title:"\u0E41\u0E08\u0E49\u0E07\u0E40\u0E15\u0E37\u0E2D\u0E19","has-button":!1,class:"text-xl"},{default:b(()=>[e("p",null,i(u.textAlert),1)]),_:1},8,["modelValue"]),n.itemsPaginated.length>0?(d(),y(S,{key:0,"header-icon":"contentCopy",onHeaderIconClick:n.copyText,title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07 "+n.countChecked(),"has-table":""},{default:b(()=>[u.checkedRows.length>0?(d(),f("div",ee,[(d(!0),f(w,null,D(u.checkedRows,s=>(d(),f("span",{key:s.memberId,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700 mb-1"},i(s.memberName),1))),128)),e("table",null,[e("tbody",null,[e("tr",null,[e("td",null,[te,e("b",ae,[e("u",null,i(n.formatCurrency(n.checkedSum().sumBalance)),1)])]),e("td",se,[m(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:b(()=>[m(_,{color:"success",label:"\u0E2A\u0E48\u0E07\u0E22\u0E2D\u0E14\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",onClick:t[2]||(t[2]=s=>a.isModalActive=!0)})]),_:1})])])])])])):k("",!0),e("div",le,[e("table",null,[ne,e("tbody",null,[(d(!0),f(w,null,D(n.itemsPaginated,s=>(d(),f("tr",{key:s.memberId},[s.sumSendBalance>0||s.sumDebtBalance>0?(d(),y(h,{key:0,isChecked:s.checked,class:"text-center border-b-0 lg:w-6 before:hidden",onChecked:p=>n.checked(p,s)},null,8,["isChecked","onChecked"])):(d(),f("td",ce)),e("td",oe,[m(C,{username:s.memberId,class:"w-12 h-12 mx-auto lg:w-12 lg:h-12"},null,8,["username"])]),e("td",re,i(s.memberName),1),e("td",de,[e("b",ue,[e("u",null,i(n.formatCurrency(s.sumSend)),1)])]),e("td",ie,[m(o,{modelValue:s.sumSendPaid,"onUpdate:modelValue":p=>s.sumSendPaid=p,type:"number",icon:"cashMultiple",class:"lg:w-28 w-40 lg:flex-auto mr-2",placeholder:"\u0E08\u0E48\u0E32\u0E22\u0E22\u0E2D\u0E14\u0E2A\u0E48\u0E07\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49"},null,8,["modelValue","onUpdate:modelValue"]),s.sumSend-s.sumSendBalance>0?(d(),y(_,{key:0,color:"danger",icon:"close",label:"",class:"flex-none",small:""})):k("",!0)]),e("td",me,[e("b",null,[e("u",null,i(s.sumSendBalance>0?n.formatCurrency(s.sumSendBalance):"\u0E08\u0E48\u0E32\u0E22\u0E04\u0E23\u0E1A\u0E41\u0E25\u0E49\u0E27"),1)])]),s.sumDebt>0?(d(),f("td",he,[e("b",fe,[e("u",null,i(n.formatCurrency(s.sumDebt)),1)])])):(d(),f("td",_e,"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07")),s.sumDebt>0?(d(),f("td",ge,[m(o,{modelValue:s.sumDebtPaid,"onUpdate:modelValue":p=>s.sumDebtPaid=p,type:"number",icon:"cashMultiple",class:"lg:w-32 w-40 lg:flex-auto mr-2",placeholder:"\u0E08\u0E48\u0E32\u0E22\u0E22\u0E2D\u0E14\u0E04\u0E49\u0E32\u0E07\u0E2A\u0E48\u0E07"},null,8,["modelValue","onUpdate:modelValue"]),s.sumDebt-s.sumDebtBalance>0?(d(),y(_,{key:0,color:"danger",icon:"close",label:"",class:"flex-none",small:""})):k("",!0)])):k("",!0),s.sumDebt>0?(d(),f("td",pe,[e("b",null,[e("u",null,i(s.sumDebtBalance>0?n.formatCurrency(s.sumDebtBalance):"\u0E08\u0E48\u0E32\u0E22\u0E04\u0E23\u0E1A\u0E41\u0E25\u0E49\u0E27"),1)])])):k("",!0),e("td",be,[m(x,{type:"justify-end lg:justify-start","no-wrap":""},{default:b(()=>[m(_,{color:"info",label:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14",onClick:t[3]||(t[3]=p=>a.isModalActive=!0)}),m(_,{disabled:s.sumSendPaid>s.sumSend||s.sumDebtPaid>s.sumDebt,color:"success",label:"\u0E1A\u0E31\u0E19\u0E17\u0E35\u0E01",onClick:p=>n.paidPartial(s)},null,8,["disabled","onClick"])]),_:2},1024)])]))),128))]),e("tfoot",null,[e("tr",null,[ye,e("td",xe,[e("b",Ce,i(n.formatCurrency(n.sum().sumSend)),1)]),e("td",ke,[e("b",we,i(n.formatCurrency(n.sum().sumSendPaid)),1)]),e("td",De,[e("b",Se,i(n.formatCurrency(n.sum().sumSendBalance)),1)]),e("td",Be,[e("b",ve,i(n.formatCurrency(n.sum().sumDebt)),1)]),e("td",Pe,[e("b",Ae,i(n.formatCurrency(n.sum().sumDebtPaid)),1)]),e("td",Me,[e("b",Re,i(n.formatCurrency(n.sum().sumDebtBalance)),1)])])])])]),e("div",Ve,[m(P,null,{default:b(()=>[m(x,null,{default:b(()=>[(d(!0),f(w,null,D(n.pagesList,s=>(d(),y(_,{key:s,active:s===u.currentPage,label:s+1,small:"",onClick:p=>u.currentPage=s},null,8,["active","label","onClick"]))),128))]),_:1}),e("small",null,"Page "+i(n.currentPageHuman)+" of "+i(n.numPages),1)]),_:1})])]),_:1},8,["onHeaderIconClick","title"])):(d(),y(S,{key:1,empty:""}))]),_:1})]),_:1})}var Ne=R(W,[["render",Te]]);export{Ne as default};
