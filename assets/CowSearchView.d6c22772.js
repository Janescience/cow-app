import{N as F,e as x,Q as s,o as w,c as v,w as r,p as y,O as L,l as k,_ as E,k as A,R as j,g as M,h as R,f as Y,H as S,T as U,b as o,i as T,t as q,j as H,d as D,S as z,P,U as Q,V as G}from"./index.02896ed2.js";import{_ as I}from"./BaseButtons.564081da.js";import{_ as N}from"./FormField.d32687d2.js";import{C,D as J,T as K}from"./Cow.3933eb33.js";import"./CardBoxModal.478691e3.js";import"./auth-header.057bd6dc.js";const W={computed:{value:{get(){return this.modelValue},set(l){this.$emit("update:modelValue",l)}}},methods:{chooseImg(){let l=document.getElementById("imageUpload");l!=null&&l.click()},handleFile(l){var e=l.target.files||l.dataTransfer.files;!e.length||this.createBase64(e[0])},createBase64(l){var e=new FileReader;e.onload=p=>{this.value=p.target.result},e.readAsDataURL(l)}},components:{BaseLevel:x},props:{modelValue:{type:String,default:""}}},X=["src"];function Z(l,e,p,_,t,n){const g=s("BaseLevel");return w(),v(g,{type:"justify-center mb-1"},{default:r(()=>[y("input",{id:"imageUpload",onChange:e[0]||(e[0]=(...u)=>n.handleFile&&n.handleFile(...u)),type:"file",accept:"image/*",hidden:""},null,32),y("img",{class:"w-56 cursor-pointer rounded-lg",onClick:e[1]||(e[1]=(...u)=>n.chooseImg&&n.chooseImg(...u)),src:n.value},null,8,X)]),_:1})}var $=F(W,[["render",Z]]);const ee={data(){return{cow:{image:"../../src/assets/image/img-mockup.png",code:"",name:"",status:"1",birthDate:null,corral:"",dad:"",mom:"",farm:L().farm._id},status:[{id:1,label:"\u0E17\u0E49\u0E2D\u0E07"},{id:2,label:"\u0E19\u0E21\u0E41\u0E2B\u0E49\u0E07"},{id:3,label:"\u0E43\u0E2B\u0E49\u0E1C\u0E25\u0E1C\u0E25\u0E34\u0E15"},{id:4,label:"\u0E27\u0E31\u0E27\u0E40\u0E14\u0E47\u0E01"}],loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(l){this.$emit("update:modelValue",l)}}},watch:{dataEdit:{handler(l,e){l!=null&&this.mode=="edit"&&(this.cow=l,this.cow.image=this.cow.image?this.cow.image:"../../src/assets/image/img-mockup.png")},deep:!0}},methods:{clear(){this.$emit("update:dataEdit",null),this.cow.image="../../src/assets/image/img-mockup.png",this.cow.code="",this.cow.name="",this.cow.birthDate=null,this.cow.status=1,this.cow.corral="",this.cow.dad="",this.cow.mom="",delete this.cow._id},confirmCancel(l){this.value=!1,this.$emit(l)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await C.create(this.cow)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")):await C.update(this.cow._id,this.cow)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"))}catch(l){console.error("Error : ",l),this.loading=!1,this.alert=l.response.data.message}}},components:{BaseButton:k,BaseButtons:I,CardBox:E,BaseDivider:A,OverlayLayer:j,FormField:N,FormControl:M,NotificationBar:R,UserAvatar:Y,BaseLevel:x,ImageUpload:$},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},dataEdit:{type:Object,default:null}}},te=T(" \u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E (\u0E04\u0E25\u0E34\u0E01\u0E17\u0E35\u0E48\u0E23\u0E39\u0E1B) "),ae={class:"grid lg:grid-cols-4 grid-cols-2 gap-5 mt-3"};function oe(l,e,p,_,t,n){const g=s("ImageUpload"),u=s("BaseLevel"),c=s("FormControl"),d=s("FormField"),f=s("NotificationBar"),b=s("BaseDivider"),a=s("BaseButton"),m=s("BaseButtons"),B=s("CardBox"),V=s("OverlayLayer");return S((w(),v(V,null,{default:r(()=>[S(o(B,{title:p.mode==="create"?"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E42\u0E04":"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E42\u0E04",class:"shadow-lg w-full overflow-y-auto md:w-3/5 lg:w-1/1 z-50","header-icon":"close",modal:"",form:"",onSubmit:D(n.submit,["prevent"]),onHeaderIconClick:n.cancel},{default:r(()=>[o(g,{modelValue:t.cow.image,"onUpdate:modelValue":e[0]||(e[0]=i=>t.cow.image=i)},null,8,["modelValue"]),o(u,{type:"justify-center mb-6"},{default:r(()=>[te]),_:1}),y("div",ae,[o(d,{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(c,{modelValue:t.cow.code,"onUpdate:modelValue":e[1]||(e[1]=i=>t.cow.code=i),icon:"barcode",required:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(c,{modelValue:t.cow.name,"onUpdate:modelValue":e[2]||(e[2]=i=>t.cow.name=i),icon:"cow",required:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(c,{modelValue:t.cow.birthDate,"onUpdate:modelValue":e[3]||(e[3]=i=>t.cow.birthDate=i),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(c,{modelValue:t.cow.status,"onUpdate:modelValue":e[4]||(e[4]=i=>t.cow.status=i),options:t.status,icon:"",required:""},null,8,["modelValue","options"])]),_:1}),o(d,{label:"\u0E04\u0E2D\u0E01"},{default:r(()=>[o(c,{modelValue:t.cow.corral,"onUpdate:modelValue":e[5]||(e[5]=i=>t.cow.corral=i),icon:"barn"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C"},{default:r(()=>[o(c,{modelValue:t.cow.dad,"onUpdate:modelValue":e[6]||(e[6]=i=>t.cow.dad=i),icon:"genderMale"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E41\u0E21\u0E48\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C"},{default:r(()=>[o(c,{modelValue:t.cow.mom,"onUpdate:modelValue":e[7]||(e[7]=i=>t.cow.mom=i),icon:"genderFemale"},null,8,["modelValue"])]),_:1})]),t.alert?(w(),v(f,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:r(()=>[T(q(t.alert),1)]),_:1})):H("",!0),o(b),o(m,{type:"justify-center"},{default:r(()=>[o(a,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:t.loading},null,8,["loading"]),o(a,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:n.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[U,n.value]])]),_:1},512)),[[U,n.value]])}var le=F(ee,[["render",oe]]),se=e=>{var e=new Date(e),p=e.getYear(),_=e.getMonth(),t=e.getDate(),n=new Date,g=n.getYear(),u=n.getMonth(),c=n.getDate(),a={},m="",d=g-p;if(u>=_)var f=u-_;else{d--;var f=12+u-_}if(c>=t)var b=c-t;else{f--;var b=31+c-t;f<0&&(f=11,d--)}var a={years:d,months:f,days:b},m="";return a.years>0&&a.months>0&&a.days>0?m=a.years+" \u0E1B\u0E35 "+a.months+" \u0E40\u0E14\u0E37\u0E2D\u0E19 "+a.days+" \u0E27\u0E31\u0E19":a.years==0&&a.months==0&&a.days>0?m=a.days+" \u0E27\u0E31\u0E19":a.years>0&&a.months==0&&a.days==0?m=a.years+" \u0E1B\u0E35 (\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14)":a.years>0&&a.months>0&&a.days==0?m=a.years+" \u0E1B\u0E35 "+a.months+" \u0E40\u0E14\u0E37\u0E2D\u0E19":a.years==0&&a.months>0&&a.days>0?m=a.months+" \u0E40\u0E14\u0E37\u0E2D\u0E19 "+a.days+" \u0E27\u0E31\u0E19":a.years>0&&a.months==0&&a.days>0?m=a.years+" \u0E1B\u0E35 "+a.days+" \u0E27\u0E31\u0E19":a.years==0&&a.months>0&&a.days==0&&(m=a.months+" \u0E40\u0E14\u0E37\u0E2D\u0E19"),m};const ne={data(){return{modalCow:!1,status:[{id:"",label:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{id:1,label:"\u0E17\u0E49\u0E2D\u0E07"},{id:2,label:"\u0E19\u0E21\u0E41\u0E2B\u0E49\u0E07"},{id:3,label:"\u0E43\u0E2B\u0E49\u0E1C\u0E25\u0E1C\u0E25\u0E34\u0E15"},{id:4,label:"\u0E27\u0E31\u0E27\u0E40\u0E14\u0E47\u0E01"}],items:[],search:{code:null,status:"",birthDate:null,corral:"",flag:"Y",farm:L().farm._id},loading:!1,mode:"create",dataEdit:null,datas:[{label:"\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E",class:"text-center",value:"image",type:"image"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"name"},{label:"\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14",class:"text-center",value:"birthDate",type:"date"},{label:"\u0E2D\u0E32\u0E22\u0E38",class:"text-center",func:l=>this.calAge(l.birthDate)},{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",func:l=>this.status[l.status].label},{label:"\u0E04\u0E2D\u0E01",value:"corral"},{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"dad"},{label:"\u0E41\u0E21\u0E48\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"mom"}],button:{edit:!0,delete:!0,detail:{path:"/manage/cow/detail"}}}},components:{SectionMain:z,LayoutAuthenticated:P,BaseButton:k,BaseIcon:Q,BaseButtons:I,CardBox:E,FormControl:M,FormField:N,BaseDivider:A,DDLCow:J,CreateCowModal:le,Table:K,SectionTitleBarSub:G},created(){this.getCows()},methods:{async getCows(){this.loading=!0;const l=await C.all(this.search);this.items=[],l.data&&(this.items=l.data.cows),this.loading=!1},async removeCow(){this.loading=!0,(await C.update(this.idConfirm,{flag:"N"})).data&&this.getCows(),this.loading=!1},edit(l){this.dataEdit=l,this.mode="edit",this.dataEdit.birthDate=new Date(this.dataEdit.birthDate),this.modalCow=!0},reset(){this.search.code=null,this.search.status="",this.search.birthDate=null,this.search.corral=""},calAge(l){return se(l)}}},re={class:"grid lg:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-5"};function ie(l,e,p,_,t,n){const g=s("SectionTitleBarSub"),u=s("CreateCowModal"),c=s("DDLCow"),d=s("FormField"),f=s("FormControl"),b=s("BaseDivider"),a=s("BaseButton"),m=s("BaseButtons"),B=s("CardBox"),V=s("Table"),i=s("SectionMain"),O=s("LayoutAuthenticated");return w(),v(O,null,{default:r(()=>[o(i,null,{default:r(()=>[o(g,{icon:"cow",title:"\u0E42\u0E04",btnText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E42\u0E04","has-btn-add":"",onOpenModal:e[0]||(e[0]=h=>{t.mode="create",t.modalCow=!0})}),o(u,{modelValue:t.modalCow,"onUpdate:modelValue":e[1]||(e[1]=h=>t.modalCow=h),onConfirm:n.getCows,onCancel:n.getCows,mode:t.mode,dataEdit:t.dataEdit},null,8,["modelValue","onConfirm","onCancel","mode","dataEdit"]),o(B,{title:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E42\u0E04",icon:"",form:"",class:"mb-3","header-icon":"",onSubmit:D(n.getCows,["prevent"]),onReset:D(n.reset,["prevent"])},{default:r(()=>[y("div",re,[o(d,{label:"\u0E42\u0E04"},{default:r(()=>[o(c,{modelValue:t.search.code,"onUpdate:modelValue":e[2]||(e[2]=h=>t.search.code=h),valueType:"code"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14"},{default:r(()=>[o(f,{modelValue:t.search.birthDate,"onUpdate:modelValue":e[3]||(e[3]=h=>t.search.birthDate=h),icon:"calendar",type:"date"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30"},{default:r(()=>[o(f,{modelValue:t.search.status,"onUpdate:modelValue":e[4]||(e[4]=h=>t.search.status=h),options:t.status},null,8,["modelValue","options"])]),_:1}),o(d,{label:"\u0E04\u0E2D\u0E01"},{default:r(()=>[o(f,{modelValue:t.search.corral,"onUpdate:modelValue":e[5]||(e[5]=h=>t.search.corral=h),icon:"barn"},null,8,["modelValue"])]),_:1})]),o(b),o(m,{type:"justify-center","no-wrap":""},{default:r(()=>[o(a,{type:"submit",color:"info",label:"\u0E04\u0E49\u0E19\u0E2B\u0E32"}),o(a,{type:"reset",color:"danger",label:"\u0E25\u0E49\u0E32\u0E07"})]),_:1})]),_:1},8,["onSubmit","onReset"]),o(V,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E42\u0E04","has-checkbox":"",datas:t.datas,items:t.items,button:t.button,onEdit:n.edit,onDelete:n.removeCow},null,8,["datas","items","button","onEdit","onDelete"])]),_:1})]),_:1})}var pe=F(ne,[["render",ie]]);export{pe as default};
