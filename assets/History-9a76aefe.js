import{z as v,C as y,D as S,E as w,T as C,g as M,_ as x,f as R,m as k,n as B,c as T,w as i,F as s,o as L,d as o}from"./index-c9a4d9fd.js";import{C as A}from"./Criteria-fff5bbb8.js";import{M as V}from"./Modal-cb75bd9f.js";import{R as n}from"./reproduction-aa0cad69.js";import{a as d,r as u}from"./reproduct-4b10c1e3.js";import{T as m}from"./alert-2f84845f.js";import"./CardBoxCollapse-dc8880c5.js";import"./FormField-11b53394.js";import"./Cow-8bb62a32.js";import"./cow-9f79e87e.js";import"./Recipe-065a7d23.js";import"./Vaccine-bf53e700.js";const E={data(){return{openModal:!1,items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"สถานะ",value:"status",options:d()},{label:"ผล",value:"result",options:u()},{label:"วันที่เข้าระบบสืบพันธุ์",value:"loginDate",icon:"calendar",type:"date"},{label:"วันที่เป็นสัด",value:"estrusDate",icon:"calendar",type:"date"},{label:"วันที่ผสมพันธุ์",value:"matingDate",icon:"calendar",type:"date"},{label:"วันที่ตรวจท้อง",value:"checkDate",icon:"calendar",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,mode:"create",modalData:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"วันที่เข้าระบบสืบพันธุ์",class:"text-center",value:"loginDate",type:"date"},{label:"ผล",func:e=>u()[e.result].label},{label:"วันที่เป็นสัด",class:"text-center",value:"estrusDate",type:"date"},{label:"วันที่ผสมพันธุ์",class:"text-center",value:"matingDate",type:"date"},{label:"วันที่ตรวจท้อง",class:"text-center",value:"checkDate",type:"date"},{label:"พ่อพันธุ์",value:"dad"},{label:"สถานะ",func:e=>d()[e.status].label},{label:"วิธีรักษา",value:"howTo"}],buttons:[{label:"ลบ",type:"delete",color:"danger",condition:e=>e.status!="2"&&e.status!="3"},{label:"แก้ไข",type:"edit",color:"warning",condition:e=>e.status!="2"&&e.status!="3"}]}},components:{SectionMain:y,LayoutAuthenticated:S,SectionTitleBarSub:w,Table:C,Modal:V,Criteria:A,UserAvatar:M,CardBox:x,BaseLevel:R,BaseButtons:k,BaseButton:B},computed:{getDataCopy(){return{...this.modalData}}},created(){this.search.cow=this.$route.params.cow,this.getReproductions()},methods:{async getReproductions(){this.loading=!0;const e=await n.all(this.search);this.items=[],e.data&&(this.items=e.data.reproducts),this.loading=!1},async remove(e){this.loading=!0,(await n.delete(e)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},async removeSelected(e){this.loading=!0;let a=[];for(let r of e)a.push(r._id);(await n.deletes(a)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},edit(e){this.modalData=e,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.loginDate=null,this.search.estrusDate=null,this.search.matingDate=null,this.search.checkDate=null,this.search.status="",this.search.result="",this.getReproductions()},resetData(){this.modalData=null}}};function q(e,a,p,r,t,l){const h=s("SectionTitleBarSub"),f=s("Modal"),g=s("Criteria"),b=s("Table"),_=s("SectionMain"),D=s("LayoutAuthenticated");return L(),T(D,null,{default:i(()=>[o(_,null,{default:i(()=>[o(h,{icon:"reproduction",title:"ประวัติการผสมพันธุ์",btnText:"เพิ่มการผสมพันธุ์","has-btn-add":"",onOpenModal:a[0]||(a[0]=c=>{t.mode="create",t.openModal=!0})}),o(f,{modelValue:t.openModal,"onUpdate:modelValue":a[1]||(a[1]=c=>t.openModal=c),mode:t.mode,data:l.getDataCopy,onConfirm:l.getReproductions,onCancel:l.resetData},null,8,["modelValue","mode","data","onConfirm","onCancel"]),o(g,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:l.getReproductions,onReset:l.reset,forms:t.forms,search:t.search,btnLoading:t.loading},null,8,["onSearch","onReset","forms","search","btnLoading"]),o(b,{title:"รายการประวัติการผสมพันธุ์","has-checkbox":"","checked-data":t.checked,items:t.items,datas:t.datas,buttons:t.buttons,onEdit:l.edit,onDelete:l.remove,onDeleteSelected:l.removeSelected,loading:t.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}const W=v(E,[["render",q]]);export{W as default};
