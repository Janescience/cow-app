import{_ as k}from"./DoughnutChart-4f43fb07.js";import{c as C,_ as D,d as S}from"./BaseDivider-545ee737.js";import{_ as M}from"./SectionTitleBarSub-c85ef35f.js";import{_ as q}from"./LayoutAuthenticated-bb164c86.js";import{_ as v}from"./FormControl-acea10f8.js";import{T as B}from"./Table-b758a326.js";import{D as x}from"./dashboard-c69d6611.js";import{v as z,x as A,B as T,c as h,w as g,z as n,o as a,d as o,j as t,f as r,t as c,s as d}from"./index-99f98e20.js";import{q as O}from"./cow-dd4d495a.js";import"./UserAvatar-552fc118.js";import"./CardBoxModal-44e5529a.js";const Q={data(){return{doughnutChartData:null,lineChartColors:{primary:"#00D1B2",danger:"#FF3860"},cow:{},quality:{},rawMilkDescSort:[],rawMilkAscSort:[],rawMilkSortColumns:[{label:"รูปโค",value:"cow.image",class:"text-center",type:"image",size:12},{label:"ชื่อโค",value:"cow.name",link:"cowDetail"},{label:"น้ำนมดิบ (กก.)",class:"text-right",value:"sumMilk",type:"number"}],loading:{cow:!0,quality:!0,rawMilkSort:!0}}},components:{DoughnutChart:k,SectionMain:C,CardBox:D,SectionTitleBarSub:M,LayoutAuthenticated:q,FormControl:v,BaseIcon:S,Table:B},computed:{user(){return this.$store.state.auth.user}},created(){this.getCow(),this.getRawMilkSort(),this.getQuality()},methods:{async getCow(){this.loading.cow=!0;const s=await x.getCow();s&&(this.cow=s.data),this.doughnutChartData=this.createDoughnutChart(),this.loading.cow=!1},async getQuality(){this.loading.quality=!0;const s=await x.getQuality();s&&(this.quality=s.data),this.loading.quality=!1},async getRawMilkSort(){this.loading.rawMilkSort=!0;const s=await x.getRawMilkDescSort();s&&(this.rawMilkDescSort=s.data.desc);const l=await x.getRawMilkAscSort();l&&(this.rawMilkAscSort=l.data.asc),this.loading.rawMilkSort=!1},getDoughnutChartData(){const s=[];return Object.keys(this.cow.rawmilkQuality).forEach(l=>{s.push(this.cow.rawmilkQuality[l])}),s},getDoughnutChartObject(){return{label:"คุณภาพน้ำนมดิบ",fill:!0,borderColor:"#000000",borderWidth:2,data:this.getDoughnutChartData(),weight:4,backgroundColor:["rgb(16 185 129)","rgb(59 130 246)","rgb(244 63 94)","rgb(245 158 11)"],hoverOffset:4}},createDoughnutChart(){const s=[];return O("create").forEach(l=>{s.push(`${l.label}`)}),{labels:s,datasets:[this.getDoughnutChartObject("primary","qty")]}},formatDate(s){return s?A(new Date(s)).format("DD/MM/YYYY"):""},addMonths(s,l){return this.formatDate(T(s,l))}}},j={class:"grid grid-cols-1 lg:grid-cols-3 lg:gap-5 gap-1 mb-1 lg:mb-5"},F={class:"grid lg:grid-cols-2 grid-cols-1 gap-5"},R={class:"grid grid-cols-1 lg:grid-cols-3 lg:gap-5 gap-1 mb-1 lg:mb-5"},Y={class:"grid grid-cols-3 gap-5"},E={class:"text-left mt-2 col-span-2"},I={class:"lg:text-3xl text-2xl text-yellow-600"},L={class:"text-left mt-2 col-span-2"},N={class:"lg:text-3xl text-2xl text-yellow-600"},V={class:"text-left mt-2 col-span-2"},P={class:"lg:text-3xl text-2xl text-yellow-600"},W={class:"text-left mt-2 col-span-2"},G={class:"lg:text-3xl text-2xl text-yellow-600"},H={key:0,class:"lg:h-56"},J={key:1,class:"text-gray-500"},K={class:"grid grid-cols-5 gap-2 ml-3"},U=t("p",{class:"text-2xl text-lime-500 font-extrabold"}," A+ ",-1),X=t("p",{class:"mt-2 col-span-3 flex"},[r("ดีมาก"),t("p",{class:"text-xs text-gray-500 mt-1 ml-2"},"(กำไร > 80%)")],-1),Z={key:0,class:"lg:text-3xl text-xl"},$=t("p",{class:"text-2xl text-green-500 font-extrabold"}," A ",-1),tt=t("p",{class:"mt-2 col-span-3 flex"},[r("ดี"),t("p",{class:"text-xs text-gray-500 mt-1 ml-2"},"(กำไร 51% ~ 80%)")],-1),et={key:2,class:"lg:text-3xl text-xl"},st=t("p",{class:"dark:text-white text-black text-2xl font-extrabold"}," B ",-1),at=t("p",{class:"text-sm mt-2 col-span-3 flex"},[r("ปกติ"),t("p",{class:"text-xs text-gray-500 mt-1 ml-2"},"(กำไร 31% ~ 50%)")],-1),ot={key:4,class:"lg:text-3xl text-xl"},lt=t("p",{class:"text-2xl text-orange-500 font-extrabold"}," C ",-1),it=t("p",{class:"text-left mt-2 col-span-3 flex"},[r("แย่"),t("p",{class:"text-xs text-gray-500 mt-1 ml-2"},"(กำไร 1% ~ 30%)")],-1),ct={key:6,class:"lg:text-3xl text-xl"},rt=t("p",{class:"text-2xl text-red-500 font-extrabold"}," D ",-1),nt=t("p",{class:"text-left mt-2 col-span-3 flex"},[r("แย่มาก"),t("p",{class:"text-xs text-gray-500 text-left mt-1 ml-2"},"(กำไร <= 0%)")],-1),dt={key:8,class:"lg:text-3xl text-xl"};function ht(s,l,gt,ut,e,xt){const f=n("SectionTitleBarSub"),_=n("Table"),u=n("CardBox"),i=n("BaseIcon"),y=n("doughnut-chart"),w=n("SectionMain"),b=n("LayoutAuthenticated");return a(),h(b,null,{default:g(()=>[o(w,null,{default:g(()=>[o(f,{icon:"chartPie",title:"ภาพรวมโค"}),t("div",j,[o(u,{icon:"sort",title:"อันดับน้ำนมดิบ","header-icon":"",class:"lg:col-span-2"},{default:g(()=>[t("div",F,[o(_,{title:"มากที่สุด 5 อันดับ",items:e.rawMilkDescSort,datas:e.rawMilkSortColumns,"no-paging":"",loading:e.loading.rawMilkSort},null,8,["items","datas","loading"]),o(_,{title:"น้อยที่สุด 5 อันดับ",items:e.rawMilkAscSort,datas:e.rawMilkSortColumns,"no-paging":"",loading:e.loading.rawMilkSort},null,8,["items","datas","loading"])])]),_:1})]),t("div",R,[o(u,{loading:e.loading.cow,icon:"cow",title:"สถานะโค",class:"text-center","header-icon":""},{default:g(()=>[t("div",Y,[t("p",E,[o(i,{class:"text-white bg-teal-900 rounded-full p-1 mr-2",path:"water",size:"16"}),r(" โครีดนม ")]),t("h1",I,c(e.cow.milk),1),t("p",L,[o(i,{class:"text-blue-500 bg-indigo-900 rounded-full p-1 mr-2",path:"humanPregnant",size:"16"}),r("โคท้อง ")]),t("h1",N,c(e.cow.pregnant),1),t("p",V,[o(i,{class:"text-yellow-500 bg-amber-900 rounded-full p-1 mr-2",path:"babyFaceOutline",size:"16"}),r(" โคเด็ก ")]),t("h1",P,c(e.cow.baby),1),t("p",W,[o(i,{class:"text-rose-500 bg-red-900 rounded-full p-1 mr-2",path:"waterOff",size:"16"}),r("โคดราย ")]),t("h1",G,c(e.cow.dry),1)])]),_:1},8,["loading"]),o(u,{loading:e.loading.cow,icon:"thermometerWater",title:"คุณภาพนม",class:"text-center","header-icon":""},{default:g(()=>{var m,p;return[((p=(m=e.doughnutChartData)==null?void 0:m.datasets[0])==null?void 0:p.data[0])>0?(a(),d("div",H,[o(y,{data:e.doughnutChartData},null,8,["data"])])):(a(),d("div",J,"ไม่มีข้อมูล..."))]}),_:1},8,["loading"]),o(u,{icon:"counter",title:"คุณภาพโค","header-icon":""},{default:g(()=>[t("div",K,[U,X,e.loading.quality?(a(),h(i,{key:1,path:"dotsCircle",size:"22",class:"animate-spin text-gray-500"})):(a(),d("h1",Z,c(e.quality.aplus),1)),$,tt,e.loading.quality?(a(),h(i,{key:3,path:"dotsCircle",size:"22",class:"animate-spin text-gray-500"})):(a(),d("h1",et,c(e.quality.a),1)),st,at,e.loading.quality?(a(),h(i,{key:5,path:"dotsCircle",size:"22",class:"animate-spin text-gray-500"})):(a(),d("h1",ot,c(e.quality.b),1)),lt,it,e.loading.quality?(a(),h(i,{key:7,path:"dotsCircle",size:"22",class:"animate-spin text-gray-500"})):(a(),d("h1",ct,c(e.quality.c),1)),rt,nt,e.loading.quality?(a(),h(i,{key:9,path:"dotsCircle",size:"22",class:"animate-spin text-gray-500"})):(a(),d("h1",dt,c(e.quality.d),1))])]),_:1})])]),_:1})]),_:1})}const Mt=z(Q,[["render",ht]]);export{Mt as default};
