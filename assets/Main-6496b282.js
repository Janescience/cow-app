import{c as _}from"./BaseDivider-92a0f226.js";import{_ as b}from"./LayoutAuthenticated-bfcabf3e.js";import{_ as w}from"./SectionTitleBarSub-d1c9d639.js";import{C as g}from"./CriteriaReport-2b809154.js";import{T as v}from"./Table-3d752fda.js";import{R as s}from"./report-812107b9.js";import{v as L,x as S,c as r,w as c,z as i,o as m,d as l,g as y}from"./index-c8301f55.js";import{T}from"./alert-b696341f.js";import"./UserAvatar-9e392228.js";import"./CardBoxModal-989c2f17.js";import"./CardBoxCollapse-cc74730f.js";import"./FormField-c07d5fcc.js";import"./FormControl-0cbf83ef.js";import"./FormCheckRadioPicker-b7967c85.js";import"./Cow-6e9470ab.js";import"./cow-197f9a15.js";import"./Recipe-ae3d1971.js";import"./Vaccine-ebb45c10.js";const x={data(){return{items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"วันที่รักษาตั้งแต่",value:"dateFrom",icon:"calendar",type:"date"},{label:"วันที่รักษาถึง",value:"dateTo",icon:"calendar",type:"date"}],datas:[{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"วันที่รักษา",class:"text-center",value:"date",type:"date"},{label:"อาการ/โรค",value:"disease"},{label:"การรักษา",value:"method"},{label:"ค่ารักษา",class:"text-right",value:"amount",type:"currency"},{label:"ผู้รักษา",value:"healer"}],search:{cow:null,dateFrom:null,dateTo:null},loading:!1,viewLoading:!1}},components:{SectionMain:_,LayoutAuthenticated:b,SectionTitleBarSub:w,Criteria:g,Table:v},methods:{async view(o){this.viewLoading=!0;const t=await s.healView(o);this.items=[],t.data&&(t.data.heals.length>0?this.items=t.data.heals:T.fire({icon:"warning",title:"ไม่พบข้อมูล"})),this.viewLoading=!1},async print(){this.loading=!0;const o=await s.healExport(this.search);if(o.data){const t=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","ข้อมูลการรักษา "+S().format("DDMMYYYYHHmm")+".xlsx"),document.body.appendChild(a),a.click(),a.remove()}this.loading=!1},reset(){this.items=[],this.search.cow=null,this.search.dateFrom=null,this.search.dateTo=null}}};function C(o,t,a,V,e,n){const d=i("SectionTitleBarSub"),u=i("Criteria"),p=i("Table"),h=i("SectionMain"),f=i("LayoutAuthenticated");return m(),r(f,null,{default:c(()=>[l(h,null,{default:c(()=>[l(d,{icon:"doctor",title:"รายงานการรักษา"}),l(u,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:n.print,onView:n.view,onReset:n.reset,forms:e.forms,search:e.search,btnSubmitLoading:e.loading,btnViewLoading:e.viewLoading,collapse:""},null,8,["onSearch","onView","onReset","forms","search","btnSubmitLoading","btnViewLoading"]),e.items.length>0?(m(),r(p,{key:0,title:"ข้อมูลการรักษา",items:e.items,datas:e.datas,loading:e.viewLoading},null,8,["items","datas","loading"])):y("",!0)]),_:1})]),_:1})}const J=L(x,[["render",C]]);export{J as default};
