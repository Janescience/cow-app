import{r as p,a as g,c as b,w as a,u as x,b as N,o as V,d as e,n as j,e as C,_ as c,f as m,t as k,g as S,h as U,i,k as q,j as _,A as B}from"./index-a11eb788.js";import{_ as D,a as R}from"./SectionFullScreen-ce9238aa.js";import{_ as A,a as z,b as M}from"./BaseDivider-5d6d6cd6.js";import{_ as O}from"./CardBoxModal-4190cff7.js";import{_ as d}from"./FormField-eae473e8.js";import{_ as f}from"./FormControl-913bfab2.js";import{_ as T}from"./SectionTitle-72df7cf2.js";import{_ as E}from"./UserAvatar-8818f699.js";import{_ as F}from"./NotificationBar-c518edd8.js";const G=_("a",{href:"/login",class:"ml-1 text-blue-500"},[_("u",null,"เข้าสู่ระบบ")],-1),H=_("p",null,"สร้างบัญชีสำเร็จ ต้องการเข้าสู่ระบบหรือไม่ ? ",-1),ee={__name:"RegisterView",setup(I){const s=p({username:"",password:"",farmName:""}),o=g(!1),n=g(!1),r=p({message:""}),w=x(),y=N(),$=async()=>{r.message="",(await B.register(s)).data&&(n.value=!0)},h=()=>{o.value=!0,r.message="",y.dispatch("auth/login",{username:s.username,password:s.password}).then(u=>{w.push("/overview/farm")}).catch(u=>{r.message=u.response.data.message,o.value=!1})};return(u,l)=>(V(),b(D,null,{default:a(()=>[e(R,{bg:"login"},{default:a(({cardClass:v})=>[e(A,{class:j(v),form:"",title:"","header-icon":"",onSubmit:C($,["prevent"])},{default:a(()=>[e(c,{type:"justify-center"},{default:a(()=>[e(E,{avatar:"/image/cow-logo.jpg",class:"w-28",username:"logo"})]),_:1}),e(T,null,{default:a(()=>[m(" ระบบจัดการฟาร์มโคนม ")]),_:1}),e(c,{type:"justify-center",class:"text-lg"},{default:a(()=>[m(" สร้างบัญชี ")]),_:1}),e(c,{type:"justify-center",class:"text-sm"},{default:a(()=>[m(" มีบัญชีแล้ว ? "),G]),_:1}),e(d,{label:"ชื่อผู้ใช้",help:"* ห้ามว่าง"},{default:a(()=>[e(f,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=t=>s.username=t),icon:"account",name:"login",required:"",autocomplete:"username"},null,8,["modelValue"])]),_:1}),e(d,{label:"รหัสผ่าน",help:"* ห้ามว่าง"},{default:a(()=>[e(f,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=t=>s.password=t),icon:"asterisk",type:"password",name:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),e(d,{label:"ชื่อฟาร์ม",help:"* ห้ามว่าง"},{default:a(()=>[e(f,{modelValue:s.farmName,"onUpdate:modelValue":l[2]||(l[2]=t=>s.farmName=t),icon:"barn",required:""},null,8,["modelValue"])]),_:1}),e(d,{label:"วันที่เริ่มกิจการ",help:"* ห้ามว่าง"},{default:a(()=>[e(f,{modelValue:s.businessDate,"onUpdate:modelValue":l[3]||(l[3]=t=>s.businessDate=t),type:"date",icon:"calendar",required:""},null,8,["modelValue"])]),_:1}),r.message?(V(),b(F,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[m(k(r.message),1)]),_:1})):S("",!0),e(z),e(U,{type:"justify-center"},{default:a(()=>[e(M,{type:"submit",color:"info",label:"สร้างบัญชี",loading:i(o),disabled:i(o)},null,8,["loading","disabled"])]),_:1})]),_:2},1032,["class","onSubmit"]),e(O,{modelValue:i(n),"onUpdate:modelValue":l[4]||(l[4]=t=>q(n)?n.value=t:null),title:"ยืนยันอีกครั้ง","button-label":"ตกลง",onConfirm:h,"has-cancel":"","has-button":"",loading:i(o)},{default:a(()=>[H]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}))}};export{ee as default};
