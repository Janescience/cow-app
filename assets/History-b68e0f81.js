import{c as D,_ as y,b as S}from"./BaseDivider-545ee737.js";import{_ as w}from"./LayoutAuthenticated-bb164c86.js";import{_ as C}from"./SectionTitleBarSub-c85ef35f.js";import{_ as M}from"./UserAvatar-552fc118.js";import{v as k,_ as x,h as R,c as B,w as c,z as l,o as T,d as s}from"./index-99f98e20.js";import{T as L}from"./Table-b758a326.js";import{C as A}from"./Criteria-aeb3b22e.js";import{M as V}from"./Modal-6f8678b4.js";import{R as n}from"./reproduction-0e33d64a.js";import{a as u,r as d}from"./reproduct-4b10c1e3.js";import{T as m}from"./alert-a9876ada.js";import"./CardBoxModal-44e5529a.js";import"./FormControl-acea10f8.js";import"./CardBoxCollapse-14568e10.js";import"./FormField-18ce0e3b.js";import"./FormCheckRadioPicker-7796ff7d.js";import"./Cow-aacea7b3.js";import"./cow-19973f66.js";import"./Recipe-07ab6a21.js";import"./Vaccine-8054ec47.js";import"./NotificationBar-3663ebd2.js";const q={data(){return{openModal:!1,items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"สถานะ",value:"status",options:u()},{label:"ผล",value:"result",options:d()},{label:"วันที่เข้าระบบสืบพันธุ์",value:"loginDate",icon:"calendar",type:"date"},{label:"วันที่เป็นสัด",value:"estrusDate",icon:"calendar",type:"date"},{label:"วันที่ผสมพันธุ์",value:"matingDate",icon:"calendar",type:"date"},{label:"วันที่ตรวจท้อง",value:"checkDate",icon:"calendar",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,mode:"create",modalData:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"วันที่เข้าระบบสืบพันธุ์",class:"text-center",value:"loginDate",type:"date"},{label:"ผลการเข้าระบบ",func:e=>d()[e.result].label},{label:"วันที่เป็นสัด",class:"text-center",value:"estrusDate",type:"date"},{label:"วันที่ผสมพันธุ์",class:"text-center",value:"matingDate",type:"date"},{label:"วันที่ตรวจท้อง",class:"text-center",value:"checkDate",type:"date"},{label:"รายละเอียด",value:"remark"},{label:"สถานะ",func:e=>u()[e.status].label},{label:"ประเภท",value:"type"},{label:"การรักษา/สาเหตุ",value:"howTo"}],buttons:[{label:"ลบ",type:"delete",color:"danger",condition:e=>e.status!="2"&&e.status!="3"},{label:"แก้ไข",type:"edit",color:"warning",condition:e=>e.status!="2"&&e.status!="3"}]}},components:{SectionMain:D,LayoutAuthenticated:w,SectionTitleBarSub:C,Table:L,Modal:V,Criteria:A,UserAvatar:M,CardBox:y,BaseLevel:x,BaseButtons:R,BaseButton:S},computed:{getDataCopy(){return{...this.modalData}}},created(){this.search.cow=this.$route.params.cow,this.getReproductions()},methods:{async getReproductions(){this.loading=!0;const e=await n.all(this.search);this.items=[],e.data&&(this.items=e.data.reproducts),this.loading=!1},async remove(e){this.loading=!0,(await n.delete(e)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},async removeSelected(e){this.loading=!0;let a=[];for(let r of e)a.push(r._id);(await n.deletes(a)).data&&(this.getReproductions(),m.fire({icon:"success",title:"ลบข้อมูลสำเร็จ"})),this.loading=!1},edit(e){this.modalData=e,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.loginDate=null,this.search.estrusDate=null,this.search.matingDate=null,this.search.checkDate=null,this.search.status="",this.search.result="",this.getReproductions()},resetData(){this.modalData=null}}};function E(e,a,p,r,t,o){const h=l("SectionTitleBarSub"),f=l("Modal"),_=l("Criteria"),b=l("Table"),g=l("SectionMain"),v=l("LayoutAuthenticated");return T(),B(v,null,{default:c(()=>[s(g,null,{default:c(()=>[s(h,{icon:"reproduction",title:"ประวัติการผสมพันธุ์",btnText:"เพิ่มการผสมพันธุ์","has-btn-add":"",onOpenModal:a[0]||(a[0]=i=>{t.mode="create",t.openModal=!0})}),s(f,{modelValue:t.openModal,"onUpdate:modelValue":a[1]||(a[1]=i=>t.openModal=i),mode:t.mode,data:o.getDataCopy,onConfirm:o.getReproductions,onCancel:o.resetData},null,8,["modelValue","mode","data","onConfirm","onCancel"]),s(_,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:o.getReproductions,onReset:o.reset,forms:t.forms,search:t.search,btnLoading:t.loading},null,8,["onSearch","onReset","forms","search","btnLoading"]),s(b,{title:"รายการประวัติการผสมพันธุ์","has-checkbox":"","checked-data":t.checked,items:t.items,datas:t.datas,buttons:t.buttons,onEdit:o.edit,onDelete:o.remove,onDeleteSelected:o.removeSelected,loading:t.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}const oe=k(q,[["render",E]]);export{oe as default};
