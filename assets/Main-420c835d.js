import{z as V,p as f,m as T,l as x,i as R,R as F,F as t,o as n,c as s,w as r,s as U,J as q,L as M,n as g,K as A,d as u,e as y,C as E,D as Y,E as j,T as N,B as P,k as z}from"./index-777e8ff9.js";import{_ as H}from"./CardBoxCollapse-ba1bc645.js";import{_ as O}from"./FormField-d7787d4c.js";import{D as J}from"./Cow-c49f70ee.js";import{D as K}from"./Recipe-d86b3496.js";import{D as G}from"./Vaccine-13969f55.js";import{R as I}from"./report-722c6a82.js";import{a as w,r as D,R as Q}from"./reproduct-4efc0269.js";import"./cow-39f38489.js";const W={props:{grid:{type:String,default:"grid-cols-4"},forms:{type:Array,default:[]},search:{type:Object,default:null},collapse:Boolean,btnSubmitLabel:{type:String,default:"ค้นหา"},btnSubmitLoading:Boolean,btnViewLoading:Boolean},components:{BaseButton:f,BaseButtons:T,BaseDivider:x,CardBoxCollapse:H,FormField:O,FormControl:R,FormCheckRadioPicker:F,DDLCow:J,DDLRecipe:K,DDLVaccine:G},methods:{view(){this.$emit("view",this.search)},submit(){this.$emit("search",this.search)},reset(){this.$emit("reset",this.search)}}};function X(o,d,a,L,i,c){const m=t("DDLCow"),p=t("DDLRecipe"),_=t("DDLVaccine"),b=t("FormCheckRadioPicker"),v=t("FormControl"),B=t("FormField"),k=t("BaseDivider"),h=t("BaseButton"),C=t("BaseButtons"),S=t("CardBoxCollapse");return n(),s(S,{title:"ค้นหา",icon:"",form:"",class:"mb-2","header-icon":"",collapse:a.collapse,onSubmit:y(c.submit,["prevent"]),onView:y(c.view,["prevent"]),onReset:y(c.reset,["prevent"])},{default:r(()=>[U("div",{class:g(["grid gap-5",[a.grid]])},[(n(!0),q(A,null,M(a.forms,e=>(n(),s(B,{key:e.value,label:e.label,class:g([e.class])},{default:r(()=>[e.type==="ddl"&&e.module==="cow"?(n(),s(m,{key:0,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl-multiple"&&e.module==="cow"?(n(),s(m,{key:1,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType,mutiple:""},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl"&&e.module==="recipe"?(n(),s(p,{key:2,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="ddl"&&e.module==="vaccine"?(n(),s(_,{key:3,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,valueType:e.valueType},null,8,["modelValue","onUpdate:modelValue","valueType"])):e.type==="radio"?(n(),s(b,{key:4,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,type:e.type,options:e.options,required:e.required},null,8,["modelValue","onUpdate:modelValue","type","options","required"])):(n(),s(v,{key:5,modelValue:a.search[e.value],"onUpdate:modelValue":l=>a.search[e.value]=l,icon:e.icon,options:e.options,type:e.type,required:e.required},null,8,["modelValue","onUpdate:modelValue","icon","options","type","required"]))]),_:2},1032,["label","class"]))),128))],2),u(k),u(C,{type:"justify-center","no-wrap":""},{default:r(()=>[u(h,{onClick:c.view,color:"success",label:"ดูข้อมูล",loading:a.btnViewLoading,disabled:a.btnViewLoading},null,8,["onClick","loading","disabled"]),u(h,{type:"submit",color:"info",label:"ออกรายงาน",loading:a.btnSubmitLoading,disabled:a.btnSubmitLoading},null,8,["loading","disabled"]),u(h,{type:"reset",color:"danger",label:"ล้าง"})]),_:1})]),_:1},8,["collapse","onSubmit","onView","onReset"])}const Z=V(W,[["render",X]]),$={data(){return{items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"สถานะ",value:"status",options:w()},{label:"ผล",value:"result",options:D()},{label:"วันที่เข้าระบบสืบพันธุ์",value:"loginDate",icon:"calendar",type:"date"},{label:"วันที่เป็นสัด",value:"estrusDate",icon:"calendar",type:"date"},{label:"วันที่ผสมพันธุ์",value:"matingDate",icon:"calendar",type:"date"},{label:"วันที่ตรวจท้อง",value:"checkDate",icon:"calendar",type:"date"}],datas:[{label:"วันที่เข้าระบบสืบพันธุ์",class:"text-center",value:"loginDate",type:"date"},{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"พ่อพันธุ์",value:"dad"},{label:"ผล",func:o=>D()[o.result].label},{label:"สถานะ",func:o=>w()[o.status].label},{label:"การรักษา",value:"howTo"},{label:"วันที่เป็นสัด",class:"text-center",value:"estrusDate",type:"date"},{label:"วันที่ผสมพันธุ์",class:"text-center",value:"matingDate",type:"date"},{label:"วันที่ตรวจท้อง",class:"text-center",value:"checkDate",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,viewLoading:!1}},components:{SectionMain:E,LayoutAuthenticated:Y,SectionTitleBarSub:j,Criteria:Z,Table:N},methods:{async view(o){this.viewLoading=!0;const d=await Q.all(o);this.items=[],d.data&&(this.items=d.data.reproducts),this.viewLoading=!1},async exportExcel(){this.loading=!0;const o=await I.reproduction(this.search);if(o.data){const d=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=d,a.setAttribute("download","ข้อมูลการสืบพันธุ์ "+P().format("DDMMYYYYHHmm")+".xlsx"),document.body.appendChild(a),a.click(),a.remove()}this.loading=!1},reset(){this.items=[],this.search.cow=null,this.search.date=null}}};function ee(o,d,a,L,i,c){const m=t("SectionTitleBarSub"),p=t("Criteria"),_=t("Table"),b=t("SectionMain"),v=t("LayoutAuthenticated");return n(),s(v,null,{default:r(()=>[u(b,null,{default:r(()=>[u(m,{icon:"reproduction",title:"การสืบพันธุ์"}),u(p,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:c.exportExcel,onView:c.view,onReset:c.reset,forms:i.forms,search:i.search,btnSubmitLoading:i.loading,btnViewLoading:i.viewLoading},null,8,["onSearch","onView","onReset","forms","search","btnSubmitLoading","btnViewLoading"]),i.items.length>0?(n(),s(_,{key:0,title:"ข้อมูลการสืบพันธุ์",items:i.items,datas:i.datas,loading:i.viewLoading},null,8,["items","datas","loading"])):z("",!0)]),_:1})]),_:1})}const de=V($,[["render",ee]]);export{de as default};
