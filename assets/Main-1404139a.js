import{z as b,C as w,D as _,E as g,T as v,B as L,c as s,w as r,F as i,o as c,d as l,k as S}from"./index-5292fd0b.js";import{C as y}from"./CriteriaReport-eebd4878.js";import{R as d}from"./report-762b2957.js";import{T}from"./alert-6732d737.js";import"./CardBoxCollapse-6f7fa178.js";import"./FormField-d30f3da3.js";import"./Cow-ffd88f6e.js";import"./cow-ab19f855.js";import"./Recipe-c7712848.js";import"./Vaccine-6072ed7a.js";const x={data(){return{items:[],forms:[{label:"โค",value:"cow",type:"ddl",module:"cow"},{label:"วันที่รักษาตั้งแต่",value:"dateFrom",icon:"calendar",type:"date"},{label:"วันที่รักษาถึง",value:"dateTo",icon:"calendar",type:"date"}],datas:[{label:"รหัสโค",value:"cow.code"},{label:"ชื่อโค",value:"cow.name"},{label:"ครั้งที่",class:"text-center",value:"seq"},{label:"วันที่รักษา",class:"text-center",value:"date",type:"date"},{label:"อาการ/โรค",value:"disease"},{label:"การรักษา",value:"method"},{label:"ค่ารักษา",class:"text-right",value:"amount",type:"currency"},{label:"ผู้รักษา",value:"healer"}],search:{cow:null,dateFrom:null,dateTo:null},loading:!1,viewLoading:!1}},components:{SectionMain:w,LayoutAuthenticated:_,SectionTitleBarSub:g,Criteria:y,Table:v},methods:{async view(o){this.viewLoading=!0;const t=await d.healView(o);this.items=[],t.data&&(t.data.heals.length>0?this.items=t.data.heals:T.fire({icon:"warning",title:"ไม่พบข้อมูล"})),this.viewLoading=!1},async print(){this.loading=!0;const o=await d.healExport(this.search);if(o.data){const t=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","ข้อมูลการรักษา "+L().format("DDMMYYYYHHmm")+".xlsx"),document.body.appendChild(a),a.click(),a.remove()}this.loading=!1},reset(){this.items=[],this.search.cow=null,this.search.dateFrom=null,this.search.dateTo=null}}};function C(o,t,a,k,e,n){const m=i("SectionTitleBarSub"),u=i("Criteria"),h=i("Table"),p=i("SectionMain"),f=i("LayoutAuthenticated");return c(),s(f,null,{default:r(()=>[l(p,null,{default:r(()=>[l(m,{icon:"doctor",title:"รายงานการรักษา"}),l(u,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:n.print,onView:n.view,onReset:n.reset,forms:e.forms,search:e.search,btnSubmitLoading:e.loading,btnViewLoading:e.viewLoading,collapse:""},null,8,["onSearch","onView","onReset","forms","search","btnSubmitLoading","btnViewLoading"]),e.items.length>0?(c(),s(h,{key:0,title:"ข้อมูลการรักษา",items:e.items,datas:e.datas,loading:e.viewLoading},null,8,["items","datas","loading"])):S("",!0)]),_:1})]),_:1})}const N=b(x,[["render",C]]);export{N as default};
