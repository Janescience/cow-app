import{N as C,O as y,l as x,_ as k,k as M,R as T,g as F,h as L,e as N,U,Q as o,H as v,T as w,o as p,c as g,w as n,b as t,p as O,i as H,t as q,j as E,d as R,S as A,P as I,V as j}from"./index.6c672a2b.js";import{D as P,T as z,a as Q}from"./Criteria.b1c65612.js";import{_ as G}from"./BaseButtons.bc2bd4ae.js";import{_ as J,a as K}from"./FormField.ac85779c.js";import{H as u,T as b}from"./heal.bdddd9d1.js";import"./CardBoxModal.7808da7e.js";import"./auth-header.bb030792.js";const W={data(){return{heal:{cow:null,date:new Date,disease:"",method:"",healer:"",farm:y().farm._id},loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(a){this.$emit("update:modelValue",a)}}},watch:{data(a){a&&this.mode==="edit"&&(this.heal=a,this.heal.date=new Date(a.date))}},methods:{clear(){this.heal.cow=null,this.heal.date=new Date,this.heal.disease="",this.heal.method="",this.heal.healer=""},confirmCancel(a){this.value=!1,this.$emit(a)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await u.create(this.heal)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")):await u.update(this.heal)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")),b.fire({icon:"success",title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})}catch(a){console.error("Error : ",a),this.loading=!1,this.alert=a.response.data.message,b.fire({icon:"error",title:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})}}},components:{BaseButton:x,BaseButtons:G,CardBox:k,BaseDivider:M,OverlayLayer:T,FormField:J,FormControl:F,NotificationBar:L,BaseLevel:N,DDLCow:P,FormCheckRadioPicker:K,BaseIcon:U},props:{modelValue:{type:[String,Number,Boolean],default:null},data:{type:Object,default:null},mode:{type:String,default:""}}},X={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"};function Y(a,l,B,D,e,s){const h=o("DDLCow"),r=o("FormField"),c=o("FormControl"),f=o("NotificationBar"),_=o("BaseDivider"),d=o("BaseButton"),m=o("BaseButtons"),V=o("CardBox"),S=o("OverlayLayer");return v((p(),g(S,null,{default:n(()=>[v(t(V,{title:(this.mode==="create"?"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01":"\u0E41\u0E01\u0E49\u0E44\u0E02")+"\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32",class:"shadow-lg w-full overflow-y-auto lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:R(s.submit,["prevent"]),onHeaderIconClick:s.cancel},{default:n(()=>[O("div",X,[t(r,{label:"\u0E42\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[t(h,{modelValue:e.heal.cow,"onUpdate:modelValue":l[0]||(l[0]=i=>e.heal.cow=i)},null,8,["modelValue"])]),_:1}),t(r,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E01\u0E29\u0E32",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[t(c,{modelValue:e.heal.date,"onUpdate:modelValue":l[1]||(l[1]=i=>e.heal.date=i),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u0E04\u0E19\u0E23\u0E31\u0E01\u0E29\u0E32"},{default:n(()=>[t(c,{modelValue:e.heal.healer,"onUpdate:modelValue":l[2]||(l[2]=i=>e.heal.healer=i),icon:"doctor"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u0E2D\u0E32\u0E01\u0E32\u0E23/\u0E42\u0E23\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:n(()=>[t(c,{modelValue:e.heal.disease,"onUpdate:modelValue":l[3]||(l[3]=i=>e.heal.disease=i),type:"textarea",required:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32"},{default:n(()=>[t(c,{modelValue:e.heal.method,"onUpdate:modelValue":l[4]||(l[4]=i=>e.heal.method=i),type:"textarea"},null,8,["modelValue"])]),_:1})]),e.alert?(p(),g(f,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:n(()=>[H(q(e.alert),1)]),_:1})):E("",!0),t(_),t(m,{type:"justify-center"},{default:n(()=>[t(d,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:e.loading},null,8,["loading"]),t(d,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:s.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[w,s.value]])]),_:1},512)),[[w,s.value]])}var Z=C(W,[["render",Y]]);const $={data(){return{openModal:!1,modalData:null,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E01\u0E29\u0E32",value:"date",icon:"calendar",type:"date"}],search:{cow:null,date:null,farm:y().farm._id},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48",value:"seq",class:"text-center"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E01\u0E29\u0E32",class:"text-center",value:"date",type:"date"},{label:"\u0E2D\u0E32\u0E01\u0E32\u0E23/\u0E42\u0E23\u0E04",class:"text-center",value:"disease"},{label:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32",class:"text-center",value:"method"},{label:"\u0E04\u0E19\u0E23\u0E31\u0E01\u0E29\u0E32",class:"text-center",value:"healer"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger"},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning"}]}},components:{SectionMain:A,LayoutAuthenticated:I,SectionTitleBarSub:j,Table:z,Modal:Z,Criteria:Q},created(){this.getDatas()},methods:{async getDatas(a){this.loading=!0;const l=await u.all(a);this.items=[],l.data&&(this.items=l.data.heals),this.loading=!1},async remove(a){this.loading=!0,(await u.delete(a)).data&&this.getDatas(),this.loading=!1,b.fire({icon:"success",title:"\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"})},edit(a){this.modalData=a,this.modalData.cow=a.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null}}};function ee(a,l,B,D,e,s){const h=o("SectionTitleBarSub"),r=o("Modal"),c=o("Criteria"),f=o("Table"),_=o("SectionMain"),d=o("LayoutAuthenticated");return p(),g(d,null,{default:n(()=>[t(_,null,{default:n(()=>[t(h,{icon:"doctor",title:"\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32","has-btn-add":"",onOpenModal:l[0]||(l[0]=m=>{e.mode="create",e.openModal=!0}),btnText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32"}),t(r,{modelValue:e.openModal,"onUpdate:modelValue":l[1]||(l[1]=m=>e.openModal=m),data:e.modalData,mode:e.mode,onConfirm:s.getDatas,onCancel:s.getDatas},null,8,["modelValue","data","mode","onConfirm","onCancel"]),t(c,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:s.getDatas,onReset:s.reset,forms:e.forms,search:e.search},null,8,["onSearch","onReset","forms","search"]),t(f,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32","has-checkbox":"","checked-data":e.checked,items:e.items,datas:e.datas,buttons:e.buttons,onEdit:s.edit,onDelete:s.remove,onDeleteSelected:a.removeSelected,loading:e.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var re=C($,[["render",ee]]);export{re as default};
