import{b as x,_ as U,a as L}from"./BaseDivider-d71bfeec.js";import{v as N,L as p,B as D,h as S,_ as T,z as u,G as h,H as _,o as i,c as n,w as a,d as l,j as R,g as d,f as O,t as j,e as q}from"./index-400adc90.js";import{a as M}from"./CardBoxModal-05bcb9f4.js";import{_ as H}from"./FormField-39e0ae9c.js";import{_ as P}from"./FormControl-773f832f.js";import{_ as z}from"./FormCheckRadioPicker-382eab69.js";import{_ as I}from"./NotificationBar-315522c1.js";import{D as A}from"./Cow-7eca16c2.js";import{T as g}from"./alert-4b9315cd.js";import{a as E,r as G}from"./reproduct-6d4af9c3.js";import{R as V}from"./reproduction-4c826cad.js";const J={data(){return{reproduct:{cow:{},loginDate:new Date,estrusDate:p(new Date,21),matingDate:p(new Date,22),checkDate:D(p(new Date,22),2),remark:"",howTo:"",type:"F",status:1,result:2},status:E("create"),result:G("create"),loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},user(){return this.$store.state.auth.user}},watch:{"reproduct.loginDate"(t){this.reproduct.estrusDate=p(t,21)},"reproduct.estrusDate"(t){this.reproduct.matingDate=p(t,1)},"reproduct.matingDate"(t){this.reproduct.checkDate=D(t,2)},"reproduct.result"(t){t==1?this.reproduct.status=4:this.reproduct.status=1},data:{handler(t,o){t&&(this.reproduct=t,this.reproduct.loginDate=t.loginDate?new Date(t.loginDate):null,this.reproduct.estrusDate=t.estrusDate?new Date(t.estrusDate):null,this.reproduct.matingDate=t.matingDate?new Date(t.matingDate):null,this.reproduct.checkDate=t.checkDate?new Date(t.checkDate):null)}}},methods:{clear(){this.reproduct={}},confirmCancel(t){this.clear(),this.value=!1,this.$emit(t)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await V.create(this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"})):await V.update(this.reproduct._id,this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"),g.fire({icon:"success",title:"บันทึกข้อมูลสำเร็จ"}))}catch(t){console.error("Error : ",t),this.loading=!1,this.alert=t.response.data.message}}},components:{BaseButton:x,BaseButtons:S,CardBox:U,BaseDivider:L,OverlayLayer:M,FormField:H,FormControl:P,NotificationBar:I,BaseLevel:T,DDLCow:A,FormCheckRadioPicker:z},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},data:{type:Object,default:null}}},K={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 mt-1"};function Q(t,o,y,W,e,m){const w=u("DDLCow"),s=u("FormField"),c=u("FormControl"),k=u("FormCheckRadioPicker"),B=u("NotificationBar"),C=u("BaseDivider"),f=u("BaseButton"),b=u("BaseButtons"),v=u("CardBox"),F=u("OverlayLayer");return h((i(),n(F,null,{default:a(()=>[h(l(v,{title:y.mode==="create"?"บันทึกการผสมพันธุ์":"แก้ไขการผสมพันธุ์",class:"shadow-lg w-full lg:w-1/2 z-50","header-icon":"close",modal:"",form:"","has-scroll":"",onSubmit:q(m.submit,["prevent"]),onHeaderIconClick:m.cancel},{default:a(()=>[R("div",K,[l(s,{label:"โค",help:"* ห้ามว่าง"},{default:a(()=>[l(w,{modelValue:e.reproduct.cow,"onUpdate:modelValue":o[0]||(o[0]=r=>e.reproduct.cow=r),valueType:"object",filter:{sex:"F",status:[3,4,6]}},null,8,["modelValue"])]),_:1}),l(s,{label:"วันที่เข้าระบบสืบพันธุ์",help:"* ห้ามว่าง"},{default:a(()=>[l(c,{modelValue:e.reproduct.loginDate,"onUpdate:modelValue":o[1]||(o[1]=r=>e.reproduct.loginDate=r),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),l(s,{label:"ผลการเข้าระบบ"},{default:a(()=>[l(c,{modelValue:e.reproduct.result,"onUpdate:modelValue":o[2]||(o[2]=r=>e.reproduct.result=r),options:e.result},null,8,["modelValue","options"])]),_:1}),e.reproduct.result==1?(i(),n(s,{key:0,label:"การรักษา/สาเหตุ",help:""},{default:a(()=>[l(c,{modelValue:e.reproduct.howTo,"onUpdate:modelValue":o[3]||(o[3]=r=>e.reproduct.howTo=r),type:"textarea"},null,8,["modelValue"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:1,label:"วันที่เป็นสัด",help:"* ห้ามว่าง (วันที่เข้าระบบสืบพันธุ์ + 21 วัน)"},{default:a(()=>[l(c,{modelValue:e.reproduct.estrusDate,"onUpdate:modelValue":o[4]||(o[4]=r=>e.reproduct.estrusDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.loginDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:2,label:"วันที่ผสมพันธุ์",help:"* ห้ามว่าง (วันที่เป็นสัด + 24 ชม)"},{default:a(()=>[l(c,{modelValue:e.reproduct.matingDate,"onUpdate:modelValue":o[5]||(o[5]=r=>e.reproduct.matingDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.estrusDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:3,label:"วันที่ตรวจท้อง",help:"* ห้ามว่าง (วันที่ผสมพันธุ์ + 2 เดือน)"},{default:a(()=>[l(c,{modelValue:e.reproduct.checkDate,"onUpdate:modelValue":o[6]||(o[6]=r=>e.reproduct.checkDate=r),icon:"calendar",type:"date","lower-limit":e.reproduct.matingDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:4,label:"สถานะ"},{default:a(()=>[l(c,{modelValue:e.reproduct.status,"onUpdate:modelValue":o[7]||(o[7]=r=>e.reproduct.status=r),options:e.status},null,8,["modelValue","options"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:5,label:"ประเภท"},{default:a(()=>[l(k,{modelValue:e.reproduct.type,"onUpdate:modelValue":o[8]||(o[8]=r=>e.reproduct.type=r),type:"radio",options:{F:"พ่อพันธุ์",A:"ผสมเทียม"}},null,8,["modelValue"])]),_:1})):d("",!0),e.reproduct.result==2?(i(),n(s,{key:6,label:"รายละเอียด",help:""},{default:a(()=>[l(c,{modelValue:e.reproduct.remark,"onUpdate:modelValue":o[9]||(o[9]=r=>e.reproduct.remark=r),type:"textarea",icon:""},null,8,["modelValue"])]),_:1})):d("",!0)]),e.alert?(i(),n(B,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:a(()=>[O(j(e.alert),1)]),_:1})):d("",!0),l(C),l(b,{type:"justify-center"},{default:a(()=>[l(f,{label:"บันทึก",color:"success",type:"submit",loading:e.loading},null,8,["loading"]),l(f,{label:"ยกเลิก",color:"danger",onClick:m.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[_,m.value]])]),_:1},512)),[[_,m.value]])}const ue=N(J,[["render",Q]]);export{ue as M};
