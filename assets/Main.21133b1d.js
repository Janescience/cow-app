import{K as k,a8 as d,a9 as b,p as T,m as E,_ as L,l as R,$ as U,i as F,j as N,f as q,N as s,P as B,W as C,o as c,c as m,w as r,d as o,s as O,k as p,h as A,t as H,e as I,S as z,L as K,M as P}from"./index.2dcfda0f.js";import{T as W}from"./Table.0d5ec7f5.js";import{C as j}from"./Criteria.9b7500d4.js";import{_ as G}from"./FormField.8a37672c.js";import{D as J}from"./Cow.0dc5b479.js";import{a as v,r as y,R as D}from"./reproduct.d2cd1194.js";import"./FormCheckRadioPicker.85760ddd.js";import"./cow.e98d4c53.js";const Q={data(){return{reproduct:{cow:null,loginDate:new Date,estrusDate:d(new Date,21),matingDate:d(new Date,22),checkDate:b(d(new Date,22),2),dad:"",howTo:"",status:1,result:2},status:v("create"),result:y("create"),loading:!1,alert:""}},emits:["update:modelValue","cancel","confirm"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},user(){return this.$store.state.auth.user}},watch:{"reproduct.loginDate"(e){this.reproduct.estrusDate=d(e,21)},"reproduct.estrusDate"(e){this.reproduct.matingDate=d(e,1)},"reproduct.matingDate"(e){this.reproduct.checkDate=b(e,2)},"reproduct.result"(e){e==1?this.reproduct.status=4:this.reproduct.status=1},dataEdit:{handler(e,l){e!=null&&this.mode=="edit"&&(this.reproduct=e,this.reproduct.loginDate=new Date(e.loginDate),this.reproduct.estrusDate=new Date(e.estrusDate),this.reproduct.matingDate=new Date(e.matingDate),this.reproduct.checkDate=new Date(e.checkDate))}}},methods:{clear(){var e;this.mode==="edit"&&this.$emit("update:dataEdit",null),this.reproduct.cow=null,this.reproduct.loginDate=new Date,this.reproduct.estrusDate=d(new Date,21),this.reproduct.matingDate=d(new Date,22),this.reproduct.checkDate=b(d(new Date,43),2),this.reproduct.dad="",this.reproduct.howTo="",this.reproduct.status=1,this.reproduct.result=2,(e=this.reproduct)==null||delete e._id},confirmCancel(e){this.value=!1,this.$emit(e)},confirm(){this.clear(),this.confirmCancel("confirm")},cancel(){this.clear(),this.confirmCancel("cancel")},async submit(){this.loading=!0,this.alert="";try{this.mode==="create"?await D.create(this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm")):await D.update(this.reproduct._id,this.reproduct)&&(this.loading=!1,this.value=!1,this.confirmCancel("confirm"))}catch(e){console.error("Error : ",e),this.loading=!1,this.alert=e.response.data.message}}},components:{BaseButton:T,BaseButtons:E,CardBox:L,BaseDivider:R,OverlayLayer:U,FormField:G,FormControl:F,NotificationBar:N,BaseLevel:q,DDLCow:J},props:{modelValue:{type:[String,Number,Boolean],default:null},mode:{type:String,default:""},dataEdit:{type:Object,default:null}}},X={class:"grid grid-cols-2 lg:grid-cols-3 gap-3 mt-1"};function Y(e,l,V,S,t,n){const g=s("DDLCow"),i=s("FormField"),u=s("FormControl"),_=s("NotificationBar"),w=s("BaseDivider"),h=s("BaseButton"),f=s("BaseButtons"),M=s("CardBox"),x=s("OverlayLayer");return B((c(),m(x,null,{default:r(()=>[B(o(M,{title:V.mode==="create"?"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C":"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"shadow-lg w-full lg:w-1/2 z-50","header-icon":"close",modal:"",form:"",onSubmit:I(n.submit,["prevent"]),onHeaderIconClick:n.cancel},{default:r(()=>[O("div",X,[o(i,{label:"\u0E42\u0E04",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(g,{modelValue:t.reproduct.cow,"onUpdate:modelValue":l[0]||(l[0]=a=>t.reproduct.cow=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:""},{default:r(()=>[o(u,{modelValue:t.reproduct.dad,"onUpdate:modelValue":l[1]||(l[1]=a=>t.reproduct.dad=a),icon:"genderMale"},null,8,["modelValue"])]),_:1}),o(i,{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07"},{default:r(()=>[o(u,{modelValue:t.reproduct.loginDate,"onUpdate:modelValue":l[2]||(l[2]=a=>t.reproduct.loginDate=a),icon:"calendar",type:"date",required:""},null,8,["modelValue"])]),_:1}),o(i,{label:"\u0E1C\u0E25"},{default:r(()=>[o(u,{modelValue:t.reproduct.result,"onUpdate:modelValue":l[3]||(l[3]=a=>t.reproduct.result=a),options:t.result},null,8,["modelValue","options"])]),_:1}),t.reproduct.result==1?(c(),m(i,{key:0,label:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E23\u0E31\u0E01\u0E29\u0E32",help:""},{default:r(()=>[o(u,{modelValue:t.reproduct.howTo,"onUpdate:modelValue":l[4]||(l[4]=a=>t.reproduct.howTo=a),icon:"doctor"},null,8,["modelValue"])]),_:1})):p("",!0),t.reproduct.result==2?(c(),m(i,{key:1,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C + 21 \u0E27\u0E31\u0E19)"},{default:r(()=>[o(u,{modelValue:t.reproduct.estrusDate,"onUpdate:modelValue":l[5]||(l[5]=a=>t.reproduct.estrusDate=a),icon:"calendar",type:"date","lower-limit":t.reproduct.loginDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),t.reproduct.result==2?(c(),m(i,{key:2,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14 + 24 \u0E0A\u0E21)"},{default:r(()=>[o(u,{modelValue:t.reproduct.matingDate,"onUpdate:modelValue":l[6]||(l[6]=a=>t.reproduct.matingDate=a),icon:"calendar",type:"date","lower-limit":t.reproduct.estrusDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),t.reproduct.result==2?(c(),m(i,{key:3,label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",help:"* \u0E2B\u0E49\u0E32\u0E21\u0E27\u0E48\u0E32\u0E07 (\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C + 2 \u0E40\u0E14\u0E37\u0E2D\u0E19)"},{default:r(()=>[o(u,{modelValue:t.reproduct.checkDate,"onUpdate:modelValue":l[7]||(l[7]=a=>t.reproduct.checkDate=a),icon:"calendar",type:"date","lower-limit":t.reproduct.matingDate,required:""},null,8,["modelValue","lower-limit"])]),_:1})):p("",!0),o(i,{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30"},{default:r(()=>[o(u,{modelValue:t.reproduct.status,"onUpdate:modelValue":l[8]||(l[8]=a=>t.reproduct.status=a),options:t.status},null,8,["modelValue","options"])]),_:1})]),t.alert?(c(),m(_,{key:0,color:"danger",outline:"",icon:"alertCircleOutline"},{default:r(()=>[A(H(t.alert),1)]),_:1})):p("",!0),o(w),o(f,{type:"justify-center"},{default:r(()=>[o(h,{label:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",color:"success",type:"submit",loading:t.loading},null,8,["loading"]),o(h,{label:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",color:"danger",onClick:n.cancel},null,8,["onClick"])]),_:1})]),_:1},8,["title","onSubmit","onHeaderIconClick"]),[[C,n.value]])]),_:1},512)),[[C,n.value]])}var Z=k(Q,[["render",Y]]);const $={data(){return{openModal:!1,items:[],forms:[{label:"\u0E42\u0E04",value:"cow",type:"ddl",module:"cow"},{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",value:"status",options:v()},{label:"\u0E1C\u0E25",value:"result",options:y()},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"loginDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",value:"estrusDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"matingDate",icon:"calendar",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",value:"checkDate",icon:"calendar",type:"date"}],search:{cow:null,loginDate:null,estrusDate:null,matingDate:null,checkDate:null,status:"",result:""},loading:!1,mode:"create",dataEdit:null,checked:{code:{value:"seq"},label:{value:"cow.name"}},datas:[{label:"\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48",class:"text-center",value:"seq"},{label:"\u0E23\u0E2B\u0E31\u0E2A\u0E42\u0E04",value:"cow.code"},{label:"\u0E0A\u0E37\u0E48\u0E2D\u0E42\u0E04",value:"cow.name"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"text-center",value:"loginDate",type:"date"},{label:"\u0E1C\u0E25",func:e=>y()[e.result].label},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E31\u0E14",class:"text-center",value:"estrusDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1C\u0E2A\u0E21\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",class:"text-center",value:"matingDate",type:"date"},{label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E23\u0E27\u0E08\u0E17\u0E49\u0E2D\u0E07",class:"text-center",value:"checkDate",type:"date"},{label:"\u0E1E\u0E48\u0E2D\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",value:"dad"},{label:"\u0E2A\u0E16\u0E32\u0E19\u0E30",func:e=>v()[e.status].label},{label:"\u0E27\u0E34\u0E18\u0E35\u0E23\u0E31\u0E01\u0E29\u0E32",value:"howTo"}],buttons:[{label:"\u0E25\u0E1A",type:"delete",color:"danger",condition:e=>e.status!="2"&&e.status!="3"},{label:"\u0E41\u0E01\u0E49\u0E44\u0E02",type:"edit",color:"warning",condition:e=>e.status!="2"&&e.status!="3"}]}},components:{SectionMain:z,LayoutAuthenticated:K,SectionTitleBarSub:P,Table:W,Modal:Z,Criteria:j},computed:{user(){return this.$store.state.auth.user}},created(){this.getReproductions()},methods:{async getReproductions(){this.loading=!0;const e=await D.all(this.search);this.items=[],e.data&&(this.items=e.data.reproducts),this.loading=!1},async remove(e){this.loading=!0,(await D.delete(e)).data&&this.getReproductions(),this.loading=!1},edit(e){this.dataEdit=e,this.dataEdit.cow=e.cow._id,this.mode="edit",this.openModal=!0},reset(){this.search.cow=null,this.search.date=null}}};function ee(e,l,V,S,t,n){const g=s("SectionTitleBarSub"),i=s("Modal"),u=s("Criteria"),_=s("Table"),w=s("SectionMain"),h=s("LayoutAuthenticated");return c(),m(h,null,{default:r(()=>[o(w,null,{default:r(()=>[o(g,{icon:"reproduction",title:"\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C",btnText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C","has-btn-add":"",onOpenModal:l[0]||(l[0]=f=>{t.mode="create",t.openModal=!0})}),o(i,{modelValue:t.openModal,"onUpdate:modelValue":l[1]||(l[1]=f=>t.openModal=f),mode:t.mode,dataEdit:t.dataEdit,onConfirm:n.getReproductions},null,8,["modelValue","mode","dataEdit","onConfirm"]),o(u,{grid:"grid-cols-2 lg:grid-cols-4",onSearch:n.getReproductions,onReset:n.reset,forms:t.forms,search:t.search},null,8,["onSearch","onReset","forms","search"]),o(_,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E1A\u0E1E\u0E31\u0E19\u0E18\u0E38\u0E4C","has-checkbox":"","checked-data":t.checked,items:t.items,datas:t.datas,buttons:t.buttons,onEdit:n.edit,onDelete:n.remove,onDeleteSelected:e.removeSelected,loading:t.loading},null,8,["checked-data","items","datas","buttons","onEdit","onDelete","onDeleteSelected","loading"])]),_:1})]),_:1})}var ue=k($,[["render",ee]]);export{ue as default};
